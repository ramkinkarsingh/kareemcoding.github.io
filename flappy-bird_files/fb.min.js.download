/**
	name    : Flappy Bird
	author  : Enea Entertainment
	contact : games@enea.sk
 */
(function(){var d=d||{};d.WEBGL_RENDERER=0;d.CANVAS_RENDERER=1;d.VERSION="v1.5.3";d.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16};d.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1};d.INTERACTION_FREQUENCY=30;d.AUTO_PREVENT_DEFAULT=!0;d.RAD_TO_DEG=180/Math.PI;d.DEG_TO_RAD=Math.PI/180;d.Point=function(c,e){this.x=c||0;this.y=e||0};d.Point.prototype.clone=
function(){return new d.Point(this.x,this.y)};d.Point.prototype.constructor=d.Point;d.Point.prototype.set=function(c,e){this.x=c||0;this.y=e||(0!==e?this.x:0)};d.Rectangle=function(c,e,f,d){this.x=c||0;this.y=e||0;this.width=f||0;this.height=d||0};d.Rectangle.prototype.clone=function(){return new d.Rectangle(this.x,this.y,this.width,this.height)};d.Rectangle.prototype.contains=function(c,e){if(0>=this.width||0>=this.height)return!1;var f=this.x;return c>=f&&c<=f+this.width&&(f=this.y,e>=f&&e<=f+this.height)?
!0:!1};d.Rectangle.prototype.constructor=d.Rectangle;d.EmptyRectangle=new d.Rectangle(0,0,0,0);d.Polygon=function(c){c instanceof Array||(c=Array.prototype.slice.call(arguments));if("number"===typeof c[0]){for(var e=[],f=0,h=c.length;f<h;f+=2)e.push(new d.Point(c[f],c[f+1]));c=e}this.points=c};d.Polygon.prototype.clone=function(){for(var c=[],e=0;e<this.points.length;e++)c.push(this.points[e].clone());return new d.Polygon(c)};d.Polygon.prototype.contains=function(c,e){for(var f=!1,d=0,k=this.points.length-
1;d<this.points.length;k=d++){var l=this.points[d].x,m=this.points[d].y,n=this.points[k].x,k=this.points[k].y;m>e!==k>e&&c<(n-l)*(e-m)/(k-m)+l&&(f=!f)}return f};d.Polygon.prototype.constructor=d.Polygon;d.Circle=function(c,e,f){this.x=c||0;this.y=e||0;this.radius=f||0};d.Circle.prototype.clone=function(){return new d.Circle(this.x,this.y,this.radius)};d.Circle.prototype.contains=function(c,e){if(0>=this.radius)return!1;var f=this.x-c,d=this.y-e,k=this.radius*this.radius;return f*f+d*d<=k};d.Circle.prototype.constructor=
d.Circle;d.Ellipse=function(c,e,f,d){this.x=c||0;this.y=e||0;this.width=f||0;this.height=d||0};d.Ellipse.prototype.clone=function(){return new d.Ellipse(this.x,this.y,this.width,this.height)};d.Ellipse.prototype.contains=function(c,e){if(0>=this.width||0>=this.height)return!1;var f=(c-this.x)/this.width,d=(e-this.y)/this.height;return 1>=f*f+d*d};d.Ellipse.prototype.getBounds=function(){return new d.Rectangle(this.x,this.y,this.width,this.height)};d.Ellipse.prototype.constructor=d.Ellipse;d.determineMatrixArrayType=
function(){return"undefined"!==typeof Float32Array?Float32Array:Array};d.Matrix2=d.determineMatrixArrayType();d.Matrix=function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0};d.Matrix.prototype.fromArray=function(c){this.a=c[0];this.b=c[1];this.c=c[3];this.d=c[4];this.tx=c[2];this.ty=c[5]};d.Matrix.prototype.toArray=function(c){this.array||(this.array=new Float32Array(9));var e=this.array;c?(this.array[0]=this.a,this.array[1]=this.c,this.array[2]=0,this.array[3]=this.b,this.array[4]=this.d,
this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0);this.array[8]=1;return e};d.identityMatrix=new d.Matrix;d.DisplayObject=function(){this.position=new d.Point;this.scale=new d.Point(1,1);this.pivot=new d.Point(0,0);this.rotation=0;this.alpha=1;this.visible=!0;this.hitArea=null;this.renderable=this.buttonMode=!1;this.stage=this.parent=
null;this.worldAlpha=1;this._interactive=!1;this.defaultCursor="pointer";this.worldTransform=new d.Matrix;this.color=[];this.dynamic=!0;this._sr=0;this._cr=1;this.filterArea=null;this._bounds=new d.Rectangle(0,0,1,1);this._mask=this._currentBounds=null;this._cacheIsDirty=this._cacheAsBitmap=!1};d.DisplayObject.prototype.constructor=d.DisplayObject;d.DisplayObject.prototype.setInteractive=function(c){this.interactive=c};Object.defineProperty(d.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},
set:function(c){this._interactive=c;this.stage&&(this.stage.dirty=!0)}});Object.defineProperty(d.DisplayObject.prototype,"worldVisible",{get:function(){var c=this;do{if(!c.visible)return!1;c=c.parent}while(c);return!0}});Object.defineProperty(d.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(c){this._mask&&(this._mask.isMask=!1);if(this._mask=c)this._mask.isMask=!0}});Object.defineProperty(d.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(c){if(c){for(var e=
[],f=0;f<c.length;f++)for(var d=c[f].passes,k=0;k<d.length;k++)e.push(d[k]);this._filterBlock={target:this,filterPasses:e}}this._filters=c}});Object.defineProperty(d.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(c){this._cacheAsBitmap!==c&&(c?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=c)}});d.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=
Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var c=this.parent.worldTransform,e=this.worldTransform,f=this.pivot.x,d=this.pivot.y,k=this._cr*this.scale.x,l=-this._sr*this.scale.y,m=this._sr*this.scale.x,n=this._cr*this.scale.y,p=this.position.x-k*f-d*l,f=this.position.y-n*d-f*m,d=c.a,q=c.b,t=c.c,s=c.d;e.a=d*k+q*m;e.b=d*l+q*n;e.tx=d*p+q*f+c.tx;e.c=t*k+s*m;e.d=t*l+s*n;e.ty=t*p+s*f+c.ty;this.worldAlpha=this.alpha*this.parent.worldAlpha};d.DisplayObject.prototype.getBounds=function(c){return d.EmptyRectangle};
d.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(d.identityMatrix)};d.DisplayObject.prototype.setStageReference=function(c){this.stage=c;this._interactive&&(this.stage.dirty=!0)};d.DisplayObject.prototype.generateTexture=function(c){var e=this.getLocalBounds();c=new d.RenderTexture(e.width|0,e.height|0,c);c.render(this,new d.Point(-e.x,-e.y));return c};d.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()};d.DisplayObject.prototype._renderCachedSprite=
function(c){c.gl?d.Sprite.prototype._renderWebGL.call(this._cachedSprite,c):d.Sprite.prototype._renderCanvas.call(this._cachedSprite,c)};d.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var c=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(c.width|0,c.height|0);else{var e=new d.RenderTexture(c.width|0,c.height|0);this._cachedSprite=new d.Sprite(e);this._cachedSprite.worldTransform=this.worldTransform}e=this._filters;this._filters=null;
this._cachedSprite.filters=e;this._cachedSprite.texture.render(this,new d.Point(-c.x,-c.y));this._cachedSprite.anchor.x=-(c.x/c.width);this._cachedSprite.anchor.y=-(c.y/c.height);this._filters=e;this._cacheAsBitmap=!0};d.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)};d.DisplayObject.prototype._renderWebGL=function(c){};d.DisplayObject.prototype._renderCanvas=function(c){};Object.defineProperty(d.DisplayObject.prototype,
"x",{get:function(){return this.position.x},set:function(c){this.position.x=c}});Object.defineProperty(d.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(c){this.position.y=c}});d.DisplayObjectContainer=function(){d.DisplayObject.call(this);this.children=[]};d.DisplayObjectContainer.prototype=Object.create(d.DisplayObject.prototype);d.DisplayObjectContainer.prototype.constructor=d.DisplayObjectContainer;d.DisplayObjectContainer.prototype.addChild=function(c){this.addChildAt(c,
this.children.length)};d.DisplayObjectContainer.prototype.addChildAt=function(c,e){if(0<=e&&e<=this.children.length)c.parent&&c.parent.removeChild(c),c.parent=this,this.children.splice(e,0,c),this.stage&&c.setStageReference(this.stage);else throw Error(c+" The index "+e+" supplied is out of bounds "+this.children.length);};d.DisplayObjectContainer.prototype.swapChildren=function(c,e){if(c!==e){var f=this.children.indexOf(c),d=this.children.indexOf(e);if(0>f||0>d)throw Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
this.children[f]=e;this.children[d]=c}};d.DisplayObjectContainer.prototype.getChildAt=function(c){if(0<=c&&c<this.children.length)return this.children[c];throw Error("Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller");};d.DisplayObjectContainer.prototype.removeChild=function(c){return this.removeChildAt(this.children.indexOf(c))};d.DisplayObjectContainer.prototype.removeChildAt=function(c){var e=this.getChildAt(c);this.stage&&e.removeStageReference();
e.parent=void 0;this.children.splice(c,1);return e};d.DisplayObjectContainer.prototype.removeChildren=function(c,e){var f=c||0,d="number"===typeof e?e:this.children.length,k=d-f;if(0<k&&k<=d){f=this.children.splice(f,k);for(d=0;d<f.length;d++)k=f[d],this.stage&&k.removeStageReference(),k.parent=void 0;return f}throw Error("Range Error, numeric values are outside the acceptable range");};d.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(d.DisplayObject.prototype.updateTransform.call(this),
!this._cacheAsBitmap))for(var c=0,e=this.children.length;c<e;c++)this.children[c].updateTransform()};d.DisplayObjectContainer.prototype.getBounds=function(c){if(0===this.children.length)return d.EmptyRectangle;if(c){var e=this.worldTransform;this.worldTransform=c;this.updateTransform();this.worldTransform=e}for(var f=e=Infinity,h=-Infinity,k=-Infinity,l,m,n=!1,p=0,q=this.children.length;p<q;p++)this.children[p].visible&&(n=!0,l=this.children[p].getBounds(c),e=e<l.x?e:l.x,f=f<l.y?f:l.y,m=l.width+l.x,
l=l.height+l.y,h=h>m?h:m,k=k>l?k:l);if(!n)return d.EmptyRectangle;c=this._bounds;c.x=e;c.y=f;c.width=h-e;c.height=k-f;return c};d.DisplayObjectContainer.prototype.getLocalBounds=function(){var c=this.worldTransform;this.worldTransform=d.identityMatrix;for(var e=0,f=this.children.length;e<f;e++)this.children[e].updateTransform();e=this.getBounds();this.worldTransform=c;return e};d.DisplayObjectContainer.prototype.setStageReference=function(c){this.stage=c;this._interactive&&(this.stage.dirty=!0);for(var e=
0,f=this.children.length;e<f;e++)this.children[e].setStageReference(c)};d.DisplayObjectContainer.prototype.removeStageReference=function(){for(var c=0,e=this.children.length;c<e;c++)this.children[c].removeStageReference();this._interactive&&(this.stage.dirty=!0);this.stage=null};d.DisplayObjectContainer.prototype._renderWebGL=function(c){if(this.visible&&!(0>=this.alpha))if(this._cacheAsBitmap)this._renderCachedSprite(c);else{var e,f;if(this._mask||this._filters){this._mask&&(c.spriteBatch.stop(),
c.maskManager.pushMask(this.mask,c),c.spriteBatch.start());this._filters&&(c.spriteBatch.flush(),c.filterManager.pushFilter(this._filterBlock));e=0;for(f=this.children.length;e<f;e++)this.children[e]._renderWebGL(c);c.spriteBatch.stop();this._filters&&c.filterManager.popFilter();this._mask&&c.maskManager.popMask(c);c.spriteBatch.start()}else for(e=0,f=this.children.length;e<f;e++)this.children[e]._renderWebGL(c)}};d.DisplayObjectContainer.prototype._renderCanvas=function(c){if(!1!==this.visible&&
0!==this.alpha)if(this._cacheAsBitmap)this._renderCachedSprite(c);else{this._mask&&c.maskManager.pushMask(this._mask,c.context);for(var e=0,f=this.children.length;e<f;e++)this.children[e]._renderCanvas(c);this._mask&&c.maskManager.popMask(c.context)}};d.Sprite=function(c){d.DisplayObjectContainer.call(this);this.anchor=new d.Point;this.texture=c;this._height=this._width=0;this.tint=16777215;this.blendMode=d.blendModes.NORMAL;if(c.baseTexture.hasLoaded)this.onTextureUpdate();else this.onTextureUpdateBind=
this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind);this.renderable=!0};d.Sprite.prototype=Object.create(d.DisplayObjectContainer.prototype);d.Sprite.prototype.constructor=d.Sprite;Object.defineProperty(d.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(c){this.scale.x=c/this.texture.frame.width;this._width=c}});Object.defineProperty(d.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},
set:function(c){this.scale.y=c/this.texture.frame.height;this._height=c}});d.Sprite.prototype.setTexture=function(c){this.texture.baseTexture!==c.baseTexture&&(this.textureChange=!0);this.texture=c;this.cachedTint=16777215;this.updateFrame=!0};d.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width);this._height&&(this.scale.y=this._height/this.texture.frame.height);this.updateFrame=!0};d.Sprite.prototype.getBounds=function(c){var e=this.texture.frame.width,
f=this.texture.frame.height,d=e*(1-this.anchor.x),k=e*-this.anchor.x,l=f*(1-this.anchor.y),m=f*-this.anchor.y;c=c||this.worldTransform;var n=c.a,p=c.c,q=c.b,t=c.d,s=c.tx,u=c.ty;c=n*k+q*m+s;var f=t*m+p*k+u,e=n*d+q*m+s,m=t*m+p*d+u,v=n*d+q*l+s,d=t*l+p*d+u,n=n*k+q*l+s,k=t*l+p*k+u,p=l=-Infinity,q=t=Infinity,t=c<t?c:t,t=e<t?e:t,t=v<t?v:t,t=n<t?n:t,q=f<q?f:q,q=m<q?m:q,q=d<q?d:q,q=k<q?k:q,l=c>l?c:l,l=e>l?e:l,l=v>l?v:l,p=f>p?f:p,p=m>p?m:p,p=d>p?d:p;c=this._bounds;c.x=t;c.width=(n>l?n:l)-t;c.y=q;c.height=(k>
p?k:p)-q;return this._currentBounds=c};d.Sprite.prototype._renderWebGL=function(c){if(this.visible&&!(0>=this.alpha)){var e,f;if(this._mask||this._filters){var d=c.spriteBatch;this._mask&&(d.stop(),c.maskManager.pushMask(this.mask,c),d.start());this._filters&&(d.flush(),c.filterManager.pushFilter(this._filterBlock));d.render(this);e=0;for(f=this.children.length;e<f;e++)this.children[e]._renderWebGL(c);d.stop();this._filters&&c.filterManager.popFilter();this._mask&&c.maskManager.popMask(c);d.start()}else for(c.spriteBatch.render(this),
e=0,f=this.children.length;e<f;e++)this.children[e]._renderWebGL(c)}};d.Sprite.prototype._renderCanvas=function(c){if(!1!==this.visible&&0!==this.alpha){var e=this.texture.frame,f=c.context,h=this.texture;this.blendMode!==c.currentBlendMode&&(c.currentBlendMode=this.blendMode,f.globalCompositeOperation=d.blendModesCanvas[c.currentBlendMode]);this._mask&&c.maskManager.pushMask(this._mask,c.context);if(e&&e.width&&e.height&&h.baseTexture.source){f.globalAlpha=this.worldAlpha;var k=this.worldTransform;
c.roundPixels?f.setTransform(k.a,k.c,k.b,k.d,k.tx|0,k.ty|0):f.setTransform(k.a,k.c,k.b,k.d,k.tx,k.ty);c.smoothProperty&&c.scaleMode!==this.texture.baseTexture.scaleMode&&(c.scaleMode=this.texture.baseTexture.scaleMode,f[c.smoothProperty]=c.scaleMode===d.scaleModes.LINEAR);if(16777215!==this.tint){if(this.cachedTint!==this.tint){if(!h.baseTexture.hasLoaded)return;this.cachedTint=this.tint;this.tintedTexture=d.CanvasTinter.getTintedTexture(this,this.tint)}f.drawImage(this.tintedTexture,0,0,e.width,
e.height,this.anchor.x*-e.width,this.anchor.y*-e.height,e.width,e.height)}else h.trim?(h=h.trim,f.drawImage(this.texture.baseTexture.source,e.x,e.y,e.width,e.height,h.x-this.anchor.x*h.width,h.y-this.anchor.y*h.height,e.width,e.height)):f.drawImage(this.texture.baseTexture.source,e.x,e.y,e.width,e.height,this.anchor.x*-e.width,this.anchor.y*-e.height,e.width,e.height)}e=0;for(f=this.children.length;e<f;e++)this.children[e]._renderCanvas(c);this._mask&&c.maskManager.popMask(c.context)}};d.Sprite.fromFrame=
function(c){var e=d.TextureCache[c];if(!e)throw Error('The frameId "'+c+'" does not exist in the texture cache'+this);return new d.Sprite(e)};d.Sprite.fromImage=function(c,e,f){c=d.Texture.fromImage(c,e,f);return new d.Sprite(c)};d.SpriteBatch=function(c){d.DisplayObjectContainer.call(this);this.textureThing=c;this.ready=!1};d.SpriteBatch.prototype=Object.create(d.DisplayObjectContainer.prototype);d.SpriteBatch.constructor=d.SpriteBatch;d.SpriteBatch.prototype.initWebGL=function(c){this.fastSpriteBatch=
new d.WebGLFastSpriteBatch(c);this.ready=!0};d.SpriteBatch.prototype.updateTransform=function(){d.DisplayObject.prototype.updateTransform.call(this)};d.SpriteBatch.prototype._renderWebGL=function(c){!this.visible||0>=this.alpha||!this.children.length||(this.ready||this.initWebGL(c.gl),c.spriteBatch.stop(),c.shaderManager.activateShader(c.shaderManager.fastShader),this.fastSpriteBatch.begin(this,c),this.fastSpriteBatch.render(this),c.shaderManager.activateShader(c.shaderManager.defaultShader),c.spriteBatch.start())};
d.SpriteBatch.prototype._renderCanvas=function(c){var e=c.context;e.globalAlpha=this.worldAlpha;d.DisplayObject.prototype.updateTransform.call(this);for(var f=this.worldTransform,h=!0,k=0;k<this.children.length;k++){var l=this.children[k];if(l.visible){var m=l.texture,n=m.frame;e.globalAlpha=this.worldAlpha*l.alpha;if(0===l.rotation%(2*Math.PI))h&&(e.setTransform(f.a,f.c,f.b,f.d,f.tx,f.ty),h=!1),e.drawImage(m.baseTexture.source,n.x,n.y,n.width,n.height,l.anchor.x*-n.width*l.scale.x+l.position.x+.5|
0,l.anchor.y*-n.height*l.scale.y+l.position.y+.5|0,n.width*l.scale.x,n.height*l.scale.y);else{h||(h=!0);d.DisplayObject.prototype.updateTransform.call(l);var p=l.worldTransform;c.roundPixels?e.setTransform(p.a,p.c,p.b,p.d,p.tx|0,p.ty|0):e.setTransform(p.a,p.c,p.b,p.d,p.tx,p.ty);e.drawImage(m.baseTexture.source,n.x,n.y,n.width,n.height,l.anchor.x*-n.width+.5|0,l.anchor.y*-n.height+.5|0,n.width,n.height)}}}};d.MovieClip=function(c){d.Sprite.call(this,c[0]);this.textures=c;this.animationSpeed=1;this.loop=
!0;this.onComplete=null;this.currentFrame=0;this.playing=!1};d.MovieClip.prototype=Object.create(d.Sprite.prototype);d.MovieClip.prototype.constructor=d.MovieClip;Object.defineProperty(d.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}});d.MovieClip.prototype.stop=function(){this.playing=!1};d.MovieClip.prototype.play=function(){this.playing=!0};d.MovieClip.prototype.gotoAndStop=function(c){this.playing=!1;this.currentFrame=c;this.setTexture(this.textures[(this.currentFrame+
.5|0)%this.textures.length])};d.MovieClip.prototype.gotoAndPlay=function(c){this.currentFrame=c;this.playing=!0};d.MovieClip.prototype.updateTransform=function(){d.Sprite.prototype.updateTransform.call(this);if(this.playing){this.currentFrame+=this.animationSpeed;var c=this.currentFrame+.5|0;if(this.loop||c<this.textures.length)this.setTexture(this.textures[c%this.textures.length]);else if(c>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete))this.onComplete()}};d.MovieClip.prototype.fromFrames=
function(c){for(var e=[],f=0;f<c.length;f++)e.push(new d.Texture.fromFrame(c[f]));return new d.MovieClip(e)};d.MovieClip.prototype.fromImages=function(c){for(var e=[],f=0;f<c.length;f++)e.push(new d.Texture.fromImage(c[f]));return new d.MovieClip(e)};d.FilterBlock=function(){this.renderable=this.visible=!0};d.Text=function(c,e){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");d.Sprite.call(this,d.Texture.fromCanvas(this.canvas));this.setText(c);this.setStyle(e);
this.updateText();this.dirty=!1};d.Text.prototype=Object.create(d.Sprite.prototype);d.Text.prototype.constructor=d.Text;d.Text.prototype.setStyle=function(c){c=c||{};c.font=c.font||"bold 20pt Arial";c.fill=c.fill||"black";c.align=c.align||"left";c.stroke=c.stroke||"black";c.strokeThickness=c.strokeThickness||0;c.wordWrap=c.wordWrap||!1;c.wordWrapWidth=c.wordWrapWidth||100;c.wordWrapWidth=c.wordWrapWidth||100;c.dropShadow=c.dropShadow||!1;c.dropShadowAngle=c.dropShadowAngle||Math.PI/6;c.dropShadowDistance=
c.dropShadowDistance||4;c.dropShadowColor=c.dropShadowColor||"black";this.style=c;this.dirty=!0};d.Text.prototype.setText=function(c){this.text=c.toString()||" ";this.dirty=!0};d.Text.prototype.updateText=function(){this.context.font=this.style.font;var c=this.text;this.style.wordWrap&&(c=this.wordWrap(this.text));for(var c=c.split(/(?:\r\n|\r|\n)/),e=[],f=0,d=0;d<c.length;d++){var k=this.context.measureText(c[d]).width;e[d]=k;f=Math.max(f,k)}d=f+this.style.strokeThickness;this.style.dropShadow&&
(d+=this.style.dropShadowDistance);this.canvas.width=d+this.context.lineWidth;k=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness;d=k*c.length;this.style.dropShadow&&(d+=this.style.dropShadowDistance);this.canvas.height=d;navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.font=this.style.font;this.context.strokeStyle=this.style.stroke;this.context.lineWidth=this.style.strokeThickness;this.context.textBaseline="top";var l,
m;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;for(var n=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance,d=0;d<c.length;d++)l=this.style.strokeThickness/2,m=this.style.strokeThickness/2+d*k,"right"===this.style.align?l+=f-e[d]:"center"===this.style.align&&(l+=(f-e[d])/2),this.style.fill&&this.context.fillText(c[d],l+n,m+p)}this.context.fillStyle=this.style.fill;for(d=0;d<c.length;d++)l=
this.style.strokeThickness/2,m=this.style.strokeThickness/2+d*k,"right"===this.style.align?l+=f-e[d]:"center"===this.style.align&&(l+=(f-e[d])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(c[d],l,m),this.style.fill&&this.context.fillText(c[d],l,m);this.updateTexture()};d.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width;this.texture.baseTexture.height=this.canvas.height;this.texture.frame.width=this.canvas.width;this.texture.frame.height=
this.canvas.height;this._width=this.canvas.width;this._height=this.canvas.height;this.requiresUpdate=!0};d.Text.prototype._renderWebGL=function(c){this.requiresUpdate&&(this.requiresUpdate=!1,d.updateWebGLTexture(this.texture.baseTexture,c.gl));d.Sprite.prototype._renderWebGL.call(this,c)};d.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1);d.Sprite.prototype.updateTransform.call(this)};d.Text.prototype.determineFontHeight=function(c){var e=d.Text.heightCache[c];
if(!e){var f=document.getElementsByTagName("body")[0],h=document.createElement("div"),e=document.createTextNode("M");h.appendChild(e);h.setAttribute("style",c+";position:absolute;top:0;left:0");f.appendChild(h);e=h.offsetHeight;d.Text.heightCache[c]=e;f.removeChild(h)}return e};d.Text.prototype.wordWrap=function(c){var e="";c=c.split("\n");for(var f=0;f<c.length;f++){for(var d=this.style.wordWrapWidth,k=c[f].split(" "),l=0;l<k.length;l++){var m=this.context.measureText(k[l]).width,n=m+this.context.measureText(" ").width;
0===l||n>d?(0<l&&(e+="\n"),e+=k[l],d=this.style.wordWrapWidth-m):(d-=n,e+=" "+k[l])}f<c.length-1&&(e+="\n")}return e};d.Text.prototype.destroy=function(c){c&&this.texture.destroy()};d.Text.heightCache={};d.BitmapText=function(c,e){d.DisplayObjectContainer.call(this);this._pool=[];this.setText(c);this.setStyle(e);this.updateText();this.dirty=!1};d.BitmapText.prototype=Object.create(d.DisplayObjectContainer.prototype);d.BitmapText.prototype.constructor=d.BitmapText;d.BitmapText.prototype.setText=function(c){this.text=
c||" ";this.dirty=!0};d.BitmapText.prototype.setStyle=function(c){c=c||{};c.align=c.align||"left";this.style=c;var e=c.font.split(" ");this.fontName=e[e.length-1];this.fontSize=2<=e.length?parseInt(e[e.length-2],10):d.BitmapText.fonts[this.fontName].size;this.dirty=!0;this.tint=c.tint};d.BitmapText.prototype.updateText=function(){for(var c=d.BitmapText.fonts[this.fontName],e=new d.Point,f=null,h=[],k=0,l=[],m=0,n=this.fontSize/c.size,p=0;p<this.text.length;p++){var q=this.text.charCodeAt(p);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))l.push(e.x),
k=Math.max(k,e.x),m++,e.x=0,e.y+=c.lineHeight,f=null;else{var t=c.chars[q];t&&(f&&t[f]&&(e.x+=t.kerning[f]),h.push({texture:t.texture,line:m,charCode:q,position:new d.Point(e.x+t.xOffset,e.y+t.yOffset)}),e.x+=t.xAdvance,f=q)}}l.push(e.x);k=Math.max(k,e.x);f=[];for(p=0;p<=m;p++)q=0,"right"===this.style.align?q=k-l[p]:"center"===this.style.align&&(q=(k-l[p])/2),f.push(q);m=this.children.length;l=h.length;q=this.tint||16777215;for(p=0;p<l;p++)(t=p<m?this.children[p]:this._pool.pop())?t.setTexture(h[p].texture):
t=new d.Sprite(h[p].texture),t.position.x=(h[p].position.x+f[h[p].line])*n,t.position.y=h[p].position.y*n,t.scale.x=t.scale.y=n,t.tint=q,t.parent||this.addChild(t);for(;this.children.length>l;)h=this.getChildAt(this.children.length-1),this._pool.push(h),this.removeChild(h);this.textWidth=k*n;this.textHeight=(e.y+c.lineHeight)*n};d.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1);d.DisplayObjectContainer.prototype.updateTransform.call(this)};d.BitmapText.fonts=
{};d.InteractionData=function(){this.global=new d.Point;this.originalEvent=this.target=null};d.InteractionData.prototype.getLocalPosition=function(c){var e=c.worldTransform;c=this.global;var f=e.a,h=e.b,k=e.tx,l=e.c,m=e.d,e=e.ty,n=1/(f*m+h*-l);return new d.Point(m*n*c.x+-h*n*c.y+(e*h-k*m)*n,f*n*c.y+-l*n*c.x+(-e*f+k*l)*n)};d.InteractionData.prototype.constructor=d.InteractionData;d.InteractionManager=function(c){this.stage=c;this.mouse=new d.InteractionData;this.touchs={};this.tempPoint=new d.Point;
this.mouseoverEnabled=!0;this.pool=[];this.interactiveItems=[];this.interactionDOMElement=null;this.onMouseMove=this.onMouseMove.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this.mouseOut=!1};d.InteractionManager.prototype.constructor=
d.InteractionManager;d.InteractionManager.prototype.collectInteractiveSprite=function(c,e){for(var f=c.children,d=f.length-1;0<=d;d--){var k=f[d];k._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(k),0<k.children.length&&this.collectInteractiveSprite(k,k)):(k.__iParent=null,0<k.children.length&&this.collectInteractiveSprite(k,e))}};d.InteractionManager.prototype.setTarget=function(c){this.target=c;null===this.interactionDOMElement&&this.setTargetDomElement(c.view)};d.InteractionManager.prototype.setTargetDomElement=
function(c){this.removeEvents();window.navigator.msPointerEnabled&&(c.style["-ms-content-zooming"]="none",c.style["-ms-touch-action"]="none");this.interactionDOMElement=c;c.addEventListener("mousemove",this.onMouseMove,!0);c.addEventListener("mousedown",this.onMouseDown,!0);c.addEventListener("mouseout",this.onMouseOut,!0);c.addEventListener("touchstart",this.onTouchStart,!0);c.addEventListener("touchend",this.onTouchEnd,!0);c.addEventListener("touchmove",this.onTouchMove,!0);window.addEventListener("mouseup",
this.onMouseUp,!0)};d.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",
this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))};d.InteractionManager.prototype.update=function(){if(this.target){var c=Date.now(),e=c-this.last,e=e*d.INTERACTION_FREQUENCY/1E3;if(!(1>e)){this.last=c;c=0;if(this.dirty){this.dirty=!1;e=this.interactiveItems.length;for(c=0;c<e;c++)this.interactiveItems[c].interactiveChildren=
!1;this.interactiveItems=[];this.stage.interactive&&this.interactiveItems.push(this.stage);this.collectInteractiveSprite(this.stage,this.stage)}for(var e=this.interactiveItems.length,f="inherit",h=!1,c=0;c<e;c++){var k=this.interactiveItems[c];k.__hit=this.hitTest(k,this.mouse);this.mouse.target=k;k.__hit&&!h?(k.buttonMode&&(f=k.defaultCursor),k.interactiveChildren||(h=!0),k.__isOver||(k.mouseover&&k.mouseover(this.mouse),k.__isOver=!0)):k.__isOver&&(k.mouseout&&k.mouseout(this.mouse),k.__isOver=
!1)}this.currentCursorStyle!==f&&(this.currentCursorStyle=f,this.interactionDOMElement.style.cursor=f)}}};d.InteractionManager.prototype.onMouseMove=function(c){this.mouse.originalEvent=c||window.event;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=this.target.width/e.width*(c.clientX-e.left);this.mouse.global.y=this.target.height/e.height*(c.clientY-e.top);c=this.interactiveItems.length;for(e=0;e<c;e++){var f=this.interactiveItems[e];f.mousemove&&f.mousemove(this.mouse)}};
d.InteractionManager.prototype.onMouseDown=function(c){this.mouse.originalEvent=c||window.event;d.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();c=this.interactiveItems.length;for(var e=0;e<c;e++){var f=this.interactiveItems[e];if(f.mousedown||f.click)if(f.__mouseIsDown=!0,f.__hit=this.hitTest(f,this.mouse),f.__hit&&(f.mousedown&&f.mousedown(this.mouse),f.__isDown=!0,!f.interactiveChildren))break}};d.InteractionManager.prototype.onMouseOut=function(){var c=this.interactiveItems.length;
this.interactionDOMElement.style.cursor="inherit";for(var e=0;e<c;e++){var f=this.interactiveItems[e];f.__isOver&&(this.mouse.target=f,f.mouseout&&f.mouseout(this.mouse),f.__isOver=!1)}this.mouseOut=!0;this.mouse.global.x=-1E4;this.mouse.global.y=-1E4};d.InteractionManager.prototype.onMouseUp=function(c){this.mouse.originalEvent=c||window.event;c=this.interactiveItems.length;for(var e=!1,f=0;f<c;f++){var d=this.interactiveItems[f];d.__hit=this.hitTest(d,this.mouse);d.__hit&&!e?(d.mouseup&&d.mouseup(this.mouse),
d.__isDown&&d.click&&d.click(this.mouse),d.interactiveChildren||(e=!0)):d.__isDown&&d.mouseupoutside&&d.mouseupoutside(this.mouse);d.__isDown=!1}};d.InteractionManager.prototype.hitTest=function(c,e){var f=e.global;if(!c.worldVisible)return!1;var h=c instanceof d.Sprite,k=c.worldTransform,l=k.a,m=k.b,n=k.tx,p=k.c,q=k.d,k=k.ty,t=1/(l*q+m*-p),m=q*t*f.x+-m*t*f.y+(k*m-n*q)*t,f=l*t*f.y+-p*t*f.x+(-k*l+n*p)*t;e.target=c;if(c.hitArea&&c.hitArea.contains)return c.hitArea.contains(m,f)?(e.target=c,!0):!1;if(h&&
(l=c.texture.frame.width,h=c.texture.frame.height,n=-l*c.anchor.x,m>n&&m<n+l&&(m=-h*c.anchor.y,f>m&&f<m+h)))return e.target=c,!0;h=c.children.length;for(m=0;m<h;m++)if(this.hitTest(c.children[m],e))return e.target=c,!0;return!1};d.InteractionManager.prototype.onTouchMove=function(c){for(var e=this.interactionDOMElement.getBoundingClientRect(),f=c.changedTouches,d,k=0,k=0;k<f.length;k++){var l=f[k];d=this.touchs[l.identifier];d.originalEvent=c||window.event;d.global.x=this.target.width/e.width*(l.clientX-
e.left);d.global.y=this.target.height/e.height*(l.clientY-e.top);navigator.isCocoonJS&&(d.global.x=l.clientX,d.global.y=l.clientY);for(var m=0;m<this.interactiveItems.length;m++){var n=this.interactiveItems[m];n.touchmove&&n.__touchData[l.identifier]&&n.touchmove(d)}}};d.InteractionManager.prototype.onTouchStart=function(c){var e=this.interactionDOMElement.getBoundingClientRect();d.AUTO_PREVENT_DEFAULT&&c.preventDefault();for(var f=c.changedTouches,h=0;h<f.length;h++){var k=f[h],l=this.pool.pop();
l||(l=new d.InteractionData);l.originalEvent=c||window.event;this.touchs[k.identifier]=l;l.global.x=this.target.width/e.width*(k.clientX-e.left);l.global.y=this.target.height/e.height*(k.clientY-e.top);navigator.isCocoonJS&&(l.global.x=k.clientX,l.global.y=k.clientY);for(var m=this.interactiveItems.length,n=0;n<m;n++){var p=this.interactiveItems[n];if(p.touchstart||p.tap)if(p.__hit=this.hitTest(p,l),p.__hit&&(p.touchstart&&p.touchstart(l),p.__isDown=!0,p.__touchData=p.__touchData||{},p.__touchData[k.identifier]=
l,!p.interactiveChildren))break}}};d.InteractionManager.prototype.onTouchEnd=function(c){for(var e=this.interactionDOMElement.getBoundingClientRect(),d=c.changedTouches,h=0;h<d.length;h++){var k=d[h],l=this.touchs[k.identifier],m=!1;l.global.x=this.target.width/e.width*(k.clientX-e.left);l.global.y=this.target.height/e.height*(k.clientY-e.top);navigator.isCocoonJS&&(l.global.x=k.clientX,l.global.y=k.clientY);for(var n=this.interactiveItems.length,p=0;p<n;p++){var q=this.interactiveItems[p];if(q.__touchData&&
q.__touchData[k.identifier]){q.__hit=this.hitTest(q,q.__touchData[k.identifier]);l.originalEvent=c||window.event;if(q.touchend||q.tap)q.__hit&&!m?(q.touchend&&q.touchend(l),q.__isDown&&q.tap&&q.tap(l),q.interactiveChildren||(m=!0)):q.__isDown&&q.touchendoutside&&q.touchendoutside(l),q.__isDown=!1;q.__touchData[k.identifier]=null}}this.pool.push(l);this.touchs[k.identifier]=null}};d.Stage=function(c){d.DisplayObjectContainer.call(this);this.worldTransform=new d.Matrix;this.interactive=!0;this.interactionManager=
new d.InteractionManager(this);this.dirty=!0;this.stage=this;this.stage.hitArea=new d.Rectangle(0,0,1E5,1E5);this.setBackgroundColor(c)};d.Stage.prototype=Object.create(d.DisplayObjectContainer.prototype);d.Stage.prototype.constructor=d.Stage;d.Stage.prototype.setInteractionDelegate=function(c){this.interactionManager.setTargetDomElement(c)};d.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var c=0,e=this.children.length;c<e;c++)this.children[c].updateTransform();this.dirty&&(this.dirty=
!1,this.interactionManager.dirty=!0);this.interactive&&this.interactionManager.update()};d.Stage.prototype.setBackgroundColor=function(c){this.backgroundColor=c||0;this.backgroundColorSplit=d.hex2rgb(this.backgroundColor);c=this.backgroundColor.toString(16);c="000000".substr(0,6-c.length)+c;this.backgroundColorString="#"+c};d.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};for(var L=0,K=["ms","moz","webkit","o"],H=0;H<K.length&&!window.requestAnimationFrame;++H)window.requestAnimationFrame=
window[K[H]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[K[H]+"CancelAnimationFrame"]||window[K[H]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c){var e=(new Date).getTime(),d=Math.max(0,16-(e-L)),h=window.setTimeout(function(){c(e+d)},d);L=e+d;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(c){clearTimeout(c)});window.requestAnimFrame=window.requestAnimationFrame;d.hex2rgb=function(c){return[(c>>16&
255)/255,(c>>8&255)/255,(c&255)/255]};d.rgb2hex=function(c){return(255*c[0]<<16)+(255*c[1]<<8)+255*c[2]};"function"!==typeof Function.prototype.bind&&(Function.prototype.bind=function(){var c=Array.prototype.slice;return function(e){function d(){var l=k.concat(c.call(arguments));h.apply(this instanceof d?this:e,l)}var h=this,k=c.call(arguments,1);if("function"!==typeof h)throw new TypeError;d.prototype=function m(c){c&&(m.prototype=c);if(!(this instanceof m))return new m}(h.prototype);return d}}());
d.AjaxRequest=function(){var c=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(window.ActiveXObject)for(var e=0;e<c.length;e++)try{return new window.ActiveXObject(c[e])}catch(d){}else return window.XMLHttpRequest?new window.XMLHttpRequest:!1};d.canUseNewCanvasBlendModes=function(){var c=document.createElement("canvas");c.width=1;c.height=1;c=c.getContext("2d");c.fillStyle="#000";c.fillRect(0,0,1,1);c.globalCompositeOperation="multiply";c.fillStyle="#fff";c.fillRect(0,0,1,1);return 0===
c.getImageData(0,0,1,1).data[0]};d.getNextPowerOfTwo=function(c){if(0<c&&0===(c&c-1))return c;for(var e=1;e<c;)e<<=1;return e};d.EventTarget=function(){var c={};this.addEventListener=this.on=function(e,d){void 0===c[e]&&(c[e]=[]);-1===c[e].indexOf(d)&&c[e].push(d)};this.dispatchEvent=this.emit=function(e){if(c[e.type]&&c[e.type].length)for(var d=0,h=c[e.type].length;d<h;d++)c[e.type][d](e)};this.removeEventListener=this.off=function(e,d){var h=c[e].indexOf(d);-1!==h&&c[e].splice(h,1)};this.removeAllEventListeners=
function(e){if(e=c[e])e.length=0}};d.autoDetectRenderer=function(c,e,f,h,k){c||(c=800);e||(e=600);var l;try{var m=document.createElement("canvas");l=!!window.WebGLRenderingContext&&(m.getContext("webgl")||m.getContext("experimental-webgl"))}catch(n){l=!1}return l?new d.WebGLRenderer(c,e,f,h,k):new d.CanvasRenderer(c,e,f,h)};d.autoDetectRecommendedRenderer=function(c,e,f,h,k){c||(c=800);e||(e=600);var l;try{var m=document.createElement("canvas");l=!!window.WebGLRenderingContext&&(m.getContext("webgl")||
m.getContext("experimental-webgl"))}catch(n){l=!1}m=/Android/i.test(navigator.userAgent);return l&&!m?new d.WebGLRenderer(c,e,f,h,k):new d.CanvasRenderer(c,e,f,h)};d.PolyK={};d.PolyK.Triangulate=function(c){var e=!0,f=c.length>>1;if(3>f)return[];for(var h=[],k=[],l=0;l<f;l++)k.push(l);for(var l=0,m=f;3<m;){var n=k[(l+0)%m],p=k[(l+1)%m],q=k[(l+2)%m],t=c[2*n],s=c[2*n+1],u=c[2*p],v=c[2*p+1],w=c[2*q],x=c[2*q+1],B=!1;if(d.PolyK._convex(t,s,u,v,w,x,e))for(var B=!0,D=0;D<m;D++){var y=k[D];if(y!==n&&y!==
p&&y!==q&&d.PolyK._PointInTriangle(c[2*y],c[2*y+1],t,s,u,v,w,x)){B=!1;break}}if(B)h.push(n,p,q),k.splice((l+1)%m,1),m--,l=0;else if(l++>3*m)if(e){h=[];k=[];for(l=0;l<f;l++)k.push(l);l=0;m=f;e=!1}else return window.console.log("PIXI Warning: shape too complex to fill"),[]}h.push(k[0],k[1],k[2]);return h};d.PolyK._PointInTriangle=function(c,e,d,h,k,l,m,n){m-=d;n-=h;k-=d;l-=h;c-=d;d=e-h;e=m*m+n*n;h=m*k+n*l;m=m*c+n*d;n=k*k+l*l;k=k*c+l*d;l=1/(e*n-h*h);n=(n*m-h*k)*l;m=(e*k-h*m)*l;return 0<=n&&0<=m&&1>n+
m};d.PolyK._convex=function(c,e,d,h,k,l,m){return 0<=(e-h)*(k-d)+(d-c)*(l-h)===m};d.initDefaultShaders=function(){};d.CompileVertexShader=function(c,e){return d._CompileShader(c,e,c.VERTEX_SHADER)};d.CompileFragmentShader=function(c,e){return d._CompileShader(c,e,c.FRAGMENT_SHADER)};d._CompileShader=function(c,e,d){e=e.join("\n");d=c.createShader(d);c.shaderSource(d,e);c.compileShader(d);return c.getShaderParameter(d,c.COMPILE_STATUS)?d:(window.console.log(c.getShaderInfoLog(d)),null)};d.compileProgram=
function(c,e,f){f=d.CompileFragmentShader(c,f);e=d.CompileVertexShader(c,e);var h=c.createProgram();c.attachShader(h,e);c.attachShader(h,f);c.linkProgram(h);c.getProgramParameter(h,c.LINK_STATUS)||window.console.log("Could not initialise shaders");return h};d.PixiShader=function(c){this.gl=c;this.program=null;this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;",
"}"];this.textureCount=0;this.attributes=[];this.init()};d.PixiShader.prototype.init=function(){var c=this.gl,e=d.compileProgram(c,this.vertexSrc||d.PixiShader.defaultVertexSrc,this.fragmentSrc);c.useProgram(e);this.uSampler=c.getUniformLocation(e,"uSampler");this.projectionVector=c.getUniformLocation(e,"projectionVector");this.offsetVector=c.getUniformLocation(e,"offsetVector");this.dimensions=c.getUniformLocation(e,"dimensions");this.aVertexPosition=c.getAttribLocation(e,"aVertexPosition");this.aTextureCoord=
c.getAttribLocation(e,"aTextureCoord");this.colorAttribute=c.getAttribLocation(e,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var f in this.uniforms)this.uniforms[f].uniformLocation=c.getUniformLocation(e,f);this.initUniforms();this.program=e};d.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var c=this.gl,e,d;for(d in this.uniforms){e=this.uniforms[d];var h=e.type;"sampler2D"===h?(e._init=
!1,null!==e.value&&this.initSampler2D(e)):"mat2"===h||"mat3"===h||"mat4"===h?(e.glMatrix=!0,e.glValueLength=1,"mat2"===h?e.glFunc=c.uniformMatrix2fv:"mat3"===h?e.glFunc=c.uniformMatrix3fv:"mat4"===h&&(e.glFunc=c.uniformMatrix4fv)):(e.glFunc=c["uniform"+h],e.glValueLength="2f"===h||"2i"===h?2:"3f"===h||"3i"===h?3:"4f"===h||"4i"===h?4:1)}};d.PixiShader.prototype.initSampler2D=function(c){if(c.value&&c.value.baseTexture&&c.value.baseTexture.hasLoaded){var e=this.gl;e.activeTexture(e["TEXTURE"+this.textureCount]);
e.bindTexture(e.TEXTURE_2D,c.value.baseTexture._glTextures[e.id]);if(c.textureData){var d=c.textureData,h=d.magFilter?d.magFilter:e.LINEAR,k=d.minFilter?d.minFilter:e.LINEAR,l=d.wrapS?d.wrapS:e.CLAMP_TO_EDGE,m=d.wrapT?d.wrapT:e.CLAMP_TO_EDGE,n=d.luminance?e.LUMINANCE:e.RGBA;d.repeat&&(m=l=e.REPEAT);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!d.flipY);d.width?e.texImage2D(e.TEXTURE_2D,0,n,d.width?d.width:512,d.height?d.height:2,d.border?d.border:0,n,e.UNSIGNED_BYTE,null):e.texImage2D(e.TEXTURE_2D,0,n,e.RGBA,
e.UNSIGNED_BYTE,c.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,h);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,k);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,l);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,m)}e.uniform1i(c.uniformLocation,this.textureCount);c._init=!0;this.textureCount++}};d.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var c,e=this.gl,f;for(f in this.uniforms)c=this.uniforms[f],1===c.glValueLength?!0===c.glMatrix?c.glFunc.call(e,
c.uniformLocation,c.transpose,c.value):c.glFunc.call(e,c.uniformLocation,c.value):2===c.glValueLength?c.glFunc.call(e,c.uniformLocation,c.value.x,c.value.y):3===c.glValueLength?c.glFunc.call(e,c.uniformLocation,c.value.x,c.value.y,c.value.z):4===c.glValueLength?c.glFunc.call(e,c.uniformLocation,c.value.x,c.value.y,c.value.z,c.value.w):"sampler2D"===c.type&&(c._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,c.value.baseTexture._glTextures[e.id]||d.createWebGLTexture(c.value.baseTexture,
e)),e.uniform1i(c.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(c))};d.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attributes=this.gl=this.uniforms=null};d.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {",
"   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"];d.PixiFastShader=function(c){this.gl=c;this.program=null;this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;",
"}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);",
"   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"];this.textureCount=0;this.init()};d.PixiFastShader.prototype.init=function(){var c=this.gl,e=d.compileProgram(c,this.vertexSrc,this.fragmentSrc);c.useProgram(e);this.uSampler=c.getUniformLocation(e,"uSampler");this.projectionVector=c.getUniformLocation(e,
"projectionVector");this.offsetVector=c.getUniformLocation(e,"offsetVector");this.dimensions=c.getUniformLocation(e,"dimensions");this.uMatrix=c.getUniformLocation(e,"uMatrix");this.aVertexPosition=c.getAttribLocation(e,"aVertexPosition");this.aPositionCoord=c.getAttribLocation(e,"aPositionCoord");this.aScale=c.getAttribLocation(e,"aScale");this.aRotation=c.getAttribLocation(e,"aRotation");this.aTextureCoord=c.getAttribLocation(e,"aTextureCoord");this.colorAttribute=c.getAttribLocation(e,"aColor");
-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute];this.program=e};d.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attributes=this.gl=this.uniforms=null};d.StripShader=function(){this.program=null;this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;",
"void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","   gl_FragColor = gl_FragColor * alpha;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","uniform vec2 offsetVector;","varying float vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","   v -= offsetVector.xyx;",
"   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"]};d.StripShader.prototype.init=function(){var c=d.gl,e=d.compileProgram(c,this.vertexSrc,this.fragmentSrc);c.useProgram(e);this.uSampler=c.getUniformLocation(e,"uSampler");this.projectionVector=c.getUniformLocation(e,"projectionVector");this.offsetVector=c.getUniformLocation(e,"offsetVector");this.colorAttribute=c.getAttribLocation(e,"aColor");
this.aVertexPosition=c.getAttribLocation(e,"aVertexPosition");this.aTextureCoord=c.getAttribLocation(e,"aTextureCoord");this.translationMatrix=c.getUniformLocation(e,"translationMatrix");this.alpha=c.getUniformLocation(e,"alpha");this.program=e};d.PrimitiveShader=function(c){this.gl=c;this.program=null;this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;",
"uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"];this.init()};d.PrimitiveShader.prototype.init=function(){var c=this.gl,e=d.compileProgram(c,this.vertexSrc,
this.fragmentSrc);c.useProgram(e);this.projectionVector=c.getUniformLocation(e,"projectionVector");this.offsetVector=c.getUniformLocation(e,"offsetVector");this.tintColor=c.getUniformLocation(e,"tint");this.aVertexPosition=c.getAttribLocation(e,"aVertexPosition");this.colorAttribute=c.getAttribLocation(e,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=c.getUniformLocation(e,"translationMatrix");this.alpha=c.getUniformLocation(e,"alpha");this.program=e};
d.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attribute=this.gl=this.uniforms=null};d.WebGLGraphics=function(){};d.WebGLGraphics.renderGraphics=function(c,e){var f=e.gl,h=e.projection,k=e.offset,l=e.shaderManager.primitiveShader;c._webGL[f.id]||(c._webGL[f.id]={points:[],indices:[],lastIndex:0,buffer:f.createBuffer(),indexBuffer:f.createBuffer()});var m=c._webGL[f.id];c.dirty&&(c.dirty=!1,c.clearDirty&&(c.clearDirty=!1,m.lastIndex=0,m.points=[],m.indices=
[]),d.WebGLGraphics.updateGraphics(c,f));e.shaderManager.activatePrimitiveShader();f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA);f.uniformMatrix3fv(l.translationMatrix,!1,c.worldTransform.toArray(!0));f.uniform2f(l.projectionVector,h.x,-h.y);f.uniform2f(l.offsetVector,-k.x,-k.y);f.uniform3fv(l.tintColor,d.hex2rgb(c.tint));f.uniform1f(l.alpha,c.worldAlpha);f.bindBuffer(f.ARRAY_BUFFER,m.buffer);f.vertexAttribPointer(l.aVertexPosition,2,f.FLOAT,!1,24,0);f.vertexAttribPointer(l.colorAttribute,4,f.FLOAT,!1,
24,8);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,m.indexBuffer);f.drawElements(f.TRIANGLE_STRIP,m.indices.length,f.UNSIGNED_SHORT,0);e.shaderManager.deactivatePrimitiveShader()};d.WebGLGraphics.updateGraphics=function(c,e){for(var f=c._webGL[e.id],h=f.lastIndex;h<c.graphicsData.length;h++){var k=c.graphicsData[h];k.type===d.Graphics.POLY?(k.fill&&3<k.points.length&&d.WebGLGraphics.buildPoly(k,f),0<k.lineWidth&&d.WebGLGraphics.buildLine(k,f)):k.type===d.Graphics.RECT?d.WebGLGraphics.buildRectangle(k,f):k.type!==
d.Graphics.CIRC&&k.type!==d.Graphics.ELIP||d.WebGLGraphics.buildCircle(k,f)}f.lastIndex=c.graphicsData.length;f.glPoints=new Float32Array(f.points);e.bindBuffer(e.ARRAY_BUFFER,f.buffer);e.bufferData(e.ARRAY_BUFFER,f.glPoints,e.STATIC_DRAW);f.glIndicies=new Uint16Array(f.indices);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,f.indexBuffer);e.bufferData(e.ELEMENT_ARRAY_BUFFER,f.glIndicies,e.STATIC_DRAW)};d.WebGLGraphics.buildRectangle=function(c,e){var f=c.points,h=f[0],k=f[1],l=f[2],f=f[3];if(c.fill){var m=
d.hex2rgb(c.fillColor),n=c.fillAlpha,p=m[0]*n,q=m[1]*n,m=m[2]*n,t=e.points,s=e.indices,u=t.length/6;t.push(h,k);t.push(p,q,m,n);t.push(h+l,k);t.push(p,q,m,n);t.push(h,k+f);t.push(p,q,m,n);t.push(h+l,k+f);t.push(p,q,m,n);s.push(u,u,u+1,u+2,u+3,u+3)}c.lineWidth&&(n=c.points,c.points=[h,k,h+l,k,h+l,k+f,h,k+f,h,k],d.WebGLGraphics.buildLine(c,e),c.points=n)};d.WebGLGraphics.buildCircle=function(c,e){var f=c.points,h=f[0],k=f[1],l=f[2],f=f[3],m=2*Math.PI/40,n=0;if(c.fill){var n=d.hex2rgb(c.fillColor),p=
c.fillAlpha,q=n[0]*p,t=n[1]*p,s=n[2]*p,u=e.points,v=e.indices,w=u.length/6;v.push(w);for(n=0;41>n;n++)u.push(h,k,q,t,s,p),u.push(h+Math.sin(m*n)*l,k+Math.cos(m*n)*f,q,t,s,p),v.push(w++,w++);v.push(w-1)}if(c.lineWidth){p=c.points;c.points=[];for(n=0;41>n;n++)c.points.push(h+Math.sin(m*n)*l,k+Math.cos(m*n)*f);d.WebGLGraphics.buildLine(c,e);c.points=p}};d.WebGLGraphics.buildLine=function(c,e){var f=0,h=c.points;if(0!==h.length){if(c.lineWidth%2)for(f=0;f<h.length;f++)h[f]+=.5;var k=new d.Point(h[0],
h[1]),l=new d.Point(h[h.length-2],h[h.length-1]);if(k.x===l.x&&k.y===l.y){h.pop();h.pop();var l=new d.Point(h[h.length-2],h[h.length-1]),m=l.x+.5*(k.x-l.x),k=l.y+.5*(k.y-l.y);h.unshift(m,k);h.push(m,k)}var m=e.points,k=e.indices,l=h.length/2,n=h.length,p=m.length/6,q=c.lineWidth/2,f=d.hex2rgb(c.lineColor),t=c.lineAlpha,s=f[0]*t,u=f[1]*t,v=f[2]*t,w,x,B,D,y,E,I,J,z,A,F,G,H;B=h[0];D=h[1];y=h[2];E=h[3];z=-(D-E);A=B-y;x=Math.sqrt(z*z+A*A);z=z/x*q;A=A/x*q;m.push(B-z,D-A,s,u,v,t);m.push(B+z,D+A,s,u,v,t);
for(f=1;f<l-1;f++)B=h[2*(f-1)],D=h[2*(f-1)+1],y=h[2*f],E=h[2*f+1],I=h[2*(f+1)],J=h[2*(f+1)+1],z=-(D-E),A=B-y,x=Math.sqrt(z*z+A*A),z/=x,A/=x,z*=q,A*=q,F=-(E-J),G=y-I,x=Math.sqrt(F*F+G*G),F/=x,G/=x,F*=q,G*=q,x=-A+D-(-A+E),w=-z+y-(-z+B),B=(-z+B)*(-A+E)-(-z+y)*(-A+D),D=-G+J-(-G+E),H=-F+y-(-F+I),I=(-F+I)*(-G+E)-(-F+y)*(-G+J),J=x*H-D*w,.1>Math.abs(J)?(m.push(y-z,E-A,s,u,v,t),m.push(y+z,E+A,s,u,v,t)):(w=(w*I-H*B)/J,x=(D*B-x*I)/J,I=(w-y)*(w-y)+(x-E)+(x-E),19600<I?(z-=F,A-=G,x=Math.sqrt(z*z+A*A),z/=x,A/=x,
z*=q,A*=q,m.push(y-z,E-A),m.push(s,u,v,t),m.push(y+z,E+A),m.push(s,u,v,t),m.push(y-z,E-A),m.push(s,u,v,t),n++):(m.push(w,x),m.push(s,u,v,t),m.push(y-(w-y),E-(x-E)),m.push(s,u,v,t)));B=h[2*(l-2)];D=h[2*(l-2)+1];y=h[2*(l-1)];E=h[2*(l-1)+1];z=-(D-E);A=B-y;x=Math.sqrt(z*z+A*A);z/=x;A/=x;z*=q;A*=q;m.push(y-z,E-A);m.push(s,u,v,t);m.push(y+z,E+A);m.push(s,u,v,t);k.push(p);for(f=0;f<n;f++)k.push(p++);k.push(p-1)}};d.WebGLGraphics.buildPoly=function(c,e){var f=c.points;if(!(6>f.length)){for(var h=e.points,
k=e.indices,l=f.length/2,m=d.hex2rgb(c.fillColor),n=c.fillAlpha,p=m[0]*n,q=m[1]*n,m=m[2]*n,t=d.PolyK.Triangulate(f),s=h.length/6,u=0,u=0;u<t.length;u+=3)k.push(t[u]+s),k.push(t[u]+s),k.push(t[u+1]+s),k.push(t[u+2]+s),k.push(t[u+2]+s);for(u=0;u<l;u++)h.push(f[2*u],f[2*u+1],p,q,m,n)}};d.glContexts=[];d.WebGLRenderer=function(c,e,f,h,k){d.defaultRenderer||(d.defaultRenderer=this);this.type=d.WEBGL_RENDERER;this.transparent=!!h;this.width=c||800;this.height=e||600;this.view=f||document.createElement("canvas");
this.view.width=this.width;this.view.height=this.height;this.contextLost=this.handleContextLost.bind(this);this.contextRestoredLost=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.contextLost,!1);this.view.addEventListener("webglcontextrestored",this.contextRestoredLost,!1);this.options={alpha:this.transparent,antialias:!!k,premultipliedAlpha:!!h,stencil:!0};try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(l){try{this.gl=this.view.getContext("webgl",
this.options)}catch(m){throw Error(" This browser does not support webGL. Try using the canvas renderer"+this);}}c=this.gl;this.glContextId=c.id=d.WebGLRenderer.glContextId++;d.glContexts[this.glContextId]=c;d.blendModesWebGL||(d.blendModesWebGL=[],d.blendModesWebGL[d.blendModes.NORMAL]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.ADD]=[c.SRC_ALPHA,c.DST_ALPHA],d.blendModesWebGL[d.blendModes.MULTIPLY]=[c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SCREEN]=[c.SRC_ALPHA,
c.ONE],d.blendModesWebGL[d.blendModes.OVERLAY]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.DARKEN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.LIGHTEN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR_DODGE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR_BURN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.HARD_LIGHT]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SOFT_LIGHT]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],
d.blendModesWebGL[d.blendModes.DIFFERENCE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.EXCLUSION]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.HUE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SATURATION]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.LUMINOSITY]=[c.ONE,c.ONE_MINUS_SRC_ALPHA]);this.projection=new d.Point;this.projection.x=this.width/2;this.projection.y=
-this.height/2;this.offset=new d.Point(0,0);this.resize(this.width,this.height);this.contextLost=!1;this.shaderManager=new d.WebGLShaderManager(c);this.spriteBatch=new d.WebGLSpriteBatch(c);this.maskManager=new d.WebGLMaskManager(c);this.filterManager=new d.WebGLFilterManager(c,this.transparent);this.renderSession={};this.renderSession.gl=this.gl;this.renderSession.drawCount=0;this.renderSession.shaderManager=this.shaderManager;this.renderSession.maskManager=this.maskManager;this.renderSession.filterManager=
this.filterManager;this.renderSession.spriteBatch=this.spriteBatch;this.renderSession.renderer=this;c.useProgram(this.shaderManager.defaultShader.program);c.disable(c.DEPTH_TEST);c.disable(c.CULL_FACE);c.enable(c.BLEND);c.colorMask(!0,!0,!0,this.transparent)};d.WebGLRenderer.prototype.constructor=d.WebGLRenderer;d.WebGLRenderer.prototype.render=function(c){if(!this.contextLost){this.__stage!==c&&(c.interactive&&c.interactionManager.removeEvents(),this.__stage=c);d.WebGLRenderer.updateTextures();c.updateTransform();
c._interactive&&!c._interactiveEventsAdded&&(c._interactiveEventsAdded=!0,c.interactionManager.setTarget(this));var e=this.gl;e.viewport(0,0,this.width,this.height);e.bindFramebuffer(e.FRAMEBUFFER,null);this.transparent?e.clearColor(0,0,0,0):e.clearColor(c.backgroundColorSplit[0],c.backgroundColorSplit[1],c.backgroundColorSplit[2],1);e.clear(e.COLOR_BUFFER_BIT);this.renderDisplayObject(c,this.projection);c.interactive?c._interactiveEventsAdded||(c._interactiveEventsAdded=!0,c.interactionManager.setTarget(this)):
c._interactiveEventsAdded&&(c._interactiveEventsAdded=!1,c.interactionManager.setTarget(this))}};d.WebGLRenderer.prototype.renderDisplayObject=function(c,e,d){this.renderSession.drawCount=0;this.renderSession.currentBlendMode=9999;this.renderSession.projection=e;this.renderSession.offset=this.offset;this.spriteBatch.begin(this.renderSession);this.filterManager.begin(this.renderSession,d);c._renderWebGL(this.renderSession);this.spriteBatch.end()};d.WebGLRenderer.updateTextures=function(){for(var c=
0,c=0;c<d.Texture.frameUpdates.length;c++)d.WebGLRenderer.updateTextureFrame(d.Texture.frameUpdates[c]);for(c=0;c<d.texturesToDestroy.length;c++)d.WebGLRenderer.destroyTexture(d.texturesToDestroy[c]);d.texturesToUpdate.length=0;d.texturesToDestroy.length=0;d.Texture.frameUpdates.length=0};d.WebGLRenderer.destroyTexture=function(c){for(var e=c._glTextures.length-1;0<=e;e--){var f=c._glTextures[e],h=d.glContexts[e];h&&f&&h.deleteTexture(f)}c._glTextures.length=0};d.WebGLRenderer.updateTextureFrame=
function(c){c.updateFrame=!1;c._updateWebGLuvs()};d.WebGLRenderer.prototype.resize=function(c,e){this.width=c;this.height=e;this.view.width=c;this.view.height=e;this.gl.viewport(0,0,this.width,this.height);this.projection.x=this.width/2;this.projection.y=-this.height/2};d.createWebGLTexture=function(c,e){c.hasLoaded&&(c._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,c._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,
c.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,c.scaleMode===d.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,c.scaleMode===d.scaleModes.LINEAR?e.LINEAR:e.NEAREST),c._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null));
return c._glTextures[e.id]};d.updateWebGLTexture=function(c,e){c._glTextures[e.id]&&(e.bindTexture(e.TEXTURE_2D,c._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,c.scaleMode===d.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,c.scaleMode===d.scaleModes.LINEAR?e.LINEAR:e.NEAREST),c._powerOf2?(e.texParameteri(e.TEXTURE_2D,
e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null))};d.WebGLRenderer.prototype.handleContextLost=function(c){c.preventDefault();this.contextLost=!0};d.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(c){try{this.gl=this.view.getContext("webgl",
this.options)}catch(e){throw Error(" This browser does not support webGL. Try using the canvas renderer"+this);}}var f=this.gl;f.id=d.WebGLRenderer.glContextId++;this.shaderManager.setContext(f);this.spriteBatch.setContext(f);this.maskManager.setContext(f);this.filterManager.setContext(f);this.renderSession.gl=this.gl;f.disable(f.DEPTH_TEST);f.disable(f.CULL_FACE);f.enable(f.BLEND);f.colorMask(!0,!0,!0,this.transparent);this.gl.viewport(0,0,this.width,this.height);for(var h in d.TextureCache)d.TextureCache[h].baseTexture._glTextures=
[];this.contextLost=!1};d.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLost);this.view.removeEventListener("webglcontextrestored",this.contextRestoredLost);this.offset=this.projection=d.glContexts[this.glContextId]=null;this.shaderManager.destroy();this.spriteBatch.destroy();this.maskManager.destroy();this.filterManager.destroy();this.renderSession=this.gl=this.filterManager=this.maskManager=this.spriteBatch=this.shaderManager=null};d.WebGLRenderer.glContextId=
0;d.WebGLMaskManager=function(c){this.maskStack=[];this.maskPosition=0;this.setContext(c)};d.WebGLMaskManager.prototype.setContext=function(c){this.gl=c};d.WebGLMaskManager.prototype.pushMask=function(c,e){var f=this.gl;0===this.maskStack.length&&(f.enable(f.STENCIL_TEST),f.stencilFunc(f.ALWAYS,1,1));this.maskStack.push(c);f.colorMask(!1,!1,!1,!1);f.stencilOp(f.KEEP,f.KEEP,f.INCR);d.WebGLGraphics.renderGraphics(c,e);f.colorMask(!0,!0,!0,!0);f.stencilFunc(f.NOTEQUAL,0,this.maskStack.length);f.stencilOp(f.KEEP,
f.KEEP,f.KEEP)};d.WebGLMaskManager.prototype.popMask=function(c){var e=this.gl,f=this.maskStack.pop();f&&(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),d.WebGLGraphics.renderGraphics(f,c),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,this.maskStack.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP));0===this.maskStack.length&&e.disable(e.STENCIL_TEST)};d.WebGLMaskManager.prototype.destroy=function(){this.gl=this.maskStack=null};d.WebGLShaderManager=function(c){this.maxAttibs=10;this.attribState=
[];this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(c)};d.WebGLShaderManager.prototype.setContext=function(c){this.gl=c;this.primitiveShader=new d.PrimitiveShader(c);this.defaultShader=new d.PixiShader(c);this.fastShader=new d.PixiFastShader(c);this.activateShader(this.defaultShader)};d.WebGLShaderManager.prototype.setAttribs=function(c){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<c.length;e++)this.tempAttribState[c[e]]=
!0;c=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?c.enableVertexAttribArray(e):c.disableVertexAttribArray(e))};d.WebGLShaderManager.prototype.activateShader=function(c){this.currentShader=c;this.gl.useProgram(c.program);this.setAttribs(c.attributes)};d.WebGLShaderManager.prototype.activatePrimitiveShader=function(){this.gl.useProgram(this.primitiveShader.program);this.setAttribs(this.primitiveShader.attributes)};
d.WebGLShaderManager.prototype.deactivatePrimitiveShader=function(){this.gl.useProgram(this.defaultShader.program);this.setAttribs(this.defaultShader.attributes)};d.WebGLShaderManager.prototype.destroy=function(){this.tempAttribState=this.attribState=null;this.primitiveShader.destroy();this.defaultShader.destroy();this.fastShader.destroy();this.gl=null};d.WebGLSpriteBatch=function(c){this.vertSize=6;this.size=2E3;var e=6*this.size;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=
new Uint16Array(e);for(var d=this.lastIndexCount=0,h=0;d<e;d+=6,h+=4)this.indices[d+0]=h+0,this.indices[d+1]=h+1,this.indices[d+2]=h+2,this.indices[d+3]=h+0,this.indices[d+4]=h+2,this.indices[d+5]=h+3;this.drawing=!1;this.currentBatchSize=0;this.currentBaseTexture=null;this.setContext(c)};d.WebGLSpriteBatch.prototype.setContext=function(c){this.gl=c;this.vertexBuffer=c.createBuffer();this.indexBuffer=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,
this.indices,c.STATIC_DRAW);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bufferData(c.ARRAY_BUFFER,this.vertices,c.DYNAMIC_DRAW);this.currentBlendMode=99999};d.WebGLSpriteBatch.prototype.begin=function(c){this.renderSession=c;this.shader=this.renderSession.shaderManager.defaultShader;this.start()};d.WebGLSpriteBatch.prototype.end=function(){this.flush()};d.WebGLSpriteBatch.prototype.render=function(c){var e=c.texture;if(e.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)this.flush(),
this.currentBaseTexture=e.baseTexture;c.blendMode!==this.currentBlendMode&&this.setBlendMode(c.blendMode);var d=c._uvs||c.texture._uvs;if(d){var h=c.worldAlpha,k=c.tint,l=this.vertices,m=c.anchor.x,n=c.anchor.y,p,q;c.texture.trim?(q=c.texture.trim,m=q.x-m*q.width,p=m+e.frame.width,n=q.y-n*q.height,q=n+e.frame.height):(p=e.frame.width*(1-m),m=e.frame.width*-m,q=e.frame.height*(1-n),n=e.frame.height*-n);var e=4*this.currentBatchSize*this.vertSize,t=c.worldTransform;c=t.a;var s=t.c,u=t.b,v=t.d,w=t.tx,
t=t.ty;l[e++]=c*m+u*n+w;l[e++]=v*n+s*m+t;l[e++]=d.x0;l[e++]=d.y0;l[e++]=h;l[e++]=k;l[e++]=c*p+u*n+w;l[e++]=v*n+s*p+t;l[e++]=d.x1;l[e++]=d.y1;l[e++]=h;l[e++]=k;l[e++]=c*p+u*q+w;l[e++]=v*q+s*p+t;l[e++]=d.x2;l[e++]=d.y2;l[e++]=h;l[e++]=k;l[e++]=c*m+u*q+w;l[e++]=v*q+s*m+t;l[e++]=d.x3;l[e++]=d.y3;l[e++]=h;l[e++]=k;this.currentBatchSize++}};d.WebGLSpriteBatch.prototype.renderTilingSprite=function(c){var e=c.tilingTexture;if(e.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)this.flush(),
this.currentBaseTexture=e.baseTexture;c.blendMode!==this.currentBlendMode&&this.setBlendMode(c.blendMode);c._uvs||(c._uvs=new d.TextureUvs);var f=c._uvs;c.tilePosition.x%=e.baseTexture.width*c.tileScaleOffset.x;c.tilePosition.y%=e.baseTexture.height*c.tileScaleOffset.y;var h=c.tilePosition.x/(e.baseTexture.width*c.tileScaleOffset.x),k=c.tilePosition.y/(e.baseTexture.height*c.tileScaleOffset.y),l=c.width/e.baseTexture.width/(c.tileScale.x*c.tileScaleOffset.x),e=c.height/e.baseTexture.height/(c.tileScale.y*
c.tileScaleOffset.y);f.x0=0-h;f.y0=0-k;f.x1=1*l-h;f.y1=0-k;f.x2=1*l-h;f.y2=1*e-k;f.x3=0-h;f.y3=1*e-k;var h=c.worldAlpha,k=c.tint,l=this.vertices,m=c.width,n=c.height,p=c.anchor.x,q=c.anchor.y,e=m*(1-p),m=m*-p,p=n*(1-q),n=n*-q,q=4*this.currentBatchSize*this.vertSize,t=c.worldTransform;c=t.a;var s=t.c,u=t.b,v=t.d,w=t.tx,t=t.ty;l[q++]=c*m+u*n+w;l[q++]=v*n+s*m+t;l[q++]=f.x0;l[q++]=f.y0;l[q++]=h;l[q++]=k;l[q++]=c*e+u*n+w;l[q++]=v*n+s*e+t;l[q++]=f.x1;l[q++]=f.y1;l[q++]=h;l[q++]=k;l[q++]=c*e+u*p+w;l[q++]=
v*p+s*e+t;l[q++]=f.x2;l[q++]=f.y2;l[q++]=h;l[q++]=k;l[q++]=c*m+u*p+w;l[q++]=v*p+s*m+t;l[q++]=f.x3;l[q++]=f.y3;l[q++]=h;l[q++]=k;this.currentBatchSize++};d.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var c=this.gl;c.bindTexture(c.TEXTURE_2D,this.currentBaseTexture._glTextures[c.id]||d.createWebGLTexture(this.currentBaseTexture,c));if(this.currentBatchSize>.5*this.size)c.bufferSubData(c.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*
this.vertSize);c.bufferSubData(c.ARRAY_BUFFER,0,e)}c.drawElements(c.TRIANGLES,6*this.currentBatchSize,c.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderSession.drawCount++}};d.WebGLSpriteBatch.prototype.stop=function(){this.flush()};d.WebGLSpriteBatch.prototype.start=function(){var c=this.gl;c.activeTexture(c.TEXTURE0);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;c.uniform2f(this.shader.projectionVector,
e.x,e.y);e=4*this.vertSize;c.vertexAttribPointer(this.shader.aVertexPosition,2,c.FLOAT,!1,e,0);c.vertexAttribPointer(this.shader.aTextureCoord,2,c.FLOAT,!1,e,8);c.vertexAttribPointer(this.shader.colorAttribute,2,c.FLOAT,!1,e,16);this.currentBlendMode!==d.blendModes.NORMAL&&this.setBlendMode(d.blendModes.NORMAL)};d.WebGLSpriteBatch.prototype.setBlendMode=function(c){this.flush();this.currentBlendMode=c;c=d.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(c[0],c[1])};d.WebGLSpriteBatch.prototype.destroy=
function(){this.indices=this.vertices=null;this.gl.deleteBuffer(this.vertexBuffer);this.gl.deleteBuffer(this.indexBuffer);this.gl=this.currentBaseTexture=null};d.WebGLFastSpriteBatch=function(c){this.vertSize=10;this.size=this.maxSize=6E3;var e=6*this.maxSize;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(e);this.indexBuffer=this.vertexBuffer=null;for(var d=this.lastIndexCount=0,h=0;d<e;d+=6,h+=4)this.indices[d+0]=h+0,this.indices[d+1]=h+1,this.indices[d+2]=
h+2,this.indices[d+3]=h+0,this.indices[d+4]=h+2,this.indices[d+5]=h+3;this.drawing=!1;this.currentBatchSize=0;this.currentBaseTexture=null;this.currentBlendMode=0;this.matrix=this.shader=this.renderSession=null;this.setContext(c)};d.WebGLFastSpriteBatch.prototype.setContext=function(c){this.gl=c;this.vertexBuffer=c.createBuffer();this.indexBuffer=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.indices,c.STATIC_DRAW);c.bindBuffer(c.ARRAY_BUFFER,
this.vertexBuffer);c.bufferData(c.ARRAY_BUFFER,this.vertices,c.DYNAMIC_DRAW);this.currentBlendMode=99999};d.WebGLFastSpriteBatch.prototype.begin=function(c,e){this.renderSession=e;this.shader=this.renderSession.shaderManager.fastShader;this.matrix=c.worldTransform.toArray(!0);this.start()};d.WebGLFastSpriteBatch.prototype.end=function(){this.flush()};d.WebGLFastSpriteBatch.prototype.render=function(c){c=c.children;var e=c[0];if(e.texture._uvs){this.currentBaseTexture=e.texture.baseTexture;e.blendMode!==
this.currentBlendMode&&this.setBlendMode(e.blendMode);for(var e=0,d=c.length;e<d;e++)this.renderSprite(c[e]);this.flush()}};d.WebGLFastSpriteBatch.prototype.renderSprite=function(c){if(c.visible){if(c.texture.baseTexture!==this.currentBaseTexture&&(this.flush(),this.currentBaseTexture=c.texture.baseTexture,!c.texture._uvs))return;var e,d=this.vertices,h,k,l,m,n;e=c.texture._uvs;c.texture.trim?(l=c.texture.trim,k=l.x-c.anchor.x*l.width,h=k+c.texture.frame.width,m=l.y-c.anchor.y*l.height,l=m+c.texture.frame.height):
(h=c.texture.frame.width*(1-c.anchor.x),k=c.texture.frame.width*-c.anchor.x,l=c.texture.frame.height*(1-c.anchor.y),m=c.texture.frame.height*-c.anchor.y);n=4*this.currentBatchSize*this.vertSize;d[n++]=k;d[n++]=m;d[n++]=c.position.x;d[n++]=c.position.y;d[n++]=c.scale.x;d[n++]=c.scale.y;d[n++]=c.rotation;d[n++]=e.x0;d[n++]=e.y1;d[n++]=c.alpha;d[n++]=h;d[n++]=m;d[n++]=c.position.x;d[n++]=c.position.y;d[n++]=c.scale.x;d[n++]=c.scale.y;d[n++]=c.rotation;d[n++]=e.x1;d[n++]=e.y1;d[n++]=c.alpha;d[n++]=h;
d[n++]=l;d[n++]=c.position.x;d[n++]=c.position.y;d[n++]=c.scale.x;d[n++]=c.scale.y;d[n++]=c.rotation;d[n++]=e.x2;d[n++]=e.y2;d[n++]=c.alpha;d[n++]=k;d[n++]=l;d[n++]=c.position.x;d[n++]=c.position.y;d[n++]=c.scale.x;d[n++]=c.scale.y;d[n++]=c.rotation;d[n++]=e.x3;d[n++]=e.y3;d[n++]=c.alpha;this.currentBatchSize++;this.currentBatchSize>=this.size&&this.flush()}};d.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var c=this.gl;this.currentBaseTexture._glTextures[c.id]||d.createWebGLTexture(this.currentBaseTexture,
c);c.bindTexture(c.TEXTURE_2D,this.currentBaseTexture._glTextures[c.id]);if(this.currentBatchSize>.5*this.size)c.bufferSubData(c.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);c.bufferSubData(c.ARRAY_BUFFER,0,e)}c.drawElements(c.TRIANGLES,6*this.currentBatchSize,c.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderSession.drawCount++}};d.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()};d.WebGLFastSpriteBatch.prototype.start=function(){var c=
this.gl;c.activeTexture(c.TEXTURE0);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;c.uniform2f(this.shader.projectionVector,e.x,e.y);c.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);e=4*this.vertSize;c.vertexAttribPointer(this.shader.aVertexPosition,2,c.FLOAT,!1,e,0);c.vertexAttribPointer(this.shader.aPositionCoord,2,c.FLOAT,!1,e,8);c.vertexAttribPointer(this.shader.aScale,2,c.FLOAT,!1,e,16);c.vertexAttribPointer(this.shader.aRotation,
1,c.FLOAT,!1,e,24);c.vertexAttribPointer(this.shader.aTextureCoord,2,c.FLOAT,!1,e,28);c.vertexAttribPointer(this.shader.colorAttribute,1,c.FLOAT,!1,e,36);this.currentBlendMode!==d.blendModes.NORMAL&&this.setBlendMode(d.blendModes.NORMAL)};d.WebGLFastSpriteBatch.prototype.setBlendMode=function(c){this.flush();this.currentBlendMode=c;c=d.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(c[0],c[1])};d.WebGLFilterManager=function(c,e){this.transparent=e;this.filterStack=[];this.offsetY=this.offsetX=
0;this.setContext(c)};d.WebGLFilterManager.prototype.setContext=function(c){this.gl=c;this.texturePool=[];this.initShaderBuffers()};d.WebGLFilterManager.prototype.begin=function(c,e){this.renderSession=c;this.defaultShader=c.shaderManager.defaultShader;var d=this.renderSession.projection;this.width=2*d.x;this.height=2*-d.y;this.buffer=e};d.WebGLFilterManager.prototype.pushFilter=function(c){var e=this.gl,f=this.renderSession.projection,h=this.renderSession.offset;c._filterArea=c.target.filterArea||
c.target.getBounds();this.filterStack.push(c);var k=c.filterPasses[0];this.offsetX+=c._filterArea.x;this.offsetY+=c._filterArea.y;var l=this.texturePool.pop();l?l.resize(this.width,this.height):l=new d.FilterTexture(this.gl,this.width,this.height);e.bindTexture(e.TEXTURE_2D,l.texture);var m=c._filterArea,k=k.padding;m.x-=k;m.y-=k;m.width+=2*k;m.height+=2*k;0>m.x&&(m.x=0);m.width>this.width&&(m.width=this.width);0>m.y&&(m.y=0);m.height>this.height&&(m.height=this.height);e.bindFramebuffer(e.FRAMEBUFFER,
l.frameBuffer);e.viewport(0,0,m.width,m.height);f.x=m.width/2;f.y=-m.height/2;h.x=-m.x;h.y=-m.y;e.uniform2f(this.defaultShader.projectionVector,m.width/2,-m.height/2);e.uniform2f(this.defaultShader.offsetVector,-m.x,-m.y);e.colorMask(!0,!0,!0,!0);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);c._glFilterTexture=l};d.WebGLFilterManager.prototype.popFilter=function(){var c=this.gl,e=this.filterStack.pop(),f=e._filterArea,h=e._glFilterTexture,k=this.renderSession.projection,l=this.renderSession.offset;
if(1<e.filterPasses.length){c.viewport(0,0,f.width,f.height);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);this.vertexArray[0]=0;this.vertexArray[1]=f.height;this.vertexArray[2]=f.width;this.vertexArray[3]=f.height;this.vertexArray[4]=0;this.vertexArray[5]=0;this.vertexArray[6]=f.width;this.vertexArray[7]=0;c.bufferSubData(c.ARRAY_BUFFER,0,this.vertexArray);c.bindBuffer(c.ARRAY_BUFFER,this.uvBuffer);this.uvArray[2]=f.width/this.width;this.uvArray[5]=f.height/this.height;this.uvArray[6]=f.width/this.width;
this.uvArray[7]=f.height/this.height;c.bufferSubData(c.ARRAY_BUFFER,0,this.uvArray);var m=this.texturePool.pop();m||(m=new d.FilterTexture(this.gl,this.width,this.height));m.resize(this.width,this.height);c.bindFramebuffer(c.FRAMEBUFFER,m.frameBuffer);c.clear(c.COLOR_BUFFER_BIT);c.disable(c.BLEND);for(var n=0;n<e.filterPasses.length-1;n++){var p=e.filterPasses[n];c.bindFramebuffer(c.FRAMEBUFFER,m.frameBuffer);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,h.texture);this.applyFilterPass(p,
f,f.width,f.height);p=h;h=m;m=p}c.enable(c.BLEND);this.texturePool.push(m)}m=e.filterPasses[e.filterPasses.length-1];this.offsetX-=f.x;this.offsetY-=f.y;var n=this.width,p=this.height,q=0,t=0,s=this.buffer;0===this.filterStack.length?c.colorMask(!0,!0,!0,!0):(s=this.filterStack[this.filterStack.length-1],f=s._filterArea,n=f.width,p=f.height,q=f.x,t=f.y,s=s._glFilterTexture.frameBuffer);k.x=n/2;k.y=-p/2;l.x=q;l.y=t;f=e._filterArea;k=f.x-q;l=f.y-t;c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);this.vertexArray[0]=
k;this.vertexArray[1]=l+f.height;this.vertexArray[2]=k+f.width;this.vertexArray[3]=l+f.height;this.vertexArray[4]=k;this.vertexArray[5]=l;this.vertexArray[6]=k+f.width;this.vertexArray[7]=l;c.bufferSubData(c.ARRAY_BUFFER,0,this.vertexArray);c.bindBuffer(c.ARRAY_BUFFER,this.uvBuffer);this.uvArray[2]=f.width/this.width;this.uvArray[5]=f.height/this.height;this.uvArray[6]=f.width/this.width;this.uvArray[7]=f.height/this.height;c.bufferSubData(c.ARRAY_BUFFER,0,this.uvArray);c.viewport(0,0,n,p);c.bindFramebuffer(c.FRAMEBUFFER,
s);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,h.texture);this.applyFilterPass(m,f,n,p);c.useProgram(this.defaultShader.program);c.uniform2f(this.defaultShader.projectionVector,n/2,-p/2);c.uniform2f(this.defaultShader.offsetVector,-q,-t);this.texturePool.push(h);e._glFilterTexture=null};d.WebGLFilterManager.prototype.applyFilterPass=function(c,e,f,h){e=this.gl;var k=c.shaders[e.id];k||(k=new d.PixiShader(e),k.fragmentSrc=c.fragmentSrc,k.uniforms=c.uniforms,k.init(),c.shaders[e.id]=k);e.useProgram(k.program);
e.uniform2f(k.projectionVector,f/2,-h/2);e.uniform2f(k.offsetVector,0,0);c.uniforms.dimensions&&(c.uniforms.dimensions.value[0]=this.width,c.uniforms.dimensions.value[1]=this.height,c.uniforms.dimensions.value[2]=this.vertexArray[0],c.uniforms.dimensions.value[3]=this.vertexArray[5]);k.syncUniforms();e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer);e.vertexAttribPointer(k.aVertexPosition,2,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer);e.vertexAttribPointer(k.aTextureCoord,2,e.FLOAT,!1,
0,0);e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer);e.vertexAttribPointer(k.colorAttribute,2,e.FLOAT,!1,0,0);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0);this.renderSession.drawCount++};d.WebGLFilterManager.prototype.initShaderBuffers=function(){var c=this.gl;this.vertexBuffer=c.createBuffer();this.uvBuffer=c.createBuffer();this.colorBuffer=c.createBuffer();this.indexBuffer=c.createBuffer();this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]);
c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bufferData(c.ARRAY_BUFFER,this.vertexArray,c.STATIC_DRAW);this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]);c.bindBuffer(c.ARRAY_BUFFER,this.uvBuffer);c.bufferData(c.ARRAY_BUFFER,this.uvArray,c.STATIC_DRAW);this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]);c.bindBuffer(c.ARRAY_BUFFER,this.colorBuffer);c.bufferData(c.ARRAY_BUFFER,this.colorArray,c.STATIC_DRAW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2,1,3,2]),c.STATIC_DRAW)};d.WebGLFilterManager.prototype.destroy=function(){var c=this.gl;this.filterStack=null;for(var e=this.offsetY=this.offsetX=0;e<this.texturePool.length;e++)this.texturePool.destroy();this.texturePool=null;c.deleteBuffer(this.vertexBuffer);c.deleteBuffer(this.uvBuffer);c.deleteBuffer(this.colorBuffer);c.deleteBuffer(this.indexBuffer)};d.FilterTexture=function(c,e,f,h){this.gl=c;this.frameBuffer=c.createFramebuffer();this.texture=c.createTexture();h=h||d.scaleModes.DEFAULT;
c.bindTexture(c.TEXTURE_2D,this.texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,h===d.scaleModes.LINEAR?c.LINEAR:c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,h===d.scaleModes.LINEAR?c.LINEAR:c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindFramebuffer(c.FRAMEBUFFER,this.framebuffer);c.bindFramebuffer(c.FRAMEBUFFER,this.frameBuffer);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,
c.TEXTURE_2D,this.texture,0);this.renderBuffer=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,this.renderBuffer);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,this.renderBuffer);this.resize(e,f)};d.FilterTexture.prototype.clear=function(){var c=this.gl;c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT)};d.FilterTexture.prototype.resize=function(c,e){if(this.width!==c||this.height!==e){this.width=c;this.height=e;var d=this.gl;d.bindTexture(d.TEXTURE_2D,
this.texture);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,c,e,0,d.RGBA,d.UNSIGNED_BYTE,null);d.bindRenderbuffer(d.RENDERBUFFER,this.renderBuffer);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,c,e)}};d.FilterTexture.prototype.destroy=function(){var c=this.gl;c.deleteFramebuffer(this.frameBuffer);c.deleteTexture(this.texture);this.texture=this.frameBuffer=null};d.CanvasMaskManager=function(){};d.CanvasMaskManager.prototype.pushMask=function(c,e){e.save();var f=c.alpha,h=c.worldTransform;e.setTransform(h.a,
h.c,h.b,h.d,h.tx,h.ty);d.CanvasGraphics.renderGraphicsMask(c,e);e.clip();c.worldAlpha=f};d.CanvasMaskManager.prototype.popMask=function(c){c.restore()};d.CanvasTinter=function(){};d.CanvasTinter.getTintedTexture=function(c,e){var f=c.texture;e=d.CanvasTinter.roundColor(e);var h="#"+("00000"+(e|0).toString(16)).substr(-6);f.tintCache=f.tintCache||{};if(f.tintCache[h])return f.tintCache[h];var k=d.CanvasTinter.canvas||document.createElement("canvas");d.CanvasTinter.tintMethod(f,e,k);if(d.CanvasTinter.convertTintToImage){var l=
new Image;l.src=k.toDataURL();f.tintCache[h]=l}else f.tintCache[h]=k,d.CanvasTinter.canvas=null;return k};d.CanvasTinter.tintWithMultiply=function(c,e,d){var h=d.getContext("2d"),k=c.frame;d.width=k.width;d.height=k.height;h.fillStyle="#"+("00000"+(e|0).toString(16)).substr(-6);h.fillRect(0,0,k.width,k.height);h.globalCompositeOperation="multiply";h.drawImage(c.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height);h.globalCompositeOperation="destination-atop";h.drawImage(c.baseTexture.source,
k.x,k.y,k.width,k.height,0,0,k.width,k.height)};d.CanvasTinter.tintWithOverlay=function(c,e,d){var h=d.getContext("2d"),k=c.frame;d.width=k.width;d.height=k.height;h.globalCompositeOperation="copy";h.fillStyle="#"+("00000"+(e|0).toString(16)).substr(-6);h.fillRect(0,0,k.width,k.height);h.globalCompositeOperation="destination-atop";h.drawImage(c.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height)};d.CanvasTinter.tintWithPerPixel=function(c,e,f){var h=f.getContext("2d"),k=c.frame;f.width=
k.width;f.height=k.height;h.globalCompositeOperation="copy";h.drawImage(c.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height);f=d.hex2rgb(e);c=f[0];e=f[1];f=f[2];for(var k=h.getImageData(0,0,k.width,k.height),l=k.data,m=0;m<l.length;m+=4)l[m+0]*=c,l[m+1]*=e,l[m+2]*=f;h.putImageData(k,0,0)};d.CanvasTinter.roundColor=function(c){var e=d.CanvasTinter.cacheStepsPerColorChannel;c=d.hex2rgb(c);c[0]=Math.min(255,c[0]/e*e);c[1]=Math.min(255,c[1]/e*e);c[2]=Math.min(255,c[2]/e*e);return d.rgb2hex(c)};
d.CanvasTinter.cacheStepsPerColorChannel=8;d.CanvasTinter.convertTintToImage=!1;d.CanvasTinter.canUseMultiply=d.canUseNewCanvasBlendModes();d.CanvasTinter.tintMethod=d.CanvasTinter.canUseMultiply?d.CanvasTinter.tintWithMultiply:d.CanvasTinter.tintWithPerPixel;d.CanvasRenderer=function(c,e,f,h){d.defaultRenderer=d.defaultRenderer||this;this.type=d.CANVAS_RENDERER;this.clearBeforeRender=!0;this.roundPixels=!1;this.transparent=!!h;d.blendModesCanvas||(d.blendModesCanvas=[],d.canUseNewCanvasBlendModes()?
(d.blendModesCanvas[d.blendModes.NORMAL]="source-over",d.blendModesCanvas[d.blendModes.ADD]="lighter",d.blendModesCanvas[d.blendModes.MULTIPLY]="multiply",d.blendModesCanvas[d.blendModes.SCREEN]="screen",d.blendModesCanvas[d.blendModes.OVERLAY]="overlay",d.blendModesCanvas[d.blendModes.DARKEN]="darken",d.blendModesCanvas[d.blendModes.LIGHTEN]="lighten",d.blendModesCanvas[d.blendModes.COLOR_DODGE]="color-dodge",d.blendModesCanvas[d.blendModes.COLOR_BURN]="color-burn",d.blendModesCanvas[d.blendModes.HARD_LIGHT]=
"hard-light",d.blendModesCanvas[d.blendModes.SOFT_LIGHT]="soft-light",d.blendModesCanvas[d.blendModes.DIFFERENCE]="difference",d.blendModesCanvas[d.blendModes.EXCLUSION]="exclusion",d.blendModesCanvas[d.blendModes.HUE]="hue",d.blendModesCanvas[d.blendModes.SATURATION]="saturation",d.blendModesCanvas[d.blendModes.COLOR]="color",d.blendModesCanvas[d.blendModes.LUMINOSITY]="luminosity"):(d.blendModesCanvas[d.blendModes.NORMAL]="source-over",d.blendModesCanvas[d.blendModes.ADD]="lighter",d.blendModesCanvas[d.blendModes.MULTIPLY]=
"source-over",d.blendModesCanvas[d.blendModes.SCREEN]="source-over",d.blendModesCanvas[d.blendModes.OVERLAY]="source-over",d.blendModesCanvas[d.blendModes.DARKEN]="source-over",d.blendModesCanvas[d.blendModes.LIGHTEN]="source-over",d.blendModesCanvas[d.blendModes.COLOR_DODGE]="source-over",d.blendModesCanvas[d.blendModes.COLOR_BURN]="source-over",d.blendModesCanvas[d.blendModes.HARD_LIGHT]="source-over",d.blendModesCanvas[d.blendModes.SOFT_LIGHT]="source-over",d.blendModesCanvas[d.blendModes.DIFFERENCE]=
"source-over",d.blendModesCanvas[d.blendModes.EXCLUSION]="source-over",d.blendModesCanvas[d.blendModes.HUE]="source-over",d.blendModesCanvas[d.blendModes.SATURATION]="source-over",d.blendModesCanvas[d.blendModes.COLOR]="source-over",d.blendModesCanvas[d.blendModes.LUMINOSITY]="source-over"));this.width=c||800;this.height=e||600;this.view=f||document.createElement("canvas");this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=!0;this.view.width=this.width;this.view.height=
this.height;this.count=0;this.maskManager=new d.CanvasMaskManager;this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null};"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in
this.context&&(this.renderSession.smoothProperty="oImageSmoothingEnabled")};d.CanvasRenderer.prototype.constructor=d.CanvasRenderer;d.CanvasRenderer.prototype.render=function(c){d.texturesToUpdate.length=0;d.texturesToDestroy.length=0;c.updateTransform();this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=c.backgroundColorString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&
this.context.clearRect(0,0,this.width,this.height);this.renderDisplayObject(c);c.interactive&&!c._interactiveEventsAdded&&(c._interactiveEventsAdded=!0,c.interactionManager.setTarget(this));0<d.Texture.frameUpdates.length&&(d.Texture.frameUpdates.length=0)};d.CanvasRenderer.prototype.resize=function(c,e){this.width=c;this.height=e;this.view.width=c;this.view.height=e};d.CanvasRenderer.prototype.renderDisplayObject=function(c,e){this.renderSession.context=e||this.context;c._renderCanvas(this.renderSession)};
d.CanvasRenderer.prototype.renderStripFlat=function(c){var e=this.context;c=c.verticies;var d=c.length/2;this.count++;e.beginPath();for(var h=1;h<d-2;h++){var k=2*h,l=c[k+2],m=c[k+4],n=c[k+3],p=c[k+5];e.moveTo(c[k],c[k+1]);e.lineTo(l,n);e.lineTo(m,p)}e.fillStyle="#FF0000";e.fill();e.closePath()};d.CanvasRenderer.prototype.renderStrip=function(c){var e=this.context,d=c.verticies,h=c.uvs,k=d.length/2;this.count++;for(var l=1;l<k-2;l++){var m=2*l,n=d[m],p=d[m+2],q=d[m+4],t=d[m+1],s=d[m+3],u=d[m+5],v=
h[m]*c.texture.width,w=h[m+2]*c.texture.width,x=h[m+4]*c.texture.width,B=h[m+1]*c.texture.height,D=h[m+3]*c.texture.height,m=h[m+5]*c.texture.height;e.save();e.beginPath();e.moveTo(n,t);e.lineTo(p,s);e.lineTo(q,u);e.closePath();e.clip();var y=v*D+B*x+w*m-D*x-B*w-v*m;e.transform((n*D+B*q+p*m-D*q-B*p-n*m)/y,(t*D+B*u+s*m-D*u-B*s-t*m)/y,(v*p+n*x+w*q-p*x-n*w-v*q)/y,(v*s+t*x+w*u-s*x-t*w-v*u)/y,(v*D*q+B*p*x+n*w*m-n*D*x-B*w*q-v*p*m)/y,(v*D*u+B*s*x+t*w*m-t*D*x-B*w*u-v*s*m)/y);e.drawImage(c.texture.baseTexture.source,
0,0);e.restore()}};d.CanvasBuffer=function(c,e){this.width=c;this.height=e;this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=c;this.canvas.height=e};d.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};d.CanvasBuffer.prototype.resize=function(c,e){this.width=this.canvas.width=c;this.height=this.canvas.height=e};d.CanvasGraphics=function(){};d.CanvasGraphics.renderGraphics=function(c,e){for(var f=c.worldAlpha,
h=0;h<c.graphicsData.length;h++){var k=c.graphicsData[h],l=k.points;e.strokeStyle="#"+("00000"+(k.lineColor|0).toString(16)).substr(-6);e.lineWidth=k.lineWidth;if(k.type===d.Graphics.POLY){e.beginPath();e.moveTo(l[0],l[1]);for(var m=1;m<l.length/2;m++)e.lineTo(l[2*m],l[2*m+1]);l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&e.closePath();k.fill&&(e.globalAlpha=k.fillAlpha*f,e.fillStyle="#"+("00000"+(k.fillColor|0).toString(16)).substr(-6),e.fill());k.lineWidth&&(e.globalAlpha=k.lineAlpha*f,e.stroke())}else if(k.type===
d.Graphics.RECT){if(k.fillColor||0===k.fillColor)e.globalAlpha=k.fillAlpha*f,e.fillStyle="#"+("00000"+(k.fillColor|0).toString(16)).substr(-6),e.fillRect(l[0],l[1],l[2],l[3]);k.lineWidth&&(e.globalAlpha=k.lineAlpha*f,e.strokeRect(l[0],l[1],l[2],l[3]))}else if(k.type===d.Graphics.CIRC)e.beginPath(),e.arc(l[0],l[1],l[2],0,2*Math.PI),e.closePath(),k.fill&&(e.globalAlpha=k.fillAlpha*f,e.fillStyle="#"+("00000"+(k.fillColor|0).toString(16)).substr(-6),e.fill()),k.lineWidth&&(e.globalAlpha=k.lineAlpha*f,
e.stroke());else if(k.type===d.Graphics.ELIP){var n=k.points,p=2*n[2],m=2*n[3],l=n[0]-p/2,n=n[1]-m/2;e.beginPath();var q=p/2*.5522848,t=m/2*.5522848,s=l+p,u=n+m,p=l+p/2,m=n+m/2;e.moveTo(l,m);e.bezierCurveTo(l,m-t,p-q,n,p,n);e.bezierCurveTo(p+q,n,s,m-t,s,m);e.bezierCurveTo(s,m+t,p+q,u,p,u);e.bezierCurveTo(p-q,u,l,m+t,l,m);e.closePath();k.fill&&(e.globalAlpha=k.fillAlpha*f,e.fillStyle="#"+("00000"+(k.fillColor|0).toString(16)).substr(-6),e.fill());k.lineWidth&&(e.globalAlpha=k.lineAlpha*f,e.stroke())}}};
d.CanvasGraphics.renderGraphicsMask=function(c,e){var f=c.graphicsData.length;if(0!==f)for(1<f&&window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"),f=0;1>f;f++){var h=c.graphicsData[f],k=h.points;if(h.type===d.Graphics.POLY){e.beginPath();e.moveTo(k[0],k[1]);for(h=1;h<k.length/2;h++)e.lineTo(k[2*h],k[2*h+1]);k[0]===k[k.length-2]&&k[1]===k[k.length-1]&&e.closePath()}else if(h.type===d.Graphics.RECT)e.beginPath(),e.rect(k[0],k[1],k[2],k[3]),
e.closePath();else if(h.type===d.Graphics.CIRC)e.beginPath(),e.arc(k[0],k[1],k[2],0,2*Math.PI),e.closePath();else if(h.type===d.Graphics.ELIP){var l=h.points,m=2*l[2],h=2*l[3],k=l[0]-m/2,l=l[1]-h/2;e.beginPath();var n=m/2*.5522848,p=h/2*.5522848,q=k+m,s=l+h,m=k+m/2,h=l+h/2;e.moveTo(k,h);e.bezierCurveTo(k,h-p,m-n,l,m,l);e.bezierCurveTo(m+n,l,q,h-p,q,h);e.bezierCurveTo(q,h+p,m+n,s,m,s);e.bezierCurveTo(m-n,s,k,h+p,k,h);e.closePath()}}};d.Graphics=function(){d.DisplayObjectContainer.call(this);this.renderable=
!0;this.fillAlpha=1;this.lineWidth=0;this.lineColor="black";this.graphicsData=[];this.tint=16777215;this.blendMode=d.blendModes.NORMAL;this.currentPath={points:[]};this._webGL=[];this.isMask=!1;this.bounds=null;this.boundsPadding=10};d.Graphics.prototype=Object.create(d.DisplayObjectContainer.prototype);d.Graphics.prototype.constructor=d.Graphics;Object.defineProperty(d.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(c){(this._cacheAsBitmap=c)?this._generateCachedSprite():
(this.destroyCachedSprite(),this.dirty=!0)}});d.Graphics.prototype.lineStyle=function(c,e,f){this.currentPath.points.length||this.graphicsData.pop();this.lineWidth=c||0;this.lineColor=e||0;this.lineAlpha=3>arguments.length?1:f;this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:d.Graphics.POLY};this.graphicsData.push(this.currentPath);return this};d.Graphics.prototype.moveTo=
function(c,e){this.currentPath.points.length||this.graphicsData.pop();this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:d.Graphics.POLY};this.currentPath.points.push(c,e);this.graphicsData.push(this.currentPath);return this};d.Graphics.prototype.lineTo=function(c,e){this.currentPath.points.push(c,e);this.dirty=!0;return this};d.Graphics.prototype.beginFill=
function(c,e){this.filling=!0;this.fillColor=c||0;this.fillAlpha=2>arguments.length?1:e;return this};d.Graphics.prototype.endFill=function(){this.filling=!1;this.fillColor=null;this.fillAlpha=1;return this};d.Graphics.prototype.drawRect=function(c,e,f,h){this.currentPath.points.length||this.graphicsData.pop();this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[c,e,f,h],type:d.Graphics.RECT};
this.graphicsData.push(this.currentPath);this.dirty=!0;return this};d.Graphics.prototype.drawCircle=function(c,e,f){this.currentPath.points.length||this.graphicsData.pop();this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[c,e,f,f],type:d.Graphics.CIRC};this.graphicsData.push(this.currentPath);this.dirty=!0;return this};d.Graphics.prototype.drawEllipse=function(c,e,f,h){this.currentPath.points.length||
this.graphicsData.pop();this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[c,e,f,h],type:d.Graphics.ELIP};this.graphicsData.push(this.currentPath);this.dirty=!0;return this};d.Graphics.prototype.clear=function(){this.lineWidth=0;this.filling=!1;this.clearDirty=this.dirty=!0;this.graphicsData=[];this.bounds=null;return this};d.Graphics.prototype.generateTexture=function(){var c=this.getBounds(),
e=new d.CanvasBuffer(c.width,c.height),f=d.Texture.fromCanvas(e.canvas);e.context.translate(-c.x,-c.y);d.CanvasGraphics.renderGraphics(this,e.context);return f};d.Graphics.prototype._renderWebGL=function(c){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask)if(this._cacheAsBitmap)this.dirty&&(this._generateCachedSprite(),d.updateWebGLTexture(this._cachedSprite.texture.baseTexture,c.gl),this.dirty=!1),this._cachedSprite.alpha=this.alpha,d.Sprite.prototype._renderWebGL.call(this._cachedSprite,c);
else{c.spriteBatch.stop();this._mask&&c.maskManager.pushMask(this.mask,c);this._filters&&c.filterManager.pushFilter(this._filterBlock);if(this.blendMode!==c.spriteBatch.currentBlendMode){c.spriteBatch.currentBlendMode=this.blendMode;var e=d.blendModesWebGL[c.spriteBatch.currentBlendMode];c.spriteBatch.gl.blendFunc(e[0],e[1])}d.WebGLGraphics.renderGraphics(this,c);if(this.children.length){c.spriteBatch.start();for(var e=0,f=this.children.length;e<f;e++)this.children[e]._renderWebGL(c);c.spriteBatch.stop()}this._filters&&
c.filterManager.popFilter();this._mask&&c.maskManager.popMask(c);c.drawCount++;c.spriteBatch.start()}};d.Graphics.prototype._renderCanvas=function(c){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){var e=c.context,f=this.worldTransform;this.blendMode!==c.currentBlendMode&&(c.currentBlendMode=this.blendMode,e.globalCompositeOperation=d.blendModesCanvas[c.currentBlendMode]);e.setTransform(f.a,f.c,f.b,f.d,f.tx,f.ty);d.CanvasGraphics.renderGraphics(this,e);e=0;for(f=this.children.length;e<f;e++)this.children[e]._renderCanvas(c)}};
d.Graphics.prototype.getBounds=function(c){this.bounds||this.updateBounds();var e=this.bounds.x,d=this.bounds.width+this.bounds.x,h=this.bounds.y,k=this.bounds.height+this.bounds.y;c=c||this.worldTransform;var l=c.a,m=c.c,n=c.b,p=c.d,q=c.tx,s=c.ty,C=l*d+n*k+q,u=p*k+m*d+s;c=l*e+n*k+q;var k=p*k+m*e+s,v=l*e+n*h+q,e=p*h+m*e+s,l=l*d+n*h+q,d=p*h+m*d+s,h=C,m=u,C=c<C?c:C,C=v<C?v:C,C=l<C?l:C,u=k<u?k:u,u=e<u?e:u,u=d<u?d:u,h=c>h?c:h,h=v>h?v:h,m=k>m?k:m,m=e>m?e:m;c=this._bounds;c.x=C;c.width=(l>h?l:h)-C;c.y=
u;c.height=(d>m?d:m)-u;return c};d.Graphics.prototype.updateBounds=function(){for(var c=Infinity,e=-Infinity,f=Infinity,h=-Infinity,k,l,m,n,p,q=0;q<this.graphicsData.length;q++)if(k=this.graphicsData[q],l=k.type,p=k.lineWidth,k=k.points,l===d.Graphics.RECT)l=k[0]-p/2,m=k[1]-p/2,n=k[2]+p,p=k[3]+p,c=l<c?l:c,e=l+n>e?l+n:e,f=m<f?l:f,h=m+p>h?m+p:h;else if(l===d.Graphics.CIRC||l===d.Graphics.ELIP)l=k[0],m=k[1],n=k[2]+p/2,p=k[3]+p/2,c=l-n<c?l-n:c,e=l+n>e?l+n:e,f=m-p<f?m-p:f,h=m+p>h?m+p:h;else for(n=0;n<
k.length;n+=2)l=k[n],m=k[n+1],c=l-p<c?l-p:c,e=l+p>e?l+p:e,f=m-p<f?m-p:f,h=m+p>h?m+p:h;q=this.boundsPadding;this.bounds=new d.Rectangle(c-q,f-q,e-c+2*q,h-f+2*q)};d.Graphics.prototype._generateCachedSprite=function(){var c=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(c.width,c.height);else{var e=new d.CanvasBuffer(c.width,c.height),f=d.Texture.fromCanvas(e.canvas);this._cachedSprite=new d.Sprite(f);this._cachedSprite.buffer=e;this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=
-(c.x/c.width);this._cachedSprite.anchor.y=-(c.y/c.height);this._cachedSprite.buffer.context.translate(-c.x,-c.y);d.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context);this._cachedSprite.alpha=this.alpha};d.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0);this._cachedSprite=null};d.Graphics.POLY=0;d.Graphics.RECT=1;d.Graphics.CIRC=2;d.Graphics.ELIP=3;d.Strip=function(c,e,f){d.Sprite.call(this,c);this.width=e;this.height=f;this.texture=c;this.blendMode=
d.blendModes.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(h){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}c.baseTexture.hasLoaded?(this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0):(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",
this.onTextureUpdateBind));this.renderable=!0};d.Strip.prototype=Object.create(d.Sprite.prototype);d.Strip.prototype.constructor=d.Strip;d.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0};d.Rope=function(c,e){d.Strip.call(this,c);this.points=e;try{this.verticies=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length)}catch(f){this.verticies=Array(4*e.length),this.uvs=Array(4*e.length),this.colors=
Array(2*e.length),this.indices=Array(2*e.length)}this.refresh()};d.Rope.prototype=Object.create(d.Strip.prototype);d.Rope.prototype.constructor=d.Rope;d.Rope.prototype.refresh=function(){var c=this.points;if(!(1>c.length)){var e=this.uvs,d=this.indices,h=this.colors;this.count-=.2;e[0]=0;e[1]=1;e[2]=0;e[3]=1;h[0]=1;h[1]=1;d[0]=0;d[1]=1;for(var c=c.length,k,l,m=1;m<c;m++)k=4*m,l=m/(c-1),e[k]=l,e[k+1]=0,e[k+2]=l,e[k+3]=1,k=2*m,h[k]=1,h[k+1]=1,k=2*m,d[k]=k,d[k+1]=k+1}};d.Rope.prototype.updateTransform=
function(){var c=this.points;if(!(1>c.length)){var e=c[0],f,h=f=0;this.count-=.2;var k=this.verticies;k[0]=e.x+f;k[1]=e.y+h;k[2]=e.x-f;k[3]=e.y-h;for(var l=c.length,m,n,p,q=1;q<l;q++)m=c[q],n=4*q,f=q<c.length-1?c[q+1]:m,h=-(f.x-e.x),f=f.y-e.y,e=Math.sqrt(f*f+h*h),p=this.texture.height/2,f/=e,h/=e,f*=p,h*=p,k[n]=m.x+f,k[n+1]=m.y+h,k[n+2]=m.x-f,k[n+3]=m.y-h,e=m;d.DisplayObjectContainer.prototype.updateTransform.call(this)}};d.Rope.prototype.setTexture=function(c){this.texture=c;this.updateFrame=!0};
d.TilingSprite=function(c,e,f){d.Sprite.call(this,c);this.width=e||100;this.height=f||100;this.tileScale=new d.Point(1,1);this.tileScaleOffset=new d.Point(1,1);this.tilePosition=new d.Point(0,0);this.renderable=!0;this.tint=16777215;this.blendMode=d.blendModes.NORMAL};d.TilingSprite.prototype=Object.create(d.Sprite.prototype);d.TilingSprite.prototype.constructor=d.TilingSprite;Object.defineProperty(d.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(c){this._width=c}});
Object.defineProperty(d.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(c){this._height=c}});d.TilingSprite.prototype.onTextureUpdate=function(){this.updateFrame=!0};d.TilingSprite.prototype.setTexture=function(c){this.texture!==c&&(this.texture=c,this.refreshTexture=!0,this.cachedTint=16777215)};d.TilingSprite.prototype._renderWebGL=function(c){if(!1!==this.visible&&0!==this.alpha){var e,f;this.mask&&(c.spriteBatch.stop(),c.maskManager.pushMask(this.mask,c),c.spriteBatch.start());
this.filters&&(c.spriteBatch.flush(),c.filterManager.pushFilter(this._filterBlock));!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(d.updateWebGLTexture(this.tilingTexture.baseTexture,c.gl),this.tilingTexture.needsUpdate=!1)):c.spriteBatch.renderTilingSprite(this);e=0;for(f=this.children.length;e<f;e++)this.children[e]._renderWebGL(c);c.spriteBatch.stop();this.filters&&c.filterManager.popFilter();this.mask&&c.maskManager.popMask(c);
c.spriteBatch.start()}};d.TilingSprite.prototype._renderCanvas=function(c){if(!1!==this.visible&&0!==this.alpha){var e=c.context;this._mask&&c.maskManager.pushMask(this._mask,e);e.globalAlpha=this.worldAlpha;var f=this.worldTransform;e.setTransform(f.a,f.c,f.b,f.d,f.tx,f.ty);if(!this.__tilePattern||this.refreshTexture)if(this.generateTilingTexture(!1),this.tilingTexture)this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat");else return;this.blendMode!==c.currentBlendMode&&
(c.currentBlendMode=this.blendMode,e.globalCompositeOperation=d.blendModesCanvas[c.currentBlendMode]);e.beginPath();var f=this.tilePosition,h=this.tileScale;f.x%=this.tilingTexture.baseTexture.width;f.y%=this.tilingTexture.baseTexture.height;e.scale(h.x,h.y);e.translate(f.x,f.y);e.fillStyle=this.__tilePattern;e.fillRect(-f.x+this.anchor.x*-this._width,-f.y+this.anchor.y*-this._height,this._width/h.x,this._height/h.y);e.scale(1/h.x,1/h.y);e.translate(-f.x,-f.y);e.closePath();this._mask&&c.maskManager.popMask(c.context)}};
d.TilingSprite.prototype.getBounds=function(){var c=this._width,e=this._height,d=c*(1-this.anchor.x),h=c*-this.anchor.x,k=e*(1-this.anchor.y),l=e*-this.anchor.y,e=this.worldTransform,m=e.a,n=e.c,p=e.b,q=e.d,s=e.tx,C=e.ty,e=m*h+p*l+s,c=q*l+n*h+C,u=m*d+p*l+s,l=q*l+n*d+C,v=m*d+p*k+s,d=q*k+n*d+C,m=m*h+p*k+s,h=q*k+n*h+C,n=k=-Infinity,p=q=Infinity,q=e<q?e:q,q=u<q?u:q,q=v<q?v:q,q=m<q?m:q,p=c<p?c:p,p=l<p?l:p,p=d<p?d:p,p=h<p?h:p,k=e>k?e:k,k=u>k?u:k,k=v>k?v:k,n=c>n?c:n,n=l>n?l:n,n=d>n?d:n,e=this._bounds;e.x=
q;e.width=(m>k?m:k)-q;e.y=p;e.height=(h>n?h:n)-p;return this._currentBounds=e};d.TilingSprite.prototype.generateTilingTexture=function(c){var e=this.texture;if(e.baseTexture.hasLoaded){var f=e.baseTexture,h=e.frame,k,l,f=h.width!==f.width||h.height!==f.height,m=!1;c?(k=d.getNextPowerOfTwo(h.width),l=d.getNextPowerOfTwo(h.height),h.width!==k&&h.height!==l&&(m=!0)):f&&(k=h.width,l=h.height,m=!0);m?(this.tilingTexture&&this.tilingTexture.isTiling?(c=this.tilingTexture.canvasBuffer,c.resize(k,l),this.tilingTexture.baseTexture.width=
k,this.tilingTexture.baseTexture.height=l,this.tilingTexture.needsUpdate=!0):(c=new d.CanvasBuffer(k,l),this.tilingTexture=d.Texture.fromCanvas(c.canvas),this.tilingTexture.canvasBuffer=c,this.tilingTexture.isTiling=!0),c.context.drawImage(e.baseTexture.source,h.x,h.y,h.width,h.height,0,0,k,l),this.tileScaleOffset.x=h.width/k,this.tileScaleOffset.y=h.height/l):(this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=
e);this.refreshTexture=!1;this.tilingTexture.baseTexture._powerOf2=!0}};var s={BoneData:function(c,e){this.name=c;this.parent=e}};s.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1};s.SlotData=function(c,e){this.name=c;this.boneData=e};s.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null};s.Bone=function(c,e){this.data=c;this.parent=e;this.setToSetupPose()};s.Bone.yDown=!1;s.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,
worldScaleX:1,worldScaleY:1,updateWorldTransform:function(c,e){var d=this.parent;null!=d?(this.worldX=this.x*d.m00+this.y*d.m01+d.worldX,this.worldY=this.x*d.m10+this.y*d.m11+d.worldY,this.worldScaleX=d.worldScaleX*this.scaleX,this.worldScaleY=d.worldScaleY*this.scaleY,this.worldRotation=d.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var h=this.worldRotation*Math.PI/180,d=Math.cos(h),
h=Math.sin(h);this.m00=d*this.worldScaleX;this.m10=h*this.worldScaleX;this.m01=-h*this.worldScaleY;this.m11=d*this.worldScaleY;c&&(this.m00=-this.m00,this.m01=-this.m01);e&&(this.m10=-this.m10,this.m11=-this.m11);s.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var c=this.data;this.x=c.x;this.y=c.y;this.rotation=c.rotation;this.scaleX=c.scaleX;this.scaleY=c.scaleY}};s.Slot=function(c,e,d){this.data=c;this.skeleton=e;this.bone=d;this.setToSetupPose()};s.Slot.prototype=
{r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(c){this.attachment=c;this._attachmentTime=this.skeleton.time},setAttachmentTime:function(c){this._attachmentTime=this.skeleton.time-c},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var c=this.data;this.r=c.r;this.g=c.g;this.b=c.b;this.a=c.a;for(var e=this.skeleton.data.slots,d=0,h=e.length;d<h;d++)if(e[d]==c){this.setAttachment(c.attachmentName?this.skeleton.getAttachmentBySlotIndex(d,
c.attachmentName):null);break}}};s.Skin=function(c){this.name=c;this.attachments={}};s.Skin.prototype={addAttachment:function(c,e,d){this.attachments[c+":"+e]=d},getAttachment:function(c,e){return this.attachments[c+":"+e]},_attachAll:function(c,e){for(var d in e.attachments){var h=d.indexOf(":"),k=parseInt(d.substring(0,h),10),l=d.substring(h+1),h=c.slots[k];h.attachment&&h.attachment.name==l&&(k=this.getAttachment(k,l))&&h.setAttachment(k)}}};s.Animation=function(c,e,d){this.name=c;this.timelines=
e;this.duration=d};s.Animation.prototype={apply:function(c,e,d){d&&this.duration&&(e%=this.duration);d=this.timelines;for(var h=0,k=d.length;h<k;h++)d[h].apply(c,e,1)},mix:function(c,e,d,h){d&&this.duration&&(e%=this.duration);d=this.timelines;for(var k=0,l=d.length;k<l;k++)d[k].apply(c,e,h)}};s.binarySearch=function(c,e,d){var h=0,k=Math.floor(c.length/d)-2;if(!k)return d;for(var l=k>>>1;;){c[(l+1)*d]<=e?h=l+1:k=l;if(h==k)return(h+1)*d;l=h+k>>>1}};s.linearSearch=function(c,e,d){for(var h=0,k=c.length-
d;h<=k;h+=d)if(c[h]>e)return h;return-1};s.Curves=function(c){this.curves=[];this.curves.length=6*(c-1)};s.Curves.prototype={setLinear:function(c){this.curves[6*c]=0},setStepped:function(c){this.curves[6*c]=-1},setCurve:function(c,e,d,h,k){var l=.1*.1,m=.1*l,n=3*.1,p=3*l,l=6*l,q=6*m,s=2*-e+h,C=2*-d+k;h=3*(e-h)+1;k=3*(d-k)+1;c*=6;var u=this.curves;u[c]=e*n+s*p+h*m;u[c+1]=d*n+C*p+k*m;u[c+2]=s*l+h*q;u[c+3]=C*l+k*q;u[c+4]=h*q;u[c+5]=k*q},getCurvePercent:function(c,e){e=0>e?0:1<e?1:e;var d=6*c,h=this.curves,
k=h[d];if(!k)return e;if(-1==k)return 0;for(var l=h[d+1],m=h[d+2],n=h[d+3],p=h[d+4],q=h[d+5],d=k,h=l,s=8;;){if(d>=e)return k=d-k,l=h-l,l+(h-l)*(e-k)/(d-k);if(!s)break;s--;k+=m;l+=n;m+=p;n+=q;d+=k;h+=l}return h+(1-h)*(e-d)/(1-d)}};s.RotateTimeline=function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=2*c};s.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(c,e,d){c*=2;this.frames[c]=e;this.frames[c+1]=d},apply:function(c,
e,d){var h=this.frames;if(!(e<h[0])){c=c.bones[this.boneIndex];if(e>=h[h.length-2])h=c.data.rotation+h[h.length-1]-c.rotation;else{var k=s.binarySearch(h,e,2),l=h[k-1],m=h[k];e=1-(e-m)/(h[k-2]-m);e=this.curves.getCurvePercent(k/2-1,e);for(h=h[k+1]-l;180<h;)h-=360;for(;-180>h;)h+=360;h=c.data.rotation+(l+h*e)-c.rotation}for(;180<h;)h-=360;for(;-180>h;)h+=360;c.rotation+=h*d}}};s.TranslateTimeline=function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=3*c};s.TranslateTimeline.prototype=
{boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(c,e,d,h){c*=3;this.frames[c]=e;this.frames[c+1]=d;this.frames[c+2]=h},apply:function(c,e,d){var h=this.frames;if(!(e<h[0]))if(c=c.bones[this.boneIndex],e>=h[h.length-3])c.x+=(c.data.x+h[h.length-2]-c.x)*d,c.y+=(c.data.y+h[h.length-1]-c.y)*d;else{var k=s.binarySearch(h,e,3),l=h[k-2],m=h[k-1],n=h[k];e=1-(e-n)/(h[k+-3]-n);e=this.curves.getCurvePercent(k/3-1,e);c.x+=(c.data.x+l+(h[k+1]-l)*e-c.x)*d;c.y+=(c.data.y+m+(h[k+
2]-m)*e-c.y)*d}}};s.ScaleTimeline=function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=3*c};s.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(c,e,d,h){c*=3;this.frames[c]=e;this.frames[c+1]=d;this.frames[c+2]=h},apply:function(c,e,d){var h=this.frames;if(!(e<h[0]))if(c=c.bones[this.boneIndex],e>=h[h.length-3])c.scaleX+=(c.data.scaleX-1+h[h.length-2]-c.scaleX)*d,c.scaleY+=(c.data.scaleY-1+h[h.length-1]-c.scaleY)*d;else{var k=
s.binarySearch(h,e,3),l=h[k-2],m=h[k-1],n=h[k];e=1-(e-n)/(h[k+-3]-n);e=this.curves.getCurvePercent(k/3-1,e);c.scaleX+=(c.data.scaleX-1+l+(h[k+1]-l)*e-c.scaleX)*d;c.scaleY+=(c.data.scaleY-1+m+(h[k+2]-m)*e-c.scaleY)*d}}};s.ColorTimeline=function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=5*c};s.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(c,e,d,h){c*=5;this.frames[c]=e;this.frames[c+1]=r;this.frames[c+2]=g;this.frames[c+
3]=b;this.frames[c+4]=a},apply:function(c,e,d){var h=this.frames;if(!(e<h[0]))if(c=c.slots[this.slotIndex],e>=h[h.length-5])d=h.length-1,c.r=h[d-3],c.g=h[d-2],c.b=h[d-1],c.a=h[d];else{var k=s.binarySearch(h,e,5),l=h[k-4],m=h[k-3],n=h[k-2],p=h[k-1],q=h[k];e=1-(e-q)/(h[k-5]-q);e=this.curves.getCurvePercent(k/5-1,e);l+=(h[k+1]-l)*e;m+=(h[k+2]-m)*e;n+=(h[k+3]-n)*e;h=p+(h[k+4]-p)*e;1>d?(c.r+=(l-c.r)*d,c.g+=(m-c.g)*d,c.b+=(n-c.b)*d,c.a+=(h-c.a)*d):(c.r=l,c.g=m,c.b=n,c.a=h)}}};s.AttachmentTimeline=function(c){this.curves=
new s.Curves(c);this.frames=[];this.frames.length=c;this.attachmentNames=[];this.attachmentNames.length=c};s.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(c,e,d){this.frames[c]=e;this.attachmentNames[c]=d},apply:function(c,e,d){d=this.frames;e<d[0]||(e=e>=d[d.length-1]?d.length-1:s.binarySearch(d,e,1)-1,e=this.attachmentNames[e],c.slots[this.slotIndex].setAttachment(e?c.getAttachmentBySlotIndex(this.slotIndex,e):null))}};s.SkeletonData=
function(){this.bones=[];this.slots=[];this.skins=[];this.animations=[]};s.SkeletonData.prototype={defaultSkin:null,findBone:function(c){for(var e=this.bones,d=0,h=e.length;d<h;d++)if(e[d].name==c)return e[d];return null},findBoneIndex:function(c){for(var e=this.bones,d=0,h=e.length;d<h;d++)if(e[d].name==c)return d;return-1},findSlot:function(c){for(var e=this.slots,d=0,h=e.length;d<h;d++)if(e[d].name==c)return slot[d];return null},findSlotIndex:function(c){for(var e=this.slots,d=0,h=e.length;d<h;d++)if(e[d].name==
c)return d;return-1},findSkin:function(c){for(var e=this.skins,d=0,h=e.length;d<h;d++)if(e[d].name==c)return e[d];return null},findAnimation:function(c){for(var e=this.animations,d=0,h=e.length;d<h;d++)if(e[d].name==c)return e[d];return null}};s.Skeleton=function(c){this.data=c;this.bones=[];for(var e=0,d=c.bones.length;e<d;e++){var h=c.bones[e],k=h.parent?this.bones[c.bones.indexOf(h.parent)]:null;this.bones.push(new s.Bone(h,k))}this.slots=[];this.drawOrder=[];e=0;for(d=c.slots.length;e<d;e++)h=
c.slots[e],k=this.bones[c.bones.indexOf(h.boneData)],h=new s.Slot(h,this,k),this.slots.push(h),this.drawOrder.push(h)};s.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var c=this.flipX,e=this.flipY,d=this.bones,h=0,k=d.length;h<k;h++)d[h].updateWorldTransform(c,e)},setToSetupPose:function(){this.setBonesToSetupPose();this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var c=this.bones,d=0,f=c.length;d<f;d++)c[d].setToSetupPose()},
setSlotsToSetupPose:function(){for(var c=this.slots,d=0,f=c.length;d<f;d++)c[d].setToSetupPose(d)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(c){for(var d=this.bones,f=0,h=d.length;f<h;f++)if(d[f].data.name==c)return d[f];return null},findBoneIndex:function(c){for(var d=this.bones,f=0,h=d.length;f<h;f++)if(d[f].data.name==c)return f;return-1},findSlot:function(c){for(var d=this.slots,f=0,h=d.length;f<h;f++)if(d[f].data.name==c)return d[f];return null},findSlotIndex:function(c){for(var d=
this.slots,f=0,h=d.length;f<h;f++)if(d[f].data.name==c)return f;return-1},setSkinByName:function(c){var d=this.data.findSkin(c);if(!d)throw"Skin not found: "+c;this.setSkin(d)},setSkin:function(c){this.skin&&c&&c._attachAll(this,this.skin);this.skin=c},getAttachmentBySlotName:function(c,d){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(c),d)},getAttachmentBySlotIndex:function(c,d){if(this.skin){var f=this.skin.getAttachment(c,d);if(f)return f}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(c,
d):null},setAttachment:function(c,d){for(var f=this.slots,h=0,k=f.size;h<k;h++){var l=f[h];if(l.data.name==c){f=null;if(d&&(f=this.getAttachment(h,d),null==f))throw"Attachment not found: "+d+", for slot: "+c;l.setAttachment(f);return}}throw"Slot not found: "+c;},update:function(c){time+=c}};s.AttachmentType={region:0};s.RegionAttachment=function(){this.offset=[];this.offset.length=8;this.uvs=[];this.uvs.length=8};s.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,
rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(c,d,f,h,k){var l=this.uvs;k?(l[2]=c,l[3]=h,l[4]=c,l[5]=d,l[6]=f,l[7]=d,l[0]=f,l[1]=h):(l[0]=c,l[1]=h,l[2]=c,l[3]=d,l[4]=f,l[5]=d,l[6]=f,l[7]=h)},updateOffset:function(){var c=this.width/this.regionOriginalWidth*this.scaleX,d=this.height/this.regionOriginalHeight*this.scaleY,f=-this.width/2*this.scaleX+this.regionOffsetX*c,h=-this.height/2*this.scaleY+this.regionOffsetY*
d,k=f+this.regionWidth*c,c=h+this.regionHeight*d,d=this.rotation*Math.PI/180,l=Math.cos(d),m=Math.sin(d),d=f*l+this.x,f=f*m,n=h*l+this.y,h=h*m,p=k*l+this.x,k=k*m,l=c*l+this.y,c=c*m,m=this.offset;m[0]=d-h;m[1]=n+f;m[2]=d-c;m[3]=l+f;m[4]=p-c;m[5]=l+k;m[6]=p-h;m[7]=n+k},computeVertices:function(c,d,f,h){c+=f.worldX;d+=f.worldY;var k=f.m00,l=f.m01,m=f.m10;f=f.m11;var n=this.offset;h[0]=n[0]*k+n[1]*l+c;h[1]=n[0]*m+n[1]*f+d;h[2]=n[2]*k+n[3]*l+c;h[3]=n[2]*m+n[3]*f+d;h[4]=n[4]*k+n[5]*l+c;h[5]=n[4]*m+n[5]*
f+d;h[6]=n[6]*k+n[7]*l+c;h[7]=n[6]*m+n[7]*f+d}};s.AnimationStateData=function(c){this.skeletonData=c;this.animationToMixTime={}};s.AnimationStateData.prototype={defaultMix:0,setMixByName:function(c,d,f){var h=this.skeletonData.findAnimation(c);if(!h)throw"Animation not found: "+c;c=this.skeletonData.findAnimation(d);if(!c)throw"Animation not found: "+d;this.setMix(h,c,f)},setMix:function(c,d,f){this.animationToMixTime[c.name+":"+d.name]=f},getMix:function(c,d){var f=this.animationToMixTime[c.name+
":"+d.name];return f?f:this.defaultMix}};s.AnimationState=function(c){this.data=c;this.queue=[]};s.AnimationState.prototype={current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(c){this.currentTime+=c;this.previousTime+=c;this.mixTime+=c;0<this.queue.length&&(c=this.queue[0],this.currentTime>=c.delay&&(this._setAnimation(c.animation,c.loop),this.queue.shift()))},apply:function(c){if(this.current)if(this.previous){this.previous.apply(c,
this.previousTime,this.previousLoop);var d=this.mixTime/this.mixDuration;1<=d&&(d=1,this.previous=null);this.current.mix(c,this.currentTime,this.currentLoop,d)}else this.current.apply(c,this.currentTime,this.currentLoop)},clearAnimation:function(){this.current=this.previous=null;this.queue.length=0},_setAnimation:function(c,d){this.previous=null;c&&this.current&&(this.mixDuration=this.data.getMix(this.current,c),0<this.mixDuration&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,
this.previousLoop=this.currentLoop));this.current=c;this.currentLoop=d;this.currentTime=0},setAnimationByName:function(c,d){var f=this.data.skeletonData.findAnimation(c);if(!f)throw"Animation not found: "+c;this.setAnimation(f,d)},setAnimation:function(c,d){this.queue.length=0;this._setAnimation(c,d)},addAnimationByName:function(c,d,f){var h=this.data.skeletonData.findAnimation(c);if(!h)throw"Animation not found: "+c;this.addAnimation(h,d,f)},addAnimation:function(c,d,f){var h={};h.animation=c;h.loop=
d;if(!f||0>=f)d=this.queue.length?this.queue[this.queue.length-1].animation:this.current,f=null!=d?d.duration-this.data.getMix(d,c)+(f||0):0;h.delay=f;this.queue.push(h)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}};s.SkeletonJson=function(c){this.attachmentLoader=c};s.SkeletonJson.prototype={scale:1,readSkeletonData:function(c){for(var d=new s.SkeletonData,f,h=c.bones,k=0,l=h.length;k<l;k++){var m=h[k];f=null;if(m.parent&&(f=d.findBone(m.parent),!f))throw"Parent bone not found: "+
m.parent;f=new s.BoneData(m.name,f);f.length=(m.length||0)*this.scale;f.x=(m.x||0)*this.scale;f.y=(m.y||0)*this.scale;f.rotation=m.rotation||0;f.scaleX=m.scaleX||1;f.scaleY=m.scaleY||1;d.bones.push(f)}h=c.slots;k=0;for(l=h.length;k<l;k++){m=h[k];f=d.findBone(m.bone);if(!f)throw"Slot bone not found: "+m.bone;f=new s.SlotData(m.name,f);var n=m.color;n&&(f.r=s.SkeletonJson.toColor(n,0),f.g=s.SkeletonJson.toColor(n,1),f.b=s.SkeletonJson.toColor(n,2),f.a=s.SkeletonJson.toColor(n,3));f.attachmentName=m.attachment;
d.slots.push(f)}var k=c.skins,p;for(p in k)if(k.hasOwnProperty(p)){l=k[p];f=new s.Skin(p);for(var q in l)if(l.hasOwnProperty(q)){var h=d.findSlotIndex(q),m=l[q],t;for(t in m)m.hasOwnProperty(t)&&(n=this.readAttachment(f,t,m[t]),null!=n&&f.addAttachment(h,t,n))}d.skins.push(f);"default"==f.name&&(d.defaultSkin=f)}c=c.animations;for(var C in c)c.hasOwnProperty(C)&&this.readAnimation(C,c[C],d);return d},readAttachment:function(c,d,f){d=f.name||d;c=s.AttachmentType[f.type||"region"];if(c==s.AttachmentType.region)return c=
new s.RegionAttachment,c.x=(f.x||0)*this.scale,c.y=(f.y||0)*this.scale,c.scaleX=f.scaleX||1,c.scaleY=f.scaleY||1,c.rotation=f.rotation||0,c.width=(f.width||32)*this.scale,c.height=(f.height||32)*this.scale,c.updateOffset(),c.rendererObject={},c.rendererObject.name=d,c.rendererObject.scale={},c.rendererObject.scale.x=c.scaleX,c.rendererObject.scale.y=c.scaleY,c.rendererObject.rotation=-c.rotation*Math.PI/180,c;throw"Unknown attachment type: "+c;},readAnimation:function(c,d,f){var h=[],k=0,l,m,n,p,
q,t,C,u=d.bones,v;for(v in u)if(u.hasOwnProperty(v)){var w=f.findBoneIndex(v);if(-1==w)throw"Bone not found: "+v;var x=u[v];for(n in x)if(x.hasOwnProperty(n))if(q=x[n],"rotate"==n){m=new s.RotateTimeline(q.length);m.boneIndex=w;t=l=0;for(C=q.length;t<C;t++)p=q[t],m.setFrame(l,p.time,p.angle),s.SkeletonJson.readCurve(m,l,p),l++;h.push(m);k=Math.max(k,m.frames[2*m.getFrameCount()-2])}else if("translate"==n||"scale"==n){var B=1;"scale"==n?m=new s.ScaleTimeline(q.length):(m=new s.TranslateTimeline(q.length),
B=this.scale);m.boneIndex=w;t=l=0;for(C=q.length;t<C;t++)p=q[t],m.setFrame(l,p.time,(p.x||0)*B,(p.y||0)*B),s.SkeletonJson.readCurve(m,l,p),l++;h.push(m);k=Math.max(k,m.frames[3*m.getFrameCount()-3])}else throw"Invalid timeline type for a bone: "+n+" ("+v+")";}d=d.slots;for(var D in d)if(d.hasOwnProperty(D))for(n in u=d[D],v=f.findSlotIndex(D),u)if(u.hasOwnProperty(n))if(q=u[n],"color"==n){m=new s.ColorTimeline(q.length);m.slotIndex=v;t=l=0;for(C=q.length;t<C;t++){p=q[t];var y=p.color,w=s.SkeletonJson.toColor(y,
0),x=s.SkeletonJson.toColor(y,1),B=s.SkeletonJson.toColor(y,2),y=s.SkeletonJson.toColor(y,3);m.setFrame(l,p.time,w,x,B,y);s.SkeletonJson.readCurve(m,l,p);l++}h.push(m);k=Math.max(k,m.frames[5*m.getFrameCount()-5])}else if("attachment"==n){m=new s.AttachmentTimeline(q.length);m.slotIndex=v;t=l=0;for(C=q.length;t<C;t++)p=q[t],m.setFrame(l++,p.time,p.name);h.push(m);k=Math.max(k,m.frames[m.getFrameCount()-1])}else throw"Invalid timeline type for a slot: "+n+" ("+D+")";f.animations.push(new s.Animation(c,
h,k))}};s.SkeletonJson.readCurve=function(c,d,f){(f=f.curve)&&("stepped"==f?c.curves.setStepped(d):f instanceof Array&&c.curves.setCurve(d,f[0],f[1],f[2],f[3]))};s.SkeletonJson.toColor=function(c,d){if(8!=c.length)throw"Color hexidecimal length must be 8, recieved: "+c;return parseInt(c.substring(2*d,2),16)/255};s.Atlas=function(c,d){this.textureLoader=d;this.pages=[];this.regions=[];var f=new s.AtlasReader(c),h=[];h.length=4;for(var k=null;;){var l=f.readLine();if(null==l)break;l=f.trim(l);if(l.length)if(k){var m=
new s.AtlasRegion;m.name=l;m.page=k;m.rotate="true"==f.readValue();f.readTuple(h);var l=parseInt(h[0],10),n=parseInt(h[1],10);f.readTuple(h);var p=parseInt(h[0],10),q=parseInt(h[1],10);m.u=l/k.width;m.v=n/k.height;m.rotate?(m.u2=(l+q)/k.width,m.v2=(n+p)/k.height):(m.u2=(l+p)/k.width,m.v2=(n+q)/k.height);m.x=l;m.y=n;m.width=Math.abs(p);m.height=Math.abs(q);4==f.readTuple(h)&&(m.splits=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3],10)],4==f.readTuple(h)&&(m.pads=[parseInt(h[0],
10),parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3],10)],f.readTuple(h)));m.originalWidth=parseInt(h[0],10);m.originalHeight=parseInt(h[1],10);f.readTuple(h);m.offsetX=parseInt(h[0],10);m.offsetY=parseInt(h[1],10);m.index=parseInt(f.readValue(),10);this.regions.push(m)}else k=new s.AtlasPage,k.name=l,k.format=s.Atlas.Format[f.readValue()],f.readTuple(h),k.minFilter=s.Atlas.TextureFilter[h[0]],k.magFilter=s.Atlas.TextureFilter[h[1]],m=f.readValue(),k.uWrap=s.Atlas.TextureWrap.clampToEdge,k.vWrap=
s.Atlas.TextureWrap.clampToEdge,"x"==m?k.uWrap=s.Atlas.TextureWrap.repeat:"y"==m?k.vWrap=s.Atlas.TextureWrap.repeat:"xy"==m&&(k.uWrap=k.vWrap=s.Atlas.TextureWrap.repeat),d.load(k,l),this.pages.push(k);else k=null}};s.Atlas.prototype={findRegion:function(c){for(var d=this.regions,f=0,h=d.length;f<h;f++)if(d[f].name==c)return d[f];return null},dispose:function(){for(var c=this.pages,d=0,f=c.length;d<f;d++)this.textureLoader.unload(c[d].rendererObject)},updateUVs:function(c){for(var d=this.regions,f=
0,h=d.length;f<h;f++){var k=d[f];k.page==c&&(k.u=k.x/c.width,k.v=k.y/c.height,k.rotate?(k.u2=(k.x+k.height)/c.width,k.v2=(k.y+k.width)/c.height):(k.u2=(k.x+k.width)/c.width,k.v2=(k.y+k.height)/c.height))}}};s.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6};s.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6};s.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2};
s.AtlasPage=function(){};s.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0};s.AtlasRegion=function(){};s.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null};s.AtlasReader=function(c){this.lines=c.split(/\r\n|\r|\n/)};s.AtlasReader.prototype={index:0,trim:function(c){return c.replace(/^\s+|\s+$/g,
"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var c=this.readLine(),d=c.indexOf(":");if(-1==d)throw"Invalid line: "+c;return this.trim(c.substring(d+1))},readTuple:function(c){var d=this.readLine(),f=d.indexOf(":");if(-1==f)throw"Invalid line: "+d;for(var h=0,f=f+1;3>h;h++){var k=d.indexOf(",",f);if(-1==k){if(!h)throw"Invalid line: "+d;break}c[h]=this.trim(d.substr(f,k-f));f=k+1}c[h]=this.trim(d.substring(f));return h+1}};s.AtlasAttachmentLoader=
function(c){this.atlas=c};s.AtlasAttachmentLoader.prototype={newAttachment:function(c,d,f){switch(d){case s.AttachmentType.region:c=this.atlas.findRegion(f);if(!c)throw"Region not found in atlas: "+f+" ("+d+")";d=new s.RegionAttachment(f);d.rendererObject=c;d.setUVs(c.u,c.v,c.u2,c.v2,c.rotate);d.regionOffsetX=c.offsetX;d.regionOffsetY=c.offsetY;d.regionWidth=c.width;d.regionHeight=c.height;d.regionOriginalWidth=c.originalWidth;d.regionOriginalHeight=c.originalHeight;return d}throw"Unknown attachment type: "+
d;}};s.Bone.yDown=!0;d.AnimCache={};d.Spine=function(c){d.DisplayObjectContainer.call(this);this.spineData=d.AnimCache[c];if(!this.spineData)throw Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+c);this.skeleton=new s.Skeleton(this.spineData);this.skeleton.updateWorldTransform();this.stateData=new s.AnimationStateData(this.spineData);this.state=new s.AnimationState(this.stateData);this.slotContainers=[];c=0;for(var e=this.skeleton.drawOrder.length;c<e;c++){var f=
this.skeleton.drawOrder[c],h=f.attachment,k=new d.DisplayObjectContainer;this.slotContainers.push(k);this.addChild(k);if(h instanceof s.RegionAttachment){var l=h.rendererObject.name,h=this.createSprite(f,h.rendererObject);f.currentSprite=h;f.currentSpriteName=l;k.addChild(h)}}};d.Spine.prototype=Object.create(d.DisplayObjectContainer.prototype);d.Spine.prototype.constructor=d.Spine;d.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var c=.001*(Date.now()-this.lastTime);
this.lastTime=Date.now();this.state.update(c);this.state.apply(this.skeleton);this.skeleton.updateWorldTransform();for(var c=this.skeleton.drawOrder,e=0,f=c.length;e<f;e++){var h=c[e],k=h.attachment,l=this.slotContainers[e];if(k instanceof s.RegionAttachment){if(k.rendererObject&&(!h.currentSpriteName||h.currentSpriteName!=k.name)){var m=k.rendererObject.name;void 0!==h.currentSprite&&(h.currentSprite.visible=!1);h.sprites=h.sprites||{};if(void 0!==h.sprites[m])h.sprites[m].visible=!0;else{var n=
this.createSprite(h,k.rendererObject);l.addChild(n)}h.currentSprite=h.sprites[m];h.currentSpriteName=m}l.visible=!0;m=h.bone;l.position.x=m.worldX+k.x*m.m00+k.y*m.m01;l.position.y=m.worldY+k.x*m.m10+k.y*m.m11;l.scale.x=m.worldScaleX;l.scale.y=m.worldScaleY;l.rotation=-(h.bone.worldRotation*Math.PI/180)}else l.visible=!1}d.DisplayObjectContainer.prototype.updateTransform.call(this)};d.Spine.prototype.createSprite=function(c,e){var f=new d.Sprite(d.Texture.fromFrame(d.TextureCache[e.name]?e.name:e.name+
".png"));f.scale=e.scale;f.rotation=e.rotation;f.anchor.x=f.anchor.y=.5;c.sprites=c.sprites||{};return c.sprites[e.name]=f};d.BaseTextureCache={};d.texturesToUpdate=[];d.texturesToDestroy=[];d.BaseTextureCacheIdGenerator=0;d.BaseTexture=function(c,e){d.EventTarget.call(this);this.height=this.width=100;this.scaleMode=e||d.scaleModes.DEFAULT;this.hasLoaded=!1;this.source=c;this.id=d.BaseTextureCacheIdGenerator++;this._glTextures=[];if(c){if((this.source.complete||this.source.getContext)&&this.source.width&&
this.source.height)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,d.texturesToUpdate.push(this);else{var f=this;this.source.onload=function(){f.hasLoaded=!0;f.width=f.source.width;f.height=f.source.height;d.texturesToUpdate.push(f);f.dispatchEvent({type:"loaded",content:f})}}this.imageUrl=null;this._powerOf2=!1}};d.BaseTexture.prototype.constructor=d.BaseTexture;d.BaseTexture.prototype.destroy=function(){this.imageUrl&&(delete d.BaseTextureCache[this.imageUrl],this.imageUrl=
null,this.source.src=null);this.source=null;d.texturesToDestroy.push(this)};d.BaseTexture.prototype.updateSourceImage=function(c){this.hasLoaded=!1;this.source.src=null;this.source.src=c};d.BaseTexture.fromImage=function(c,e,f){var h=d.BaseTextureCache[c];void 0===e&&-1===c.indexOf("data:")&&(e=!0);h||(h=new Image,e&&(h.crossOrigin=""),h.src=c,h=new d.BaseTexture(h,f),h.imageUrl=c,d.BaseTextureCache[c]=h);return h};d.BaseTexture.fromCanvas=function(c,e){c._pixiId||(c._pixiId="canvas_"+d.TextureCacheIdGenerator++);
var f=d.BaseTextureCache[c._pixiId];f||(f=new d.BaseTexture(c,e),d.BaseTextureCache[c._pixiId]=f);return f};d.TextureCache={};d.FrameCache={};d.TextureCacheIdGenerator=0;d.Texture=function(c,e){d.EventTarget.call(this);e||(this.noFrame=!0,e=new d.Rectangle(0,0,1,1));c instanceof d.Texture&&(c=c.baseTexture);this.baseTexture=c;this.frame=e;this.trim=null;this.scope=this;this._uvs=null;if(c.hasLoaded)this.noFrame&&(e=new d.Rectangle(0,0,c.width,c.height)),this.setFrame(e);else{var f=this;c.addEventListener("loaded",
function(){f.onBaseTextureLoaded()})}};d.Texture.prototype.constructor=d.Texture;d.Texture.prototype.onBaseTextureLoaded=function(){var c=this.baseTexture;c.removeEventListener("loaded",this.onLoaded);this.noFrame&&(this.frame=new d.Rectangle(0,0,c.width,c.height));this.setFrame(this.frame);this.scope.dispatchEvent({type:"update",content:this})};d.Texture.prototype.destroy=function(c){c&&this.baseTexture.destroy()};d.Texture.prototype.setFrame=function(c){this.frame=c;this.width=c.width;this.height=
c.height;if(c.x+c.width>this.baseTexture.width||c.y+c.height>this.baseTexture.height)throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0;d.Texture.frameUpdates.push(this)};d.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new d.TextureUvs);var c=this.frame,e=this.baseTexture.width,f=this.baseTexture.height;this._uvs.x0=c.x/e;this._uvs.y0=c.y/f;this._uvs.x1=(c.x+c.width)/e;this._uvs.y1=c.y/f;this._uvs.x2=(c.x+c.width)/e;this._uvs.y2=
(c.y+c.height)/f;this._uvs.x3=c.x/e;this._uvs.y3=(c.y+c.height)/f};d.Texture.fromImage=function(c,e,f){var h=d.TextureCache[c];h||(h=new d.Texture(d.BaseTexture.fromImage(c,e,f)),d.TextureCache[c]=h);return h};d.Texture.fromFrame=function(c){var e=d.TextureCache[c];if(!e)throw Error('The frameId "'+c+'" does not exist in the texture cache ');return e};d.Texture.fromCanvas=function(c,e){var f=d.BaseTexture.fromCanvas(c,e);return new d.Texture(f)};d.Texture.addTextureToCache=function(c,e){d.TextureCache[e]=
c};d.Texture.removeTextureFromCache=function(c){var e=d.TextureCache[c];delete d.TextureCache[c];delete d.BaseTextureCache[c];return e};d.Texture.frameUpdates=[];d.TextureUvs=function(){this.y4=this.x3=this.y2=this.x2=this.y1=this.x1=this.y0=this.x0=0};d.RenderTexture=function(c,e,f,h){d.EventTarget.call(this);this.width=c||100;this.height=e||100;this.frame=new d.Rectangle(0,0,this.width,this.height);this.baseTexture=new d.BaseTexture;this.baseTexture.width=this.width;this.baseTexture.height=this.height;
this.baseTexture._glTextures=[];this.baseTexture.scaleMode=h||d.scaleModes.DEFAULT;this.baseTexture.hasLoaded=!0;this.renderer=f||d.defaultRenderer;this.renderer.type===d.WEBGL_RENDERER?(c=this.renderer.gl,this.textureBuffer=new d.FilterTexture(c,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[c.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new d.Point(this.width/2,-this.height/2)):(this.render=this.renderCanvas,this.textureBuffer=new d.CanvasBuffer(this.width,
this.height),this.baseTexture.source=this.textureBuffer.canvas);d.Texture.frameUpdates.push(this)};d.RenderTexture.prototype=Object.create(d.Texture.prototype);d.RenderTexture.prototype.constructor=d.RenderTexture;d.RenderTexture.prototype.resize=function(c,e){this.width=c;this.height=e;this.frame.width=this.width;this.frame.height=this.height;if(this.renderer.type===d.WEBGL_RENDERER){this.projection.x=this.width/2;this.projection.y=-this.height/2;var f=this.renderer.gl;f.bindTexture(f.TEXTURE_2D,
this.baseTexture._glTextures[f.id]);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,this.width,this.height,0,f.RGBA,f.UNSIGNED_BYTE,null)}else this.textureBuffer.resize(this.width,this.height);d.Texture.frameUpdates.push(this)};d.RenderTexture.prototype.renderWebGL=function(c,e,f){var h=this.renderer.gl;h.colorMask(!0,!0,!0,!0);h.viewport(0,0,this.width,this.height);h.bindFramebuffer(h.FRAMEBUFFER,this.textureBuffer.frameBuffer);f&&this.textureBuffer.clear();f=c.children;h=c.worldTransform;c.worldTransform=d.RenderTexture.tempMatrix;
c.worldTransform.d=-1;c.worldTransform.ty=-2*this.projection.y;e&&(c.worldTransform.tx=e.x,c.worldTransform.ty-=e.y);e=0;for(var k=f.length;e<k;e++)f[e].updateTransform();d.WebGLRenderer.updateTextures();this.renderer.renderDisplayObject(c,this.projection,this.textureBuffer.frameBuffer);c.worldTransform=h};d.RenderTexture.prototype.renderCanvas=function(c,e,f){var h=c.children,k=c.worldTransform;c.worldTransform=d.RenderTexture.tempMatrix;e&&(c.worldTransform.tx=e.x,c.worldTransform.ty=e.y);e=0;for(var l=
h.length;e<l;e++)h[e].updateTransform();f&&this.textureBuffer.clear();f=this.textureBuffer.context;this.renderer.renderDisplayObject(c,f);f.setTransform(1,0,0,1,0,0);c.worldTransform=k};d.RenderTexture.tempMatrix=new d.Matrix;d.AssetLoader=function(c,e){d.EventTarget.call(this);this.assetURLs=c;this.crossorigin=e;this.loadersByType={jpg:d.ImageLoader,jpeg:d.ImageLoader,png:d.ImageLoader,gif:d.ImageLoader,json:d.JsonLoader,atlas:d.AtlasLoader,anim:d.SpineLoader,xml:d.BitmapFontLoader,fnt:d.BitmapFontLoader}};
d.AssetLoader.prototype.constructor=d.AssetLoader;d.AssetLoader.prototype._getDataType=function(c){if("data:"===c.slice(0,5).toLowerCase()){c=c.slice(5);var d=c.indexOf(",");return-1===d?null:(c=c.slice(0,d).split(";")[0])&&"text/plain"!==c.toLowerCase()?c.split("/").pop().toLowerCase():"txt"}return null};d.AssetLoader.prototype.load=function(){function c(c){d.onAssetLoaded(c.content)}var d=this;this.loadCount=this.assetURLs.length;for(var f=0;f<this.assetURLs.length;f++){var h=this.assetURLs[f],
k=this._getDataType(h);k||(k=h.split("?").shift().split(".").pop().toLowerCase());var l=this.loadersByType[k];if(!l)throw Error(k+" is an unsupported file type");h=new l(h,this.crossorigin);h.addEventListener("loaded",c);h.load()}};d.AssetLoader.prototype.onAssetLoaded=function(c){this.loadCount--;this.dispatchEvent({type:"onProgress",content:this,loader:c});if(this.onProgress)this.onProgress(c);if(!this.loadCount&&(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete))this.onComplete()};
d.JsonLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.crossorigin=e;this.baseUrl=c.replace(/[^\/]*$/,"");this.loaded=!1};d.JsonLoader.prototype.constructor=d.JsonLoader;d.JsonLoader.prototype.load=function(){var c=this;window.XDomainRequest&&!window.XMLHttpRequest?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3E3,this.ajaxRequest.onerror=function(){c.onError()},this.ajaxRequest.ontimeout=function(){c.onError()},this.ajaxRequest.onprogress=function(){}):this.ajaxRequest=
window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");this.ajaxRequest.onload=function(){c.onJSONLoaded()};this.ajaxRequest.open("GET",this.url,!0);this.ajaxRequest.send()};d.JsonLoader.prototype.onJSONLoaded=function(){if(this.ajaxRequest.responseText)if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var c=this,e=new d.ImageLoader(this.baseUrl+this.json.meta.image,this.crossorigin),f=this.json.frames;this.texture=e.texture.baseTexture;
e.addEventListener("loaded",function(){c.onLoaded()});for(var h in f){var k=f[h].frame;if(k&&(d.TextureCache[h]=new d.Texture(this.texture,{x:k.x,y:k.y,width:k.w,height:k.h}),f[h].trimmed)){var k=f[h].sourceSize,l=f[h].spriteSourceSize;d.TextureCache[h].trim=new d.Rectangle(l.x,l.y,k.w,k.h)}}e.load()}else this.json.bones&&(e=(new s.SkeletonJson).readSkeletonData(this.json),d.AnimCache[this.url]=e),this.onLoaded();else this.onError()};d.JsonLoader.prototype.onLoaded=function(){this.loaded=!0;this.dispatchEvent({type:"loaded",
content:this})};d.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})};d.AtlasLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.baseUrl=c.replace(/[^\/]*$/,"");this.crossorigin=e;this.loaded=!1};d.AtlasLoader.constructor=d.AtlasLoader;d.AtlasLoader.prototype.load=function(){this.ajaxRequest=new d.AjaxRequest;this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this);this.ajaxRequest.open("GET",this.url,!0);this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json");
this.ajaxRequest.send(null)};d.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};for(var c=this.ajaxRequest.responseText.split(/\r?\n/),e=-3,f=0,h=null,k=!1,l=0,m=0,n=this.onLoaded.bind(this),l=0;l<c.length;l++)c[l]=c[l].replace(/^\s+|\s+$/g,""),""===c[l]&&(k=l+1),0<c[l].length&&(k===l?(this.atlas.meta.image.push(c[l]),f=this.atlas.meta.image.length-1,
this.atlas.frames.push({}),e=-3):0<e&&(1===e%7?(null!=h&&(this.atlas.frames[f][h.name]=h),h={name:c[l],frame:{}}):(m=c[l].split(" "),3===e%7?(h.frame.x=Number(m[1].replace(",","")),h.frame.y=Number(m[2])):4===e%7?(h.frame.w=Number(m[1].replace(",","")),h.frame.h=Number(m[2])):5===e%7&&(m={x:0,y:0,w:Number(m[1].replace(",","")),h:Number(m[2])},m.w>h.frame.w||m.h>h.frame.h?(h.trimmed=!0,h.realSize=m):h.trimmed=!1))),e++);null!=h&&(this.atlas.frames[f][h.name]=h);if(0<this.atlas.meta.image.length){this.images=
[];for(m=0;m<this.atlas.meta.image.length;m++)for(l in c=this.atlas.frames[m],this.images.push(new d.ImageLoader(this.baseUrl+this.atlas.meta.image[m],this.crossorigin)),c)if(e=c[l].frame)d.TextureCache[l]=new d.Texture(this.images[m].texture.baseTexture,{x:e.x,y:e.y,width:e.w,height:e.h}),c[l].trimmed&&(d.TextureCache[l].realSize=c[l].realSize,d.TextureCache[l].trim.x=0,d.TextureCache[l].trim.y=0);for(m=this.currentImageId=0;m<this.images.length;m++)this.images[m].addEventListener("loaded",n);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()};
d.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.dispatchEvent({type:"loaded",content:this}))};d.AtlasLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})};d.SpriteSheetLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.crossorigin=e;this.baseUrl=c.replace(/[^\/]*$/,"");this.texture=null;this.frames={}};d.SpriteSheetLoader.prototype.constructor=
d.SpriteSheetLoader;d.SpriteSheetLoader.prototype.load=function(){var c=this,e=new d.JsonLoader(this.url,this.crossorigin);e.addEventListener("loaded",function(d){c.json=d.content.json;c.onLoaded()});e.load()};d.SpriteSheetLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})};d.ImageLoader=function(c,e){d.EventTarget.call(this);this.texture=d.Texture.fromImage(c,e);this.frames=[]};d.ImageLoader.prototype.constructor=d.ImageLoader;d.ImageLoader.prototype.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();
else{var c=this;this.texture.baseTexture.addEventListener("loaded",function(){c.onLoaded()})}};d.ImageLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})};d.ImageLoader.prototype.loadFramedSpriteSheet=function(c,e,f){this.frames=[];for(var h=Math.floor(this.texture.width/c),k=Math.floor(this.texture.height/e),l=0,m=0;m<k;m++)for(var n=0;n<h;n++,l++){var p=new d.Texture(this.texture,{x:n*c,y:m*e,width:c,height:e});this.frames.push(p);f&&(d.TextureCache[f+"-"+l]=p)}if(this.texture.baseTexture.hasLoaded)this.onLoaded();
else{var q=this;this.texture.baseTexture.addEventListener("loaded",function(){q.onLoaded()})}};d.BitmapFontLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.crossorigin=e;this.baseUrl=c.replace(/[^\/]*$/,"");this.texture=null};d.BitmapFontLoader.prototype.constructor=d.BitmapFontLoader;d.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new d.AjaxRequest;var c=this;this.ajaxRequest.onreadystatechange=function(){c.onXMLLoaded()};this.ajaxRequest.open("GET",this.url,!0);this.ajaxRequest.overrideMimeType&&
this.ajaxRequest.overrideMimeType("application/xml");this.ajaxRequest.send(null)};d.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var c=this.ajaxRequest.responseXML;if(!c||/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"===typeof window.DOMParser)c=(new DOMParser).parseFromString(this.ajaxRequest.responseText,"text/xml");
else{var e=document.createElement("div");e.innerHTML=this.ajaxRequest.responseText;c=e}e=this.baseUrl+c.getElementsByTagName("page")[0].getAttribute("file");e=new d.ImageLoader(e,this.crossorigin);this.texture=e.texture.baseTexture;var f={},h=c.getElementsByTagName("info")[0],k=c.getElementsByTagName("common")[0];f.font=h.getAttribute("face");f.size=parseInt(h.getAttribute("size"),10);f.lineHeight=parseInt(k.getAttribute("lineHeight"),10);f.chars={};k=c.getElementsByTagName("char");for(h=0;h<k.length;h++){var l=
parseInt(k[h].getAttribute("id"),10),m=new d.Rectangle(parseInt(k[h].getAttribute("x"),10),parseInt(k[h].getAttribute("y"),10),parseInt(k[h].getAttribute("width"),10),parseInt(k[h].getAttribute("height"),10));f.chars[l]={xOffset:parseInt(k[h].getAttribute("xoffset"),10),yOffset:parseInt(k[h].getAttribute("yoffset"),10),xAdvance:parseInt(k[h].getAttribute("xadvance"),10),kerning:{},texture:d.TextureCache[l]=new d.Texture(this.texture,m)}}c=c.getElementsByTagName("kerning");for(h=0;h<c.length;h++)k=
parseInt(c[h].getAttribute("first"),10),l=parseInt(c[h].getAttribute("second"),10),m=parseInt(c[h].getAttribute("amount"),10),f.chars[l].kerning[k]=m;d.BitmapText.fonts[f.font]=f;var n=this;e.addEventListener("loaded",function(){n.onLoaded()});e.load()}};d.BitmapFontLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})};d.SpineLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.crossorigin=e;this.loaded=!1};d.SpineLoader.prototype.constructor=d.SpineLoader;
d.SpineLoader.prototype.load=function(){var c=this,e=new d.JsonLoader(this.url,this.crossorigin);e.addEventListener("loaded",function(d){c.json=d.content.json;c.onLoaded()});e.load()};d.SpineLoader.prototype.onLoaded=function(){this.loaded=!0;this.dispatchEvent({type:"loaded",content:this})};d.AbstractFilter=function(c,d){this.passes=[this];this.shaders=[];this.dirty=!0;this.padding=0;this.uniforms=d||{};this.fragmentSrc=c||[]};d.AlphaMaskFilter=function(c){d.AbstractFilter.call(this);this.passes=
[this];c.baseTexture._powerOf2=!0;this.uniforms={mask:{type:"sampler2D",value:c},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}};c.baseTexture.hasLoaded?(this.uniforms.mask.value.x=c.width,this.uniforms.mask.value.y=c.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),c.baseTexture.on("loaded",this.boundLoadedFunction));this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;",
"uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]};d.AlphaMaskFilter.prototype=Object.create(d.AbstractFilter.prototype);
d.AlphaMaskFilter.prototype.constructor=d.AlphaMaskFilter;d.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width;this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height;this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)};Object.defineProperty(d.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(c){this.uniforms.mask.value=c}});d.ColorMatrixFilter=function(){d.AbstractFilter.call(this);
this.passes=[this];this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]};d.ColorMatrixFilter.prototype=Object.create(d.AbstractFilter.prototype);d.ColorMatrixFilter.prototype.constructor=d.ColorMatrixFilter;Object.defineProperty(d.ColorMatrixFilter.prototype,
"matrix",{get:function(){return this.uniforms.matrix.value},set:function(c){this.uniforms.matrix.value=c}});d.GrayFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={gray:{type:"1f",value:1}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);",
"}"]};d.GrayFilter.prototype=Object.create(d.AbstractFilter.prototype);d.GrayFilter.prototype.constructor=d.GrayFilter;Object.defineProperty(d.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(c){this.uniforms.gray.value=c}});d.DisplacementFilter=function(c){d.AbstractFilter.call(this);this.passes=[this];c.baseTexture._powerOf2=!0;this.uniforms={displacementMap:{type:"sampler2D",value:c},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},
mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}};c.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=c.width,this.uniforms.mapDimensions.value.y=c.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),c.baseTexture.on("loaded",this.boundLoadedFunction));this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;",
"uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);",
"   vec2 cord = vTextureCoord;","}"]};d.DisplacementFilter.prototype=Object.create(d.AbstractFilter.prototype);d.DisplacementFilter.prototype.constructor=d.DisplacementFilter;d.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width;this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height;this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)};Object.defineProperty(d.DisplacementFilter.prototype,
"map",{get:function(){return this.uniforms.displacementMap.value},set:function(c){this.uniforms.displacementMap.value=c}});Object.defineProperty(d.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(c){this.uniforms.scale.value=c}});Object.defineProperty(d.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(c){this.uniforms.offset.value=c}});d.PixelateFilter=function(){d.AbstractFilter.call(this);this.passes=
[this];this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1E4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;",
"   gl_FragColor = texture2D(uSampler, color);","}"]};d.PixelateFilter.prototype=Object.create(d.AbstractFilter.prototype);d.PixelateFilter.prototype.constructor=d.PixelateFilter;Object.defineProperty(d.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(c){this.dirty=!0;this.uniforms.pixelSize.value=c}});d.BlurXFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",value:1/512}};this.fragmentSrc=["precision mediump float;",
"varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;",
"   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]};d.BlurXFilter.prototype=Object.create(d.AbstractFilter.prototype);
d.BlurXFilter.prototype.constructor=d.BlurXFilter;Object.defineProperty(d.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(c){this.dirty=!0;this.uniforms.blur.value=1/7E3*c}});d.BlurYFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",value:1/512}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {",
"   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;",
"   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]};d.BlurYFilter.prototype=Object.create(d.AbstractFilter.prototype);d.BlurYFilter.prototype.constructor=d.BlurYFilter;Object.defineProperty(d.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/
(1/7E3)},set:function(c){this.uniforms.blur.value=1/7E3*c}});d.BlurFilter=function(){this.blurXFilter=new d.BlurXFilter;this.blurYFilter=new d.BlurYFilter;this.passes=[this.blurXFilter,this.blurYFilter]};Object.defineProperty(d.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(c){this.blurXFilter.blur=this.blurYFilter.blur=c}});Object.defineProperty(d.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(c){this.blurXFilter.blur=
c}});Object.defineProperty(d.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(c){this.blurYFilter.blur=c}});d.InvertFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={invert:{type:"1f",value:1}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);",
"}"]};d.InvertFilter.prototype=Object.create(d.AbstractFilter.prototype);d.InvertFilter.prototype.constructor=d.InvertFilter;Object.defineProperty(d.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(c){this.uniforms.invert.value=c}});d.SepiaFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={sepia:{type:"1f",value:1}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;",
"uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]};d.SepiaFilter.prototype=Object.create(d.AbstractFilter.prototype);d.SepiaFilter.prototype.constructor=d.SepiaFilter;Object.defineProperty(d.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},
set:function(c){this.uniforms.sepia.value=c}});d.TwistFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;",
"   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]};d.TwistFilter.prototype=Object.create(d.AbstractFilter.prototype);d.TwistFilter.prototype.constructor=d.TwistFilter;Object.defineProperty(d.TwistFilter.prototype,
"offset",{get:function(){return this.uniforms.offset.value},set:function(c){this.dirty=!0;this.uniforms.offset.value=c}});Object.defineProperty(d.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(c){this.dirty=!0;this.uniforms.radius.value=c}});Object.defineProperty(d.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(c){this.dirty=!0;this.uniforms.angle.value=c}});d.ColorStepFilter=function(){d.AbstractFilter.call(this);
this.passes=[this];this.uniforms={step:{type:"1f",value:5}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]};d.ColorStepFilter.prototype=Object.create(d.AbstractFilter.prototype);d.ColorStepFilter.prototype.constructor=d.ColorStepFilter;Object.defineProperty(d.ColorStepFilter.prototype,
"step",{get:function(){return this.uniforms.step.value},set:function(c){this.uniforms.step.value=c}});d.DotScreenFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {",
"   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]};d.DotScreenFilter.prototype=Object.create(d.AbstractFilter.prototype);
d.DotScreenFilter.prototype.constructor=d.DotScreenFilter;Object.defineProperty(d.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(c){this.dirty=!0;this.uniforms.scale.value=c}});Object.defineProperty(d.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(c){this.dirty=!0;this.uniforms.angle.value=c}});d.CrossHatchFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",
value:1/512}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {",
"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]};d.CrossHatchFilter.prototype=Object.create(d.AbstractFilter.prototype);d.CrossHatchFilter.prototype.constructor=
d.BlurYFilter;Object.defineProperty(d.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(c){this.uniforms.blur.value=1/7E3*c}});d.RGBSplitFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;",
"uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]};d.RGBSplitFilter.prototype=Object.create(d.AbstractFilter.prototype);
d.RGBSplitFilter.prototype.constructor=d.RGBSplitFilter;Object.defineProperty(d.RGBSplitFilter.prototype,"angle",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(c){this.uniforms.blur.value=1/7E3*c}});"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports.PIXI=d):"undefined"!==typeof define&&define.amd?define(d):this.PIXI=d}).call(this);
(function(){var n={},h=null,l=!0,q=!1;try{"undefined"!==typeof AudioContext?h=new AudioContext:"undefined"!==typeof webkitAudioContext?h=new webkitAudioContext:l=!1}catch(x){l=!1}if(!l)if("undefined"!==typeof Audio)try{new Audio}catch(y){q=!0}else q=!0;if(l){var p="undefined"===typeof h.createGain?h.createGainNode():h.createGain();p.gain.value=1;p.connect(h.destination)}var s=function(){this._volume=1;this._muted=!1;this.usingWebAudio=l;this.noAudio=q;this._howls=[]};s.prototype={volume:function(a){a=
parseFloat(a);if(0<=a&&1>=a){this._volume=a;l&&(p.gain.value=a);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(a=0;a<this._howls[c]._audioNode.length;a++)this._howls[c]._audioNode[a].volume=this._howls[c]._volume*this._volume;return this}return l?p.gain.value:this._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},_setMuted:function(a){this._muted=a;l&&(p.gain.value=a?0:this._volume);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&
!1===this._howls[c]._webAudio)for(var b=0;b<this._howls[c]._audioNode.length;b++)this._howls[c]._audioNode[b].muted=a}};var k=new s,g=null;if(!q)var g=new Audio,u={mp3:!!g.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!g.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!g.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!g.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!g.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(g.canPlayType("audio/x-m4a;")||
g.canPlayType("audio/m4a;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(g.canPlayType("audio/x-mp4;")||g.canPlayType("audio/mp4;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!g.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")};var r=function(a){this._autoplay=a.autoplay||!1;this._buffer=a.buffer||!1;this._duration=a.duration||0;this._format=a.format||null;this._loop=a.loop||!1;this._loaded=!1;this._sprite=a.sprite||{};this._src=a.src||"";this._pos3d=a.pos3d||[0,
0,-.5];this._volume=void 0!==a.volume?a.volume:1;this._urls=a.urls||[];this._rate=a.rate||1;this._model=a.model||null;this._onload=[a.onload||function(){}];this._onloaderror=[a.onloaderror||function(){}];this._onend=[a.onend||function(){}];this._onpause=[a.onpause||function(){}];this._onplay=[a.onplay||function(){}];this._onendTimer=[];this._webAudio=l&&!this._buffer;this._audioNode=[];this._webAudio&&this._setupAudioNode();k._howls.push(this);this.load()};r.prototype={load:function(){var a=this,
c=null;if(!q){for(var b=0;b<a._urls.length;b++){var d,e;if(a._format)d=a._format;else if(e=a._urls[b].toLowerCase().split("?")[0],d=(d=e.match(/.+\.([^?]+)(\?|$)/))&&2<=d.length?d:e.match(/data\:audio\/([^?]+);/))d=d[1];else{a.on("loaderror");return}if(u[d]){c=a._urls[b];break}}if(c){a._src=c;if(a._webAudio)v(a,c);else{var f=new Audio;f.addEventListener("error",function(){f.error&&4===f.error.code&&(s.noAudio=!0);a.on("loaderror",{type:f.error?f.error.code:0})},!1);a._audioNode.push(f);f.src=c;f._pos=
0;f.preload="auto";f.volume=k._muted?0:a._volume*k.volume();n[c]=a;var h=function(){a._duration=Math.ceil(10*f.duration)/10;0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1E3*a._duration]});a._loaded||(a._loaded=!0,a.on("load"));a._autoplay&&a.play();f.removeEventListener("canplaythrough",h,!1)};f.addEventListener("canplaythrough",h,!1);f.load()}return a}}a.on("loaderror")},urls:function(a){return a?(this.stop(),this._urls="string"===typeof a?[a]:a,this._loaded=!1,this.load(),
this):this._urls},play:function(a,c){var b=this;"function"===typeof a&&(c=a);a&&"function"!==typeof a||(a="_default");if(!b._loaded)return b.on("load",function(){b.play(a,c)}),b;if(!b._sprite[a])return"function"===typeof c&&c(),b;b._inactiveNode(function(d){d._sprite=a;var e=0<d._pos?d._pos:b._sprite[a][0]/1E3,f=0;b._webAudio?(f=b._sprite[a][1]/1E3-d._pos,0<d._pos&&(e=b._sprite[a][0]/1E3+e)):f=b._sprite[a][1]/1E3-(e-b._sprite[a][0]/1E3);var g=!(!b._loop&&!b._sprite[a][2]),m="string"===typeof c?c:
Math.round(Date.now()*Math.random())+"",l;(function(){l=setTimeout(function(){!b._webAudio&&g&&b.stop(m).play(a,m);b._webAudio&&!g&&(b._nodeById(m).paused=!0,b._nodeById(m)._pos=0);b._webAudio||g||b.stop(m);b.on("end",m)},1E3*f);b._onendTimer.push({timer:l,id:m})})();if(b._webAudio){var n=b._sprite[a][0]/1E3,p=b._sprite[a][1]/1E3;d.id=m;d.paused=!1;w(b,[g,n,p],m);b._playStart=h.currentTime;d.gain.value=b._volume;"undefined"===typeof d.bufferSource.start?d.bufferSource.noteGrainOn(0,e,f):d.bufferSource.start(0,
e,f)}else if(4===d.readyState||!d.readyState&&navigator.isCocoonJS)d.readyState=4,d.id=m,d.currentTime=e,d.muted=k._muted||d.muted,d.volume=b._volume*k.volume(),setTimeout(function(){d.play()},0);else return b._clearEndTimer(m),function(){var e=a,f=c,g=function(){b.play(e,f);d.removeEventListener("canplaythrough",g,!1)};d.addEventListener("canplaythrough",g,!1)}(),b;b.on("play");"function"===typeof c&&c(m);return b});return b},pause:function(a){var c=this;if(!c._loaded)return c.on("play",function(){c.pause(a)}),
c;c._clearEndTimer(a);var b=a?c._nodeById(a):c._activeNode();if(b)if(b._pos=c.pos(null,a),c._webAudio){if(!b.bufferSource||b.paused)return c;b.paused=!0;"undefined"===typeof b.bufferSource.stop?b.bufferSource.noteOff(0):b.bufferSource.stop(0)}else b.pause();c.on("pause");return c},stop:function(a){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(a);var b=a?c._nodeById(a):c._activeNode();if(b)if(b._pos=0,c._webAudio){if(!b.bufferSource||b.paused)return c;b.paused=
!0;"undefined"===typeof b.bufferSource.stop?b.bufferSource.noteOff(0):b.bufferSource.stop(0)}else isNaN(b.duration)||(b.pause(),b.currentTime=0);return c},mute:function(a){var c=this;if(!c._loaded)return c.on("play",function(){c.mute(a)}),c;var b=a?c._nodeById(a):c._activeNode();b&&(c._webAudio?b.gain.value=0:b.muted=!0);return c},unmute:function(a){var c=this;if(!c._loaded)return c.on("play",function(){c.unmute(a)}),c;var b=a?c._nodeById(a):c._activeNode();b&&(c._webAudio?b.gain.value=c._volume:
b.muted=!1);return c},volume:function(a,c){var b=this;a=parseFloat(a);if(0<=a&&1>=a){b._volume=a;if(!b._loaded)return b.on("play",function(){b.volume(a,c)}),b;var d=c?b._nodeById(c):b._activeNode();d&&(b._webAudio?d.gain.value=a:d.volume=a*k.volume());return b}return b._volume},loop:function(a){return"boolean"===typeof a?(this._loop=a,this):this._loop},sprite:function(a){return"object"===typeof a?(this._sprite=a,this):this._sprite},pos:function(a,c){var b=this;if(!b._loaded)return b.on("load",function(){b.pos(a)}),
"number"===typeof a?b:b._pos||0;a=parseFloat(a);var d=c?b._nodeById(c):b._activeNode();if(d)return 0<=a?(b.pause(c),d._pos=a,b.play(d._sprite,c),b):b._webAudio?d._pos+(h.currentTime-b._playStart):d.currentTime;if(0<=a)return b;for(d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState)return b._webAudio?b._audioNode[d]._pos:b._audioNode[d].currentTime},pos3d:function(a,c,b,d){var e=this;c="undefined"!==typeof c&&c?c:0;b="undefined"!==typeof b&&b?b:-.5;if(!e._loaded)return e.on("play",
function(){e.pos3d(a,c,b,d)}),e;if(0<=a||0>a){if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,c,b],f.panner.setPosition(a,c,b),f.panner.panningModel=e._model||"HRTF")}}else return e._pos3d;return e},fade:function(a,c,b,d,e){var f=this,g=Math.abs(a-c),h=a>c?"down":"up",g=g/.01,l=b/g;if(!f._loaded)return f.on("load",function(){f.fade(a,c,b,d,e)}),f;f.volume(a,e);for(var k=1;k<=g;k++)(function(){var a=Math.round(1E3*(f._volume+("up"===h?.01:-.01)*k))/1E3;setTimeout(function(){f.volume(a,
e);a===c&&d&&d()},l*k)})()},fadeIn:function(a,c,b){return this.volume(0).play().fade(0,a,c,b)},fadeOut:function(a,c,b,d){var e=this;return e.fade(e._volume,a,c,function(){b&&b();e.pause(d);e.on("end")},d)},_nodeById:function(a){for(var c=this._audioNode[0],b=0;b<this._audioNode.length;b++)if(this._audioNode[b].id===a){c=this._audioNode[b];break}return c},_activeNode:function(){for(var a=null,c=0;c<this._audioNode.length;c++)if(!this._audioNode[c].paused){a=this._audioNode[c];break}this._drainPool();
return a},_inactiveNode:function(a){for(var c=null,b=0;b<this._audioNode.length;b++)if(this._audioNode[b].paused&&4===this._audioNode[b].readyState){a(this._audioNode[b]);c=!0;break}this._drainPool();if(!c){var d;if(this._webAudio)d=this._setupAudioNode(),a(d);else{this.load();d=this._audioNode[this._audioNode.length-1];var e=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",f=function(){d.removeEventListener(e,f,!1);a(d)};d.addEventListener(e,f,!1)}}},_drainPool:function(){var a=0,c;for(c=0;c<
this._audioNode.length;c++)this._audioNode[c].paused&&a++;for(c=this._audioNode.length-1;0<=c&&!(5>=a);c--)this._audioNode[c].paused&&(this._webAudio&&this._audioNode[c].disconnect(0),a--,this._audioNode.splice(c,1))},_clearEndTimer:function(a){for(var c=0,b=0;b<this._onendTimer.length;b++)if(this._onendTimer[b].id===a){c=b;break}if(a=this._onendTimer[c])clearTimeout(a.timer),this._onendTimer.splice(c,1)},_setupAudioNode:function(){var a=this._audioNode,c=this._audioNode.length;a[c]="undefined"===
typeof h.createGain?h.createGainNode():h.createGain();a[c].gain.value=this._volume;a[c].paused=!0;a[c]._pos=0;a[c].readyState=4;a[c].connect(p);a[c].panner=h.createPanner();a[c].panner.panningModel=this._model||"equalpower";a[c].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]);a[c].panner.connect(a[c]);return a[c]},on:function(a,c){var b=this["_on"+a];if("function"===typeof c)b.push(c);else for(var d=0;d<b.length;d++)c?b[d].call(this,c):b[d].call(this);return this},off:function(a,
c){for(var b=this["_on"+a],d=c.toString(),e=0;e<b.length;e++)if(d===b[e].toString()){b.splice(e,1);break}return this},unload:function(){for(var a=this._audioNode,c=0;c<this._audioNode.length;c++)a[c].paused||this.stop(a[c].id),this._webAudio?a[c].disconnect(0):a[c].src="";for(c=0;c<this._onendTimer.length;c++)clearTimeout(this._onendTimer[c].timer);a=k._howls.indexOf(this);null!==a&&0<=a&&k._howls.splice(a,1);delete n[this._src]}};if(l)var v=function(a,c){if(c in n)a._duration=n[c].duration,t(a);
else{var b=new XMLHttpRequest;b.open("GET",c,!0);b.responseType="arraybuffer";b.onload=function(){h.decodeAudioData(b.response,function(b){b&&(n[c]=b,t(a,b))},function(b){a.on("loaderror")})};b.onerror=function(){a._webAudio&&(a._buffer=!0,a._webAudio=!1,a._audioNode=[],delete a._gainNode,a.load())};try{b.send()}catch(d){b.onerror()}}},t=function(a,c){a._duration=c?c.duration:a._duration;0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1E3*a._duration]});a._loaded||(a._loaded=
!0,a.on("load"));a._autoplay&&a.play()},w=function(a,c,b){b=a._nodeById(b);b.bufferSource=h.createBufferSource();b.bufferSource.buffer=n[a._src];b.bufferSource.connect(b.panner);b.bufferSource.loop=c[0];c[0]&&(b.bufferSource.loopStart=c[1],b.bufferSource.loopEnd=c[1]+c[2]);b.bufferSource.playbackRate.value=a._rate};"function"===typeof define&&define.amd&&define(function(){return{Howler:k,Howl:r}});"undefined"!==typeof exports&&(exports.Howler=k,exports.Howl=r);"undefined"!==typeof window&&(window.Howler=
k,window.Howl=r)})();
(function(){var b=b||{};b.viewporter;b.VERSION="1.2";b.CANVAS=0;b.WEBGL=1;b.AUTO=2;b.HD=640;b.LANDSCAPE=0;b.PORTRAIT=1;b.SCROLL=2E3;var e=null;b._isWebGL=null;b._isCanvas=!1;b._currentRenderer=null;b._isHD=!1;b._isOrientation=!1;b._isTouchable=null;b._isLocalStorage=!1;b._isWebAudio=!1;b._isHtmlAudio=!1;b._isAndroid=!1;b._isChromeOS=!1;b._isiOS=!1;b._isArora=!1;b._isChrome=!1;b._isDolphin=!1;b._isEpiphany=!1;b._isFirefox=!1;b._isMobileSafari=!1;b._isStockAndroid=!1;b._isIE=!1;b._ieVersion=0;b._isMidori=
!1;b._isOpera=!1;b._isSafari=!1;b._isWebApp=!1;b._isWebOS=!1;b._isWindowsPhone=!1;b._isBlackBerry=!1;b._isKindle=!1;b._isCocoonJS=!1;b._pixelRatio=null;b._isiPhone=!1;b._isiPhone4=!1;b._isiPad=!1;b._isDesktop=!1;b._isLinux=!1;b._isMacOS=!1;b._isWindows=!1;b._checkCanvas=function(){try{b._isCanvas=!!window.CanvasRenderingContext2D||navigator.isCocoonJS}catch(a){b._isCanvas=!1}};b._checkWebGL=function(){var a=null;try{var f=document.createElement(navigator.isCocoonJS?"screencanvas":"canvas"),a=!!window.WebGLRenderingContext&&
(f.getContext("experimental-webgl")||f.getContext("webgl"))}catch(c){return b._isWebGL=!1}b._isWebGL=null!=a&&!1!=a?!0:!1};var g=b,l=function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){b._checkCanvas()},!1):b._checkCanvas()}(),m=function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){b._checkWebGL()},!1):b._checkWebGL()}();b._isTouchable="ontouchstart"in window||"onmsgesturechange"in window;try{localStorage.setItem("ENEAtestItem",
"testValue"),localStorage.removeItem("ENEAtestItem"),b._isLocalStorage=!!window.localStorage}catch(q){b._isLocalStorage=!1}var n=b._isWebAudio=!!window.AudioContext||!!window.webkitAudioContext||!!window.mozAudioContext,p=b._isHtmlAudio=!!document.createElement("audio").canPlayType&&!!window.Audio,r=function(){var a=navigator.userAgent;/Android/.test(a)?b._isAndroid=!0:/CrOS/.test(a)?b._isChromeOS=!0:/iP[ao]d|iPhone/i.test(a)?b._isiOS=!0:/Linux/.test(a)?b._isLinux=!0:/Mac OS/.test(a)?b._isMacOS=!0:
/Windows/.test(a)&&(b._isWindows=!0);if(b._isWindows||b._isMacOS||b._isLinux&&0>a.indexOf("Silk"))b._isDesktop=!0}(),s=function(){var a=navigator.userAgent;/Arora/.test(a)?b._isArora=!0:/Dolfin/.test(a)?b._isDolphin=!0:/Chrome/.test(a)?b._isChrome=!0:/Epiphany/.test(a)?b._isEpiphany=!0:/Firefox/.test(a)?b._isFirefox=!0:/Mobile/.test(a)?/Safari/.test(a)&&(b._isMobileSafari=!0):/Linux/.test(a)&&(-1<a.indexOf("Silk")||-1<a.indexOf("Kindle"))?b._isKindle=!0:-1<a.indexOf("Mozilla/5.0")&&(-1<a.indexOf("Android")||
-1<a.indexOf("Linux"))&&-1<a.indexOf("AppleWebKit")&&!(-1<a.indexOf("Chrome"))?b._isStockAndroid=!0:/MSIE (\d+\.\d+);/.test(a)?(b._isIE=!0,b._ieVersion=parseInt(RegExp.$1,10)):/Trident\/(\d+\.\d+);/.test(a)?(b._isIE=!0,b._ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(a)?b._isMidori=!0:/Opera/.test(a)?b._isOpera=!0:/Safari/.test(a)?b._isSafari=!0:/webos/i.test(a)?b._isWebOS=!0:/Windows Phone/i.test(a)?b._isWindowsPhone=!0:/BlackBerry/i.test(a)&&(b._isBlackBerry=!0);navigator.standalone&&(b._isWebApp=
!0);b._isCocoonJS=navigator.isCocoonJS?!0:!1}(),t=function(){b._pixelRatio=window.devicePixelRatio||1;b._isiPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone");b._isiPhone4=2==this.pixelRatio&&this.iPhone;b._isiPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad")}();b._screen={width:window.screen.availWidth*b._pixelRatio,height:window.screen.availHeight*b._pixelRatio};b._isOrientation=window.orientation;Math.min(b._screen.width,b._screen.height)>=b.HD&&(b._isHD=!0);g._checkDevice={_canvas:l,
_webGL:m,_touchDevice:void 0,_localStorage:void 0,_webAudio:n,_htmlAudio:p,_checkOS:r,_checkBrowser:s,_device:t,_detectScreenResolution:void 0};b.Game=function(a,f){e=this;var c=a||{};c.background=a.background||0;c.canvas=a.canvas||null;c.transparent=a.transparent||!1;c.width=a.width||320;c.height=a.height||480;c.forceLandscape=a.forceLandscape||!1;c.forcePortrait=a.forcePortrait||!1;c.noResize=a.noResize||!1;this.container="string"===typeof f?document.getElementById(f):f;this.container||(this.container=
document.body);this._frameEnd=this._frameStart=null;this.width=c.width;this.halfWidth=c.width/2;this.height=c.height;this.halfHeight=c.height/2;isNaN(c.renderer)||c.renderer==b.AUTO?this.renderMethod=b.AUTO:this.renderMethod=c.renderer;this.transparent=c.transparent;this.background=c.background;isNaN(c.interactive)||c.interactive?this.interactive=!0:this.interactive=!1;isNaN(c.antialias)||!c.antialias?this.antialias=!1:this.antialias=!0;this.canvas=c.canvas;this.__updateList=[];isNaN(c.keepAspectRatio)||
c.keepAspectRatio?this.keepAspectRatio=!0:this.keepAspectRatio=!1;this.noResize=c.noResize;isNaN(c.alignHorizontally)||c.alignHorizontally?this.alignHorizontally=!0:this.alignHorizontally=!1;this.aspectRatio=this.width/this.height;if(!b._isDesktop){document.body.style.overflow="visible";var d=document.createElement("div");document.body.appendChild(d)}this.canvas||(this.canvas=document.createElement(navigator.isCocoonJS?"screencanvas":"canvas"));this.stage=new PIXI.Stage(this.background);this.stage.interactive=
this.interactive;this.renderer=this._createRenderer();this.container.appendChild(this.renderer.view);this.renderer.view.style.width=this.width+"px";this.renderer.view.style.height=this.height+"px";this.resize();window.addEventListener("resize",this.resize.bind(this),!1);document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1);document.body.addEventListener("touchstart",function(a){a.preventDefault()},!1);this.forceLandscape=c.forceLandscape;this.forcePortrait=c.forcePortrait;
this.onChangeOrientation=this.onWrongOrientation=null;setTimeout(function(){e.orientation=new b.Orientation},100)};b.Game.prototype._createRenderer=function(){var a=null,f=b._isDesktop?"DESKTOP":"MOBILE";if(this.renderMethod!=b.AUTO&&this.renderMethod!=b.WEBGL||!b._isWebGL){if(this.renderMethod!=b.AUTO&&this.renderMethod!=b.CANVAS||!b._isCanvas)throw Error("ENEA.Game : can't initialize Canvas or WebGL. Try to download newer browser");a=new PIXI.CanvasRenderer(this.width,this.height,this.canvas,this.transparent);
b._currentRenderer=b.CANVAS;console.log("%cENEA v"+b.VERSION+" | "+f+" | CANVAS |","color: #009;")}else a=new PIXI.WebGLRenderer(this.width,this.height,this.canvas,this.transparent,this.antialias),b._currentRenderer=b.WEBGL,console.log("%cENEA v"+b.VERSION+" | "+f+" | WEBGL |","color: #009;");return a};b.Game.prototype.setContextSmoothing=function(a){b._currentRenderer==b.CANVAS&&(this.renderer.context.imageSmoothingEnabled=a,this.renderer.context.mozImageSmoothingEnabled=a,this.renderer.context.oImageSmoothingEnabled=
a,this.renderer.context.webkitImageSmoothingEnabled=a,this.renderer.context.msImageSmoothingEnabled=a)};b.Game.prototype.render=function(){this._frameEnd=Date.now();requestAnimFrame(this.render.bind(this));for(var a in this.__updateList)void 0===this.__updateList[a]||"function"!=typeof this.__updateList[a]||this.__updateList[a].postponed||this.__updateList[a].call();this.renderer.render(this.stage);this._frameStart=Date.now()};b.Game.prototype.getFrameTime=function(){return this._frameEnd-this._frameStart};
b.Game.prototype.addUpdate=function(a,b){if("function"==typeof b)this.__updateList[a]=b,this.__updateList[a].postponed=!1;else throw Error("ENEA.Game.addUpdate : input must be an function");};b.Game.prototype.postponeAllUpdates=function(){for(var a in this.__updateList)this.__updateList[a].postponed=!0};b.Game.prototype.postponeUpdate=function(a){if(void 0!==this.__updateList[a]&&null!==this.__updateList[a])this.__updateList[a].postponed=!0;else throw Error("ENEA.Game.postponeUpdate : update not found");
};b.Game.prototype.reinstateAllUpdates=function(){for(var a in this.__updateList)this.__updateList[a].postponed=!1};b.Game.prototype.reinstateUpdate=function(a){if(void 0!==this.__updateList[a]&&null!==this.__updateList[a])this.__updateList[a].postponed=!1;else throw Error("ENEA.Game.reinstateUpdate : update not found");};b.Game.prototype.removeUpdate=function(a){this.__updateList[a]=null;delete this.__updateList[a]};b.Game.prototype.removeAllUpdates=function(){this.__updateList=[]};b.Game.prototype.resize=
function(){this.noResize||(this.renderer.view.style.width=this.keepAspectRatio||b._isDesktop?window.innerHeight*this.aspectRatio+"px":window.innerWidth+"px",this.renderer.view.style.height=window.innerHeight+"px");this._alignHorizontally()};b.Game.prototype._alignHorizontally=function(){if(this.alignHorizontally){var a=this.renderer.view.style.width,a=parseInt(a.substring(0,a.length-2),10);this.renderer.view.style.marginLeft=Math.floor((window.innerWidth-a)/2)+"px"}else this.renderer.view.style.marginLeft=
"0px"};b.Game.prototype.relativeX=function(a){return Math.floor(this.width*a)};b.Game.prototype.relativeY=function(a){return Math.floor(this.height*a)};Object.defineProperty(b.Game.prototype,"centerX",{get:function(){return Math.floor(this.width/2)}});Object.defineProperty(b.Game.prototype,"centerY",{get:function(){return Math.floor(this.height/2)}});b.Container=function(a,b){PIXI.DisplayObjectContainer.call(this);if(null!=a)if("function"==typeof a)a.call(this,b);else throw Error("ENEA.Container : input needs to be an function");
};b.Container.constructor=b.Container;b.Container.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);Object.defineProperty(PIXI.DisplayObject.prototype,"numChildren",{get:function(){return this.children.length}});b.Container.prototype.removeAllChildren=function(){try{for(;this.children.length;)null!=this.children[0].texture&&this.children[0].texture.destroy(),!this.children[0].destroy||this.children[0]instanceof b.Container||this.children[0].destroy(!0),this.removeChild(this.children[0])}catch(a){throw Error("ENEA.Container.removeAllChildren : can't delete all children");
}};Object.defineProperty(PIXI.DisplayObject.prototype,"responsive",{set:function(a){this.buttonMode=this.interactive=a}});Object.defineProperty(PIXI.DisplayObject.prototype,"scaleX",{get:function(){return this.scale.x},set:function(a){this.scale.x=a}});Object.defineProperty(PIXI.DisplayObject.prototype,"scaleY",{get:function(){return this.scale.y},set:function(a){this.scale.y=a}});Object.defineProperty(PIXI.DisplayObject.prototype,"scaleXY",{set:function(a){this.scale.x=a;this.scale.y=a}});b.Container.prototype.destroy=
function(){this.removeAllChildren();this.parent&&this.parent.removeChild(this)};Object.defineProperty(PIXI.Sprite.prototype,"anchorX",{get:function(){return this.anchor.x},set:function(a){this.anchor.x=a}});Object.defineProperty(PIXI.Sprite.prototype,"anchorY",{get:function(){return this.anchor.y},set:function(a){this.anchor.y=a}});Object.defineProperty(PIXI.Sprite.prototype,"anchorXY",{set:function(a){this.anchor.x=a;this.anchor.y=a}});b.Preloader=function(){if(null==e)throw Error("ENEA.Preloader : ENEA.Game needs to be initialized first");
this.loaded=this.count=0;this.list=[]};b.Preloader.prototype.start=function(){var a=this;this.loader=new PIXI.AssetLoader(this.list);this.loader.onProgress=function(){a.loaded++;if(a.onProgress)a.onProgress()};this.loader.onComplete=function(){if(a.onComplete)a.onComplete()};this.loader.load()};b.Preloader.prototype.add=function(a){this.list.push(a);this.count++};b.Preloader.prototype.addImage=function(a){this.list.push(a);this.count++};b.Preloader.prototype.addBitmapFont=function(a,b){this.list.push(a);
this.count++;this.list.push(b);this.count++};b.Preloader.prototype.addAtlas=function(a,b){this.list.push(a);this.count++;this.list.push(b);this.count++};b.ProgressBar=function(a){if(null==e)throw Error("ENEA.ProgressBar : ENEA.Game needs to be initialized first");this._checkParameters(a);this.loaded=0;this.error=!1;this._x=e.centerX-this.pbParams.width/2;this._y=e.centerY-this.pbParams.height/2;this._step=this.pbParams.width/this.pbParams.count;this.draw();this.update()};b.ProgressBar.prototype._checkParameters=
function(a){var f={width:Math.floor(e.width/1.5),height:2,text:"LOADING",fontFace:"Tahoma",fontSize:"11pt",fontColor:"#FFFFFF",bgColor:8421504,fgColor:16777215,errColor:16711680,count:1};this.pbParams=null==a||"undefined"==a?f:b.mergeParams(f,a)};b.ProgressBar.prototype.draw=function(){this.container=new PIXI.DisplayObjectContainer;e.stage.addChild(this.container);navigator.isCocoonJS||(this.pbText=new PIXI.Text(this.pbParams.text,{font:this.pbParams.fontSize+" "+this.pbParams.fontFace,fill:this.pbParams.fontColor,
align:"center"}),this.pbText.position.x=e.centerX-this.pbText.width/2,this.pbText.position.y=this._y-this.pbText.height-2,this.container.addChild(this.pbText));this.graphics=new PIXI.Graphics;this.graphics.beginFill(this.pbParams.bgColor,1);this.graphics.lineStyle(0,this.pbParams.bgColor,1);this.graphics.drawRect(this._x,this._y,this.pbParams.width,this.pbParams.height);this.graphics.endFill();this.container.addChild(this.graphics)};b.ProgressBar.prototype.update=function(){this.graphics.clear();
this.graphics.beginFill(this.pbParams.bgColor,1);this.graphics.lineStyle(0,this.pbParams.bgColor,1);this.graphics.drawRect(this._x+this._step*this.loaded,this._y,this.pbParams.width-this._step*this.loaded,this.pbParams.height);this.graphics.endFill();this.graphics.beginFill(this.error?this.pbParams.errColor:this.pbParams.fgColor,1);this.graphics.lineStyle(0,this.error?this.pbParams.errColor:this.pbParams.fgColor,1);this.graphics.drawRect(this._x,this._y,this._step*this.loaded,this.pbParams.height);
this.graphics.endFill();if(this.loaded>=this.pbParams.count&&this.onComplete)this.onComplete()};b.ProgressBar.prototype.removeAllChildren=function(){try{for(;this.container.children.length;)this.container.children[0].destroy&&this.container.children[0].destroy(),this.container.removeChild(this.container.children[0])}catch(a){throw Error("ENEA.ProgressBar.removeAllChildren : can't delete all children");}};b.ProgressBar.prototype.destroy=function(){this.graphics.clear();this.removeAllChildren();this.container.parent&&
this.container.parent.removeChild(this.container)};b.Timer=function(){this._isActive=!1;this._addToStartTime=0;this._dirty=!1};b.Timer.prototype.reset=function(){this.timerStart=0;this.timerEnd=null;this.isPaused=!1;this._pauseStart=Date.now();this._pauseTime=0;this._isActive=!1;this._dirty||(this._addToStartTime=0)};b.Timer.prototype.start=function(){this.reset();this._isActive=!0;this.timerStart=Date.now();if(null!==this.onStarted)this.onStarted()};b.Timer.prototype.addStartTime=function(a){this._addToStartTime=
a;this._dirty=!0};b.Timer.prototype.isActive=function(){return this._isActive};b.Timer.prototype.stop=function(){this.isPaused&&this.resume();this._dirty=this._isActive=!1;this.timerEnd=Date.now();if(null!==this.onStopped)this.onStopped()};b.Timer.prototype.pause=function(){if(!this.isPaused&&(this._pauseStart=Date.now(),this.isPaused=!0,null!==this.onPaused))this.onPaused()};b.Timer.prototype.resume=function(){if(this.isPaused&&(this._pauseEnd=Date.now(),this.isPaused=!1,this._pauseTime+=this._pauseEnd-
this._pauseStart,null!==this.onResumed))this.onResumed()};b.Timer.prototype.onStarted=function(){};b.Timer.prototype.onPaused=function(){};b.Timer.prototype.onResumed=function(){};b.Timer.prototype.onStopped=function(){};b.Timer.prototype.getTotalTime=function(){return null==this.timerEnd?!1:this.timerEnd-this.timerStart+this._addToStartTime};b.Timer.prototype.getExecutionTime=function(){var a=Date.now();return this.isPaused?a-this.timerStart-(a-this._pauseStart)+this._addToStartTime-this._pauseTime:
null==this.timerEnd?a-this.timerStart-this._pauseTime+this._addToStartTime:this.timerEnd-this.timerStart-this._pauseTime+this._addToStartTime};b.Emitter=function(a){var f={spawnTime:1,maxParticles:20,x:0,y:0,dxInterval:[-.5,.5],dyInterval:[-.5,.5],liveInterval:[500,1E3],frameRate:60};this.params=null==a||"undefined"==a?f:b.mergeParams(f,a);this._now=this._delta=null;this._then=Date.now();this._emiting=!1;this._currentSpawned=this._lastSpawned=null;this.frameRate=this.params.frameRate;this._spawnTime=
this.params.spawnTime;this.maxParticles=this.params.maxParticles;this.x=this.params.x;this.y=this.params.y;this.particles=Array(this.maxParticles)};b.Emitter.prototype.init=function(){for(var a=0;a<this.maxParticles;a++)this.particles[a]=this.createParticle()};b.Emitter.prototype.initDead=function(){for(var a=0;a<this.maxParticles;a++)this.particles[a]=this.createParticle(),this.particles[a].dead=!0};b.Emitter.prototype.createParticle=function(){return{x:this.x,y:this.y,dx:b.randomInterval(this.params.dxInterval[0],
this.params.dxInterval[1]),dy:b.randomInterval(this.params.dyInterval[0],this.params.dyInterval[1]),dead:!1,live:b.randomInterval(this.params.liveInterval[0],this.params.liveInterval[1])}};b.Emitter.prototype.setDxInterval=function(a,b){this.params.dxInterval[0]=a;this.params.dxInterval[1]=b};b.Emitter.prototype.setDyInterval=function(a,b){this.params.dyInterval[0]=a;this.params.dyInterval[1]=b};b.Emitter.prototype.setLiveInterval=function(a,b){this.params.liveInterval[0]=a;this.params.liveInterval[1]=
b};b.Emitter.prototype.update=function(){this._now=Date.now();this._delta=this._now-this._then;for(var a=0;a<this.maxParticles;a++)this.particles[a].live-=this._delta,0<this.particles[a].live?(this.particles[a].x+=this.calculate(this._delta,this.particles[a].dx),this.particles[a].y+=this.calculate(this._delta,this.particles[a].dy)):this._emiting?(this._currentSpawned=Date.now(),this._currentSpawned-this._lastSpawned>this._spawnTime&&(this._lastSpawned=this._currentSpawned,this.particles[a]=this.createParticle())):
this.particles[a].dead=!0;this._then=this._now};b.Emitter.prototype.calculate=function(a,b){return this.frameRate/1E3*a*b};b.Emitter.prototype.start=function(){this._emiting=!0};b.Emitter.prototype.stop=function(){this._emiting=!1};b.createCanvas=function(a){var f={id:"eneaDefaultCanvas",width:2,height:2,border:"1px solid",display:"none"};this.params=null==a||"undefined"==a?f:b.mergeParams(f,a);this.canvas=document.createElement(b._isCocoonJS?"screencanvas":"canvas");this.canvas.id=this.params.id;
this.canvas.width=this.params.width;this.canvas.height=this.params.height;this.canvas.style.border=this.params.border;this.canvas.style.display=this.params.display;document.body.appendChild(this.canvas);this.context=this.canvas.getContext("2d");null==this.context&&console.log("ENEA.createCanvas error : context is null")};b.createCanvas.prototype.getTexture=function(){return PIXI.Texture.fromCanvas(this.canvas)};b.createCanvas.prototype.destroy=function(){this.canvas.parentNode.removeChild(this.canvas)};
b.randomInterval=function(a,b){return Math.random()*(b-a)+a};b.Orientation=function(){if(!b._isDesktop){if(isNaN(b._isOrientation))throw Error("ENEA.Orientation : device doesn't support window.orientation method");this.check();var a=this;window.addEventListener("orientationchange",function(){a.check();a.onChangeOrientation()},!1)}};b.Orientation.prototype.check=function(){if(90===Math.abs(window.orientation)){if(e._isLandscape=!0,e._isPortrait=!1,e.forcePortrait)this.onWrongOrientation()}else if(e._isPortrait=
!0,e._isLandscape=!1,e.forceLandscape)this.onWrongOrientation()};b.Orientation.prototype.onWrongOrientation=function(){if("function"==typeof e.onWrongOrientation)e.onWrongOrientation()};b.Orientation.prototype.onChangeOrientation=function(){e.resize();if("function"==typeof e.onChangeOrientation)e.onChangeOrientation()};b.Language=function(){this._defaultLanguage="en";this.languageDirectoryPath="lang/";this.forceLanguage=null;this._isAddressBarLang=!1;this._langsrc=this._language=null};b.Language.prototype._checkAddressBar=
function(){try{var a=window.location.href.split("?");1!=a.length&&(a=a[1].split("="),"lang"==a[0]&&""!=a[1]&&(this._isAddressBarLang=!0,this._language=a[1]))}catch(b){console.log("Error : "+b)}return this._isAddressBarLang};b.Language.prototype.start=function(){var a=document.createElement("script");a.type="text/javascript";this._langsrc=this.languageDirectoryPath;this._langsrc=null!=this.forceLanguage?this._langsrc+this.forceLanguage:this._langsrc+(this._checkAddressBar()?this._language:this._defaultLanguage);
this._langsrc+=".js";a.src=this._langsrc;var b=this;a.onload=function(){if("function"==typeof b.onLoad)b.onLoad()};document.getElementsByTagName("head")[0].appendChild(a)};b.fadeElement=function(a,f,c,d,h,e){var g={alpha:f},k={alpha:c,time:d,onStart:function(){h&&h.call()},onUpdate:function(){a.alpha=b.normalize(g.alpha)},onComplete:function(){a.alpha=k.alpha;e&&e.call()},transition:"linear"};b.Tweener.addTween(g,k)};b.hideAddressBar=function(){b._isCocoonjs||(b.viewporter.preventPageScroll=!0,b.viewporter.forceDetection=
!0,b.viewporter.refresh());e.resize()};b.randomString=function(){return Math.floor(Date.now()*Math.random()).toString()};b.normalize=function(a){return 1<a?1:0>a?0:a};b.mergeParams=function(a,b){for(var c in a)for(var d in b)c==d&&null!=b[d]&&(a[c]=b[d]);return a};b.Tweener={twns:[],looping:!1,_ptime:0,def:{time:1,transition:"easeOutExpo",delay:0,onStart:null,onStartParams:null,onUpdate:null,onUpdateParams:null,onComplete:null,onCompleteParams:null}};b.Tweener.addTween=function(a,f){var c=b.Tweener,
d={},h=[],e=[],g=[],k;for(k in c.def)d[k]=f[k]?f[k]:c.def[k];for(k in f)c.def[k]||(h.push(a[k]),e.push(f[k]-a[k]),g.push(k));if(d.onStart)if(d.onStartParams)d.onStart.apply(null,d.onStartParams);else d.onStart();c.twns.push(new c.Tween(a,d,h,e,g));c.loop()};b.Tweener.removeAll=function(){b.Tweener.twns=[]};b.Tweener.isTweening=function(){return 0==b.Tweener.twns.length?!1:!0};b.Tweener.loop=function(){var a=b.Tweener;a.looping||(a._ptime=Date.now(),requestAnimFrame(a.step));a.looping=!0};b.Tweener.step=
function(){var a=b.Tweener,f=a._ptime;a._ptime=Date.now();for(var f=a._ptime-f,c=0;c<a.twns.length;c++){var d=a.twns[c];if(0<d.tp.delay)d.tp.delay-=f;else{d.t+=f;for(var h=d.tp.time,e=0;e<d.prms.length;e++)d.obj[d.prms[e]]=d.t>h?d.bgns[e]+d.cngs[e]:b.Tweener.easingFunctions[d.tp.transition](d.t,d.bgns[e],d.cngs[e],h);if(d.tp.onUpdate)if(d.tp.onUpdateParams)d.tp.onUpdate.apply(null,d.tp.onUpdateParams);else d.tp.onUpdate();if(d.t>h&&(a.twns.splice(c--,1),d.tp.onComplete))if(d.tp.onCompleteParams)d.tp.onComplete.apply(null,
d.tp.onCompleteParams);else d.tp.onComplete()}}0<a.twns.length?requestAnimFrame(a.step):a.looping=!1};null==window.requestAnimFrame&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}());b.Tweener.Tween=function(a,b,c,d,h){this.t=0;this.obj=a;this.tp=b;this.bgns=c;this.cngs=d;this.prms=h};b.Tweener.easingFunctions=
{easeNone:function(a,b,c,d){return c*a/d+b},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeOutInCubic:function(a,f,c,d){return a<d/2?b.Tweener.easingFunctions.easeOutCubic(2*
a,f,c/2,d):b.Tweener.easingFunctions.easeInCubic(2*a-d,f+c/2,c/2,d)},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeOutInQuart:function(a,f,c,d){return a<d/2?b.Tweener.easingFunctions.easeOutQuart(2*a,f,c/2,d):b.Tweener.easingFunctions.easeInQuart(2*a-d,f+c/2,c/2,d)},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,
b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeOutInQuint:function(a,f,c,d){return a<d/2?b.Tweener.easingFunctions.easeOutQuint(2*a,f,c/2,d):b.Tweener.easingFunctions.easeInQuint(2*a-d,f+c/2,c/2,d)},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeOutInSine:function(a,
f,c,d){return a<d/2?b.Tweener.easingFunctions.easeOutSine(2*a,f,c/2,d):b.Tweener.easingFunctions.easeInSine(2*a-d,f+c/2,c/2,d)},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b-.001*c},easeOutExpo:function(a,b,c,d){return a==d?b+c:1.001*c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return 0==a?b:a==d?b+c:1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b-5E-4*c:c/2*1.0005*(-Math.pow(2,-10*--a)+2)+b},easeOutInExpo:function(a,f,c,d){return a<d/2?b.Tweener.easingFunctions.easeOutExpo(2*
a,f,c/2,d):b.Tweener.easingFunctions.easeInExpo(2*a-d,f+c/2,c/2,d)},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return 1>(a/=d/2)?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeOutInCirc:function(a,f,c,d){return a<d/2?b.Tweener.easingFunctions.easeOutCirc(2*a,f,c/2,d):b.Tweener.easingFunctions.easeInCirc(2*a-d,f+c/2,c/2,d)},easeInElastic:function(a,b,c,d,h,e){if(0==
a)return b;if(1==(a/=d))return b+c;e||(e=.33*d);!h||h<Math.abs(c)?(h=c,c=e/4):c=e/(2*Math.PI)*Math.asin(c/h);return-(h*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-c)*Math.PI/e))+b},easeOutElastic:function(a,b,c,d,e,g){var l;if(0==a)return b;if(1==(a/=d))return b+c;g||(g=.33*d);!e||e<Math.abs(c)?(e=c,l=g/4):l=g/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin(2*(a*d-l)*Math.PI/g)+c+b},easeInOutElastic:function(a,b,c,d,e,g){var l;if(0==a)return b;if(2==(a/=d/2))return b+c;g||(g=.495*d);!e||
e<Math.abs(c)?(e=c,l=g/4):l=g/(2*Math.PI)*Math.asin(c/e);return 1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-l)*Math.PI/g)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-l)*Math.PI/g)*.5+c+b},easeOutInElastic:function(a,f,c,d,e,g){return a<d/2?b.Tweener.easingFunctions.easeOutElastic(2*a,f,c/2,d,e,g):b.Tweener.easingFunctions.easeInElastic(2*a-d,f+c/2,c/2,d,e,g)},easeInBack:function(a,b,c,d,e){void 0==e&&(e=1.70158);return c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){void 0==e&&(e=1.70158);
return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){void 0==e&&(e=1.70158);return 1>(a/=d/2)?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeOutInBack:function(a,e,c,d,g){return a<d/2?b.Tweener.easingFunctions.easeOutBack(2*a,e,c/2,d,g):b.Tweener.easingFunctions.easeInBack(2*a-d,e+c/2,c/2,d,g)},easeInBounce:function(a,e,c,d){return c-b.Tweener.easingFunctions.easeOutBounce(d-a,0,c,d)+e},easeOutBounce:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*
a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(a,e,c,d){return a<d/2?.5*b.Tweener.easingFunctions.easeInBounce(2*a,0,c,d)+e:.5*b.Tweener.easingFunctions.easeOutBounce(2*a-d,0,c,d)+.5*c+e},easeOutInBounce:function(a,e,c,d){return a<d/2?b.Tweener.easingFunctions.easeOutBounce(2*a,e,c/2,d):b.Tweener.easingFunctions.easeInBounce(2*a-d,e+c/2,c/2,d)}};b.Tweener.easingFunctions.linear=b.Tweener.easingFunctions.easeNone;
b.debug=function(){console.log("---------------------------");for(var a in b)b.hasOwnProperty(a)&&("function"==typeof b[a]?console.log("%c"+a+" : function","color: #00b"):"object"==typeof b[a]?console.log("%c"+a+" : object","color: #0b0"):console.log(a+" : "+b[a]));console.log("---------------------------")};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports.ENEA=b):this.ENEA=b}).call(this);
(function(){var b;ENEA.viewporter={forceDetection:!1,disableLegacyAndroid:!0,ACTIVE:function(){return ENEA.viewporter.disableLegacyAndroid&&/android 2/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent)?!1:/webos/i.test(navigator.userAgent)||"ontouchstart"in window?!0:!1},READY:!1,isLandscape:function(){return 90===window.orientation||-90===window.orientation},ready:function(b){window.addEventListener("viewportready",b,!1)},change:function(b){window.addEventListener("viewportchange",b,
!1)},refresh:function(){b&&b.prepareVisualViewport()},preventPageScroll:function(){document.body.addEventListener("touchmove",function(b){b.preventDefault()},!1);document.body.addEventListener("touchstart",function(){b.prepareVisualViewport()},!1)}};ENEA.viewporter.ACTIVE=ENEA.viewporter.ACTIVE();if(ENEA.viewporter.ACTIVE){var e=function(){var b=this;this.IS_ANDROID=/Android/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);var e=function(){b.prepareVisualViewport();var e=window.orientation;
window.addEventListener("orientationchange",function(){window.orientation!==e&&(b.prepareVisualViewport(),e=window.orientation)},!1)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e()},!1):e()};e.prototype={getProfile:function(){if(ENEA.viewporter.forceDetection)return null;for(var b in ENEA.viewporter.profiles)if((new RegExp(b)).test(navigator.userAgent))return ENEA.viewporter.profiles[b];return null},postProcess:function(){ENEA.viewporter.READY=!0;this.triggerWindowEvent(this._firstUpdateExecuted?
"viewportchange":"viewportready");this._firstUpdateExecuted=!0},prepareVisualViewport:function(){var b=this;if(navigator.standalone)return this.postProcess();document.documentElement.style.minHeight="5000px";var e=window.innerHeight,m=this.getProfile(),q=ENEA.viewporter.isLandscape()?"landscape":"portrait";window.scrollTo(0,b.IS_ANDROID?1:0);var n=40,p=window.setInterval(function(){window.scrollTo(0,b.IS_ANDROID?1:0);n--;if((b.IS_ANDROID?m&&window.innerHeight===m[q]:window.innerHeight>e)||0>n)document.documentElement.style.minHeight=
window.innerHeight+"px",document.getElementById("viewporter").style.position="relative",document.getElementById("viewporter").style.height=window.innerHeight+"px",clearInterval(p),b.postProcess()},10)},triggerWindowEvent:function(b){var e=document.createEvent("Event");e.initEvent(b,!1,!1);window.dispatchEvent(e)}};b=new e}})();
ENEA.viewporter.profiles={"iPhone|iPod":{ppi:function(){return 2<=window.devicePixelRatio?326:163},width:function(b,e){return b*window.devicePixelRatio},height:function(b,e){return e*window.devicePixelRatio},chromePrescale:function(b,e,g){return 2<=window.devicePixelRatio?(navigator.standalone?0:ENEA.viewporter.isLandscape()?100:124)*g+2:(navigator.standalone?0:ENEA.viewporter.isLandscape()?50:62)*g+2}},iPad:{ppi:132,chrome:function(b,e){return navigator.standalone?0:/OS 5_/.test(navigator.userAgent)?
96:78}},"GT-I9000|GT-I9100|Nexus S":{ppi:function(){if(/GT-I9000/.test(navigator.userAgent)||/GT-I9100/.test(navigator.userAgent))return 239.3;if(/Nexus S/.test(navigator.userAgent))return 239},width:800,height:480,chrome:38},MZ601:{ppi:160,portrait:{width:function(b,e){return e},height:function(b,e){return b}},chrome:152,inverseLandscape:!0},"GT-P1000":{width:1024,height:600,portrait:{chrome:38}},"Desire_A8181|DesireHD_A9191":{width:800,height:480},TF101:{ppi:160,portrait:{width:function(b,e){return e},
height:function(b,e){return b}},chrome:103,inverseLandscape:!0},A500:{portrait:{width:function(b,e){return e},height:function(b,e){return b}},inverseLandscape:!0}};
(function(){var b=b||{};b.FADETIME=250;var a,S=1/45,$=100*S,L=ENEA._isHD?9.81:3.924,H=ENEA._isHD?7:2.8,T=ENEA._isHD?5:1.6,U=ENEA._isHD?4:2,M=!1,N=!1,u=ENEA._isHD?4:2,k=0,I,s=!1,V=null,C=[],J,K,t,O,P,D=null,p=null,e=null,f=null,g=null,w=null,x=null,y=null,z=null,l=null,A=null,E=null,m=null,n=null,F=null,Q=null,R=null,W=null,X=null,Y=null,h=null,r=null,G=null,q=null,B="",Z={fontPNG:ENEA._isHD?"media/fb64.png":"media/fb32.png",fontFNT:ENEA._isHD?"media/fontb64.fnt":"media/fontb32.fnt",atlas:ENEA._isHD?
"media/fb64.json":"media/fb32.json"};b.init=function(){a=new ENEA.Game({width:ENEA._isHD?640:256,height:ENEA._isHD?960:384,background:3947580,keepAspectRatio:!1,forcePortrait:!0},"FB-game-container");window.addEventListener("viewportready",function(){ENEA.hideAddressBar()},!1);a.setContextSmoothing(!0);a.render();b.preload()};var v;b.preload=function(){var a=new ENEA.Preloader,d;for(d in Z)a.add(Z[d]);v=new ENEA.ProgressBar({text:"Loading... ",fontSize:ENEA._isHD?"15pt":"11pt",count:a.count+1});a.onProgress=
function(){v.loaded++;v.update()};v.onComplete=b.onLoad;C=new Howl({urls:["sounds/sounds.m4a","sounds/sounds.ogg","sounds/sounds.wav"],sprite:{flap:[2400,300],hit:[1E3,400],menu:[5500,600],point:[3700,800]},onload:function(){a.onProgress()},onloaderror:function(){a.onProgress();console.log("Problem loading sounds")}});a.start()};window.addEventListener("touchstart",function(){this.removeEventListener("touchstart",arguments.callee,!1);try{window.AudioContext=window.AudioContext||window.webkitAudioContext;
var a=new AudioContext,b=a.createBuffer(1,1,22050),e=a.createBufferSource();e.buffer=b;e.connect(a.destination);e.noteOn(0);setTimeout(function(){},500)}catch(g){console.log("Web Audio API is not supported")}},!1);b.onLoad=function(){I=ENEA._isHD?{font:"55px fontb",align:"right"}:{font:"22px fontb",align:"right"};ENEA.fadeElement(v.container,1,0,b.FADETIME,null,function(){v.destroy();v=null;setTimeout(function(){b.initGameStuff();b.initGameContainer();b.menu()},100)})};b.Pipe=function(){this.offset=
a.relativeY(.2);this.gap=ENEA._isHD?a.relativeY(.09):a.relativeY(.1);this.position={x:0,y:0};this.body=new ENEA.Container;this.texture=new PIXI.Texture.fromFrame("pipe.png");this.bodyTop=new PIXI.Sprite(this.texture);this.bodyTop.anchorX=0;this.bodyTop.anchorY=1;this.bodyTop.x=this.position.x;this.bodyTop.y=this.position.y-this.gap;this.body.addChild(this.bodyTop);this.bodyBottom=new PIXI.Sprite(this.texture);this.bodyBottom.anchorX=0;this.bodyBottom.anchorY=0;this.bodyBottom.x=this.position.x;this.bodyBottom.y=
this.position.y+this.gap;this.body.addChild(this.bodyBottom);this.width=this.body.getBounds().width;this.halfWidth=this.width/2};b.Player=function(){this._Fy=0;this.position={x:a.relativeX(.33),y:a.centerY};this.velocity=1E-5;this.frameDimensions=ENEA._isHD?86:43;this.frameDimensions3=this.frameDimensions/3;this.frameDimensions4=this.frameDimensions/4;this._now=this._delta=null;this._then=Date.now();this.frameRate=60;this.currentFrame=0;this.owlTextures=[];for(var c=0;3>c;c++){var b=PIXI.Texture.fromFrame("bird"+
(c+1)+".png");this.owlTextures.push(b);this.owlTextures.push(b);this.owlTextures.push(b);this.owlTextures.push(b)}b=PIXI.Texture.fromFrame("bird2.png");this.owlTextures.push(b);this.owlTextures.push(b);this.owlTextures.push(b);this.owlTextures.push(b);this.body=new PIXI.MovieClip(this.owlTextures);this.body.loop=!1;this.body.anchorXY=.5;this.body.x=this.position.x;this.body.y=this.position.y;this.radius=this.frameDimensions/2;this.collisionRadius=this.frameDimensions/2-8};b.Player.prototype.update=
function(){this._Fy=-.5*this.velocity*this.velocity*this.velocity/Math.abs(this.velocity);this.velocity+=(L+this._Fy)*S;this.position.y+=this.velocity*$;this.body.y=this.position.y;this.body.rotation=this.velocity/T};b.Player.prototype.updateAnimation=function(){this._now=Date.now();this._delta=this._now-this._then;this.currentFrame+=Math.round(this._delta*this.frameRate/1E3);this.body.gotoAndStop(this.currentFrame);this._then=this._now};b.mouseDown=function(){s&&(_player.velocity-=H,ENEA._isIE||
C.play("flap"))};b.mouseUp=function(){};b.keyDown=function(a){if(32==(a.keycode||a.which)){switch(B){case "menu":b.game();break;case "game":b.mouseDown();break;case "end":b.menu()}a.preventDefault()}};b.keyUp=function(a){if(32==(a.keycode||a.which)){switch(B){case "game":b.mouseUp()}a.preventDefault()}};b.resetBBs=function(){t=new PIXI.Circle(0,0,1);new PIXI.Rectangle(2,2,1,1);O=new PIXI.Rectangle(4,4,1,1);P=new PIXI.Rectangle(6,6,1,1)};b.initGameStuff=function(){b.resetBBs();_player=new b.Player;
var c=PIXI.Texture.fromFrame("sky.png");D=new PIXI.Sprite(c);D.anchorXY=0;D.x=0;D.y=0;c=PIXI.Texture.fromFrame("ground.png");p=new PIXI.Sprite(c);p.x=0;p.y=a.height-p.height;_groundSprite2=new PIXI.Sprite(c);_groundSprite2.x=a.width;_groundSprite2.y=p.y;e=new b.Pipe;f=new b.Pipe;c=PIXI.Texture.fromFrame("getready.png");l=new PIXI.Sprite(c);l.anchorXY=.5;l.x=a.centerX;l.y=a.relativeY(.2);g=new PIXI.BitmapText(k.toString(),I);g.x=a.centerX-g.textWidth/2;g.y=a.relativeY(.01)+g.textHeight/2;c=PIXI.Texture.fromFrame("white.png");
q=new PIXI.Sprite(c);q.anchorXY=.5;q.scaleXY=10.1;q.x=a.centerX;q.y=a.centerY;if(null!==a.titleScreen||"undefined"!==a.titleScreen)a.titleScreen=new ENEA.Container;c=PIXI.Texture.fromFrame("logo.png");w=new PIXI.Sprite(c);w.anchorXY=.5;w.x=a.centerX;w.y=a.relativeY(.15);a.titleScreen.addChild(w);c=PIXI.Texture.fromFrame("tap.png");x=new PIXI.Sprite(c);x.anchorX=.3;x.anchorY=.9;x.x=a.centerX+a.relativeX(.011);x.y=a.centerY+a.relativeY(.05);a.titleScreen.addChild(x);c=PIXI.Texture.fromFrame("start.png");
A=new PIXI.Sprite(c);A.anchorX=.5;A.anchorY=.5;A.x=a.centerX;A.y=a.relativeY(.72);a.titleScreen.addChild(A);a.titleScreen.hitArea=new PIXI.Rectangle(0,0,a.width,a.height);a.titleScreen.responsive=!0;a.titleScreen.click=a.titleScreen.tap=function(){b.game()};a.moreGames=new ENEA.Container;c=PIXI.Texture.fromFrame("moregames.png");c=new PIXI.Sprite(c);c.anchorX=.5;c.anchorY=.5;c.x=a.centerX;c.y=a.relativeY(.8);c.responsive=!0;c.click=c.tap=function(a){window.open("http://m.silvergames.com","_blank")};
a.moreGames.addChild(c);if(null!==a.endScreen||"undefined"!==a.endScreen)a.endScreen=new ENEA.Container;c=PIXI.Texture.fromFrame("gameover.png");z=new PIXI.Sprite(c);z.anchorXY=.5;z.x=a.centerX;z.y=a.relativeY(.25);a.endScreen.addChild(z);G=PIXI.Texture.fromFrame("table.png");E=new PIXI.Sprite(G);E.anchorXY=.5;E.x=a.centerX;E.y=a.centerY;a.endScreen.addChild(E);F=Q=a.relativeX(.33);m=new PIXI.BitmapText("0",I);m.x=a.centerX-m.textWidth+F;m.y=a.centerY+a.relativeY(-.072);a.endScreen.addChild(m);R=
PIXI.Texture.fromFrame("medal0.png");W=PIXI.Texture.fromFrame("medal1.png");X=PIXI.Texture.fromFrame("medal2.png");Y=PIXI.Texture.fromFrame("medal3.png");h=new PIXI.Sprite(R);h.anchorX=.5;h.anchorY=0;h.x=a.relativeX(.283);h.y=a.relativeY(.461);h.visible=!1;a.endScreen.addChild(h);n=new PIXI.BitmapText("0",I);n.x=a.centerX-n.textWidth+Q;n.y=a.centerY+a.relativeY(.061);a.endScreen.addChild(n);c=PIXI.Texture.fromFrame("new.png");r=new PIXI.Sprite(c);r.anchorX=.5;r.anchorY=.5;r.x=a.relativeX(.54);r.y=
a.relativeY(.525);r.visible=!1;a.endScreen.addChild(r);c=PIXI.Texture.fromFrame("continue.png");y=new PIXI.Sprite(c);y.anchorX=.5;y.anchorY=.5;y.x=a.centerX;y.y=a.relativeY(.72);a.endScreen.addChild(y);a.endScreen.hitArea=new PIXI.Rectangle(0,0,a.width,a.height);a.endScreen.responsive=!0;a.endScreen.click=a.endScreen.tap=function(){ENEA.fadeElement(a.main,1,0,b.FADETIME,function(){a.endScreen.responsive=!1;a.sharing.responsive=!1},function(){h.visible=!1;a.removeUpdate("gameover");b.menu()})};if(null!==
a.sharing||"undefined"!==a.sharing)a.sharing=new ENEA.Container(b.drawSharing),a.sharing.responsive=!0};b.moreGamesLink=function(a){a.originalEvent.preventDefault();console.log("click")};b.drawSharing=function(){var c=PIXI.Texture.fromFrame("twitter.png"),d=new PIXI.Sprite(c);d.anchorXY=.5;d.x=a.centerX-c.width-a.relativeX(.03);d.y=a.centerY-G.height/2-c.height/2-a.relativeY(.02);d.responsive=!0;d.click=d.tap=function(a){b.createShareLink("twitter");b.clickShareLink(document.getElementById("boShareLink"));
b.deleteShareLink(document.getElementById("boShareLink"))};this.addChild(d);c=PIXI.Texture.fromFrame("facebook.png");d=new PIXI.Sprite(c);d.anchorXY=.5;d.x=a.centerX;d.y=a.centerY-G.height/2-c.height/2-a.relativeY(.02);d.responsive=!0;d.click=d.tap=function(){b.createShareLink("facebook");b.clickShareLink(document.getElementById("boShareLink"));b.deleteShareLink(document.getElementById("boShareLink"))};this.addChild(d);c=PIXI.Texture.fromFrame("mail.png");c=new PIXI.Sprite(c);c.anchorXY=.5;c.x=a.centerX+
c.width+a.relativeX(.03);c.y=a.centerY-G.height/2-c.height/2-a.relativeY(.02);c.responsive=!0;c.click=c.tap=function(){b.createShareLink("mail");b.clickShareLink(document.getElementById("boShareLink"));b.deleteShareLink(document.getElementById("boShareLink"))};this.addChild(c)};b.createShareLink=function(a){var d=document.createElement("a");d.innerHTML="SHARE";d.id="boShareLink";d.style.display="none";d.target="_blank";var e=encodeURIComponent("http://m.silvergames.com/en/flappy-bird"),g=encodeURIComponent("http://m.silvergames.com/i/200/flappy-bird.jpg"),
f="I'm playing Flappy Bird game (http://m.silvergames.com/en/flappy-bird).  My best score so far is "+b.getScore()+" point"+(1==b.getScore()?"":"s");switch(a.toLowerCase()){case "twitter":d.href="https://twitter.com/intent/tweet?text="+f;break;case "facebook":d.href="https://www.facebook.com/sharer/sharer.php?m2w&s=100";d.href+="&p[title]=Sharing my in-game progress with you";d.href+="&p[summary]="+f;d.href+="&p[url]="+e;d.href+="&p[images][0]"+g;break;case "mail":d.href="mailto:",d.href+="?subject="+
escape("Sharing my in-game progress with you"),d.href+="&body="+escape(f)}document.body.appendChild(d)};b.clickShareLink=function(a){if(a.click)a.click();else if(document.createEvent){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0);allowDefaultAction=a.dispatchEvent(b)}};b.deleteShareLink=function(a){a.parentNode.removeChild(a)};b.initGameContainer=function(){a.main=new ENEA.Container;a.main.responsive=!0;a.main.alpha=0;a.main.mousedown=a.main.touchstart=b.mouseDown;a.main.mouseup=
a.main.touchend=b.mouseUp;a.main.addChild(D);a.main.addChild(e.body);a.main.addChild(f.body);a.main.addChild(p);a.main.addChild(_groundSprite2);a.main.addChild(_player.body);a.main.addChild(l);l.visible=!1;a.main.addChild(g);g.visible=!1;a.main.addChild(q);q.visible=!1;a.main.addChild(a.titleScreen);a.titleScreen.visible=!0;a.main.addChild(a.endScreen);a.endScreen.visible=!1;a.main.addChild(a.moreGames);a.main.addChild(a.sharing);a.sharing.visible=!1;a.stage.addChild(a.main);a.addUpdate("paralax",
function(){p.position.x-=U;p.position.x<=-a.width&&(p.position.x=a.width);_groundSprite2.position.x-=U;_groundSprite2.position.x<=-a.width&&(_groundSprite2.position.x=a.width)});a.addUpdate("playerAnim",function(){_player.updateAnimation()})};b.showPipes=function(){e.body.visible=!0;s=f.body.visible=!0};b.hidePipes=function(){e.body.visible=!1;s=f.body.visible=!1};b.menu=function(){ENEA._isIE||C.play("menu");B="menu";a.removeUpdate("pipe");u=ENEA._isHD?4:2;L=ENEA._isHD?9.81:3.924;H=ENEA._isHD?7:2.8;
b.hidePipes();l.visible=!1;g.visible=!1;a.endScreen.visible=!1;a.sharing.visible=!1;a.titleScreen.visible=!0;a.moreGames.visible=!0;_player.position={x:a.relativeX(.33),y:a.centerY};_player.body.x=_player.position.x;_player.body.y=_player.position.y;var c=_player.body.rotation=0;a.addUpdate("logo",function(){c+=.05;w.position.y=Math.floor(a.relativeY(.02)*Math.sin(c)+a.relativeY(.16))});ENEA.fadeElement(a.main,0,1,b.FADETIME)};b.isReturning=function(){return null===localStorage.getItem("fb.enea.sk")?
!1:!0};b.game=function(){B="game";a.removeUpdate("logo");a.moreGames.visible=!1;e.body.x=a.width;J=Math.random()*(a.height/1.2-2*e.offset)+e.offset;e.body.y=J;f.body.x=e.body.x+e.width+a.halfWidth;K=Math.random()*(a.height/1.2-2*f.offset)+f.offset;f.body.y=K;_player.velocity=-H/10;t.radius=_player.collisionRadius;V=a.height/1.2-2*e.offset;_randomRange2=a.height/1.2-2*f.offset;k=0;g.setText(k.toString());g.updateTransform();g.position.x=a.centerX-g.textWidth/2;a.titleScreen.visible=!1;a.endScreen.visible=
!1;l.visible=!0;l.alpha=1;var c=0;a.addUpdate("getready",function(){c+=.05;l.position.y=Math.floor(a.relativeY(.02)*Math.sin(c)+a.relativeY(.16))});setTimeout(function(){ENEA.fadeElement(l,1,0,500,null,function(){l.visible=!1;g.visible=!0;a.removeUpdate("getready")})},1E3);b.showPipes();b.getBoundingBoxes();s=!1;setTimeout(function(){s=!0},100);a.addUpdate("player",function(){_player.update()});var d=1500+2E3*Math.random();setTimeout(function(){a.addUpdate("pipe",function(){e.body.x-=u;0>e.body.x+
e.width&&(e.body.x=f.body.x+f.width+a.halfWidth,J=Math.random()*V+e.offset,e.body.y=J,M=!1);f.body.x-=u;0>f.body.x+f.width&&(f.body.x=e.body.x+e.width+a.halfWidth,K=Math.random()*_randomRange2+f.offset,f.body.y=K,N=!1)})},d);a.addUpdate("collision",function(){s&&(b.checkCollisions(),e.body.x<=_player.body.x&&!M&&(M=!0,b.updateScore()),f.body.x<=_player.body.x&&!N&&(N=!0,b.updateScore()))})};b.checkCollisions=function(){b.getBoundingBoxes();(b.intersects(t,O)||b.intersects(t,P)||b.intersects(t,_topPipe2BB)||
b.intersects(t,_bottomPipe2BB))&&b.gameOver();_player.position.y>a.height-p.height-_player.radius&&s&&b.gameOver();_player.position.y<_player.radius&&(_player.position.y=_player.radius)};b.circleIntersects=function(a,b){if(b.canCollide){var e=a.radius+b.radius;return Math.abs(b.position.x-a.x)<e&&Math.abs(b.position.y-a.y)<e?!0:!1}};b.getBoundingBoxes=function(){t.x=_player.body.x;t.y=_player.body.y;O=e.body.getChildAt(0).getBounds();P=e.body.getChildAt(1).getBounds();_topPipe2BB=f.body.getChildAt(0).getBounds();
_bottomPipe2BB=f.body.getChildAt(1).getBounds()};b.updateScore=function(b){ENEA._isIE||C.play("point");null==b||"undefined"==b?k++:k+=b;g.setText(k.toString());g.updateTransform();g.position.x=a.centerX-g.textWidth/2};b.updatePhysics=function(){u+=ENEA._isHD?.25:.125;L=2.4525*u;H=1.75*u};b.gameOver=function(){l.visible=!1;ENEA._isIE||C.play("hit");s=!1;a.removeUpdate("player");a.removeUpdate("collision");_player.body.y=_player.position.y;_player.body.rotation=_player.velocity/T;var c={y:_player.body.y,
r:_player.body.rotation,a:1,shake:0};ENEA.Tweener.addTween(c,{y:a.height+_player.frameDimensions,r:1,a:0,shake:70,time:700,onStart:function(){q.visible=!0;q.alpha=1},onUpdate:function(){_player.body.y=c.y;_player.body.rotation=c.r;q.alpha=c.a;40>c.shake?(a.main.position.x=10*Math.random(),a.main.position.y=5*Math.random()):(a.main.position.x=0,a.main.position.y=0)},onComplete:function(){b.gameOverMenu();q.visible=!1},transition:"easeOutCubic"})};b.gameOverMenu=function(){B="doNothing";a.endScreen.responsive=
!1;a.sharing.responsive=!1;h.visible=!1;r.visible=!1;m.setText("0");m.updateTransform();m.position.x=a.centerX-m.textWidth+F;var c=b.getScore();n.setText(c.toString());n.updateTransform();n.position.x=a.centerX-n.textWidth+Q;a.endScreen.visible=!0;a.moreGames.visible=!0;a.sharing.visible=!0;var d=0;a.addUpdate("gameover",function(){d+=.05;z.position.y=Math.floor(a.relativeY(.02)*Math.sin(d)+a.relativeY(.13))});b.showMedal();parseInt(c)<k?b.setScore(k):b.isReturning()||b.setScore(k);b.animScore(c)};
b.animScore=function(b){var d={score:0,old:k},e={score:k,old:0,time:400,onStart:function(){},onUpdate:function(){m.setText(Math.floor(d.score).toString());m.updateTransform();m.position.x=a.centerX-m.textWidth+F;g.setText(Math.floor(d.old).toString());g.updateTransform();g.position.x=a.centerX-g.textWidth/2;Math.floor(d.score)>parseInt(b)&&(r.visible=!0,n.setText(Math.floor(d.score).toString()),n.updateTransform(),n.x=a.centerX-n.textWidth+F)},onComplete:function(){g.visible=!1;ENEA.Tweener.removeAll();
B="end";a.endScreen.responsive=!0;a.sharing.responsive=!0},transition:"linear"};0==k&&(e.time=10);ENEA.Tweener.addTween(d,e)};b.showMedal=function(){20<=k?(h.setTexture(R),h.visible=!0):h.visible=!1;40<=k&&(h.setTexture(W),h.visible=!0);60<=k&&(h.setTexture(X),h.visible=!0);80<=k&&(h.setTexture(Y),h.visible=!0)};b.getScore=function(){if(!ENEA._isLocalStorage)return 0;var a=localStorage.getItem("fb.enea.sk");return null===a?0:a};b.setScore=function(a){ENEA._isLocalStorage&&localStorage.setItem("fb.enea.sk",
a)};b.intersects=function(a,d){var e=b.clamp(a.x,d.x,d.x+d.width),f=b.clamp(a.y,d.y,d.y+d.height),e=a.x-e,f=a.y-f;return e*e+f*f<a.radius*a.radius};b.clamp=function(a,b,e){return a<b?b:a>e?e:a};window.onload=function(){b.init();ENEA._isDesktop?(document.onkeydown=b.keyDown,document.onkeyup=b.keyUp):document.getElementById("lock").style.display="block"};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports.FB=b):this.FB=b}).call(this);